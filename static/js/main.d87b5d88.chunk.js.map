{"version":3,"sources":["contexts/InitialRfcCommandsContext.js","components/tooltips/LightTooltip.js","../../client-utilities/build/index.js","components/diff/v2/DiffNewRegions.js","components/diff/v2/CustomNavTab.js","components/diff/v2/LoadingNextDiff.js","components/docs/DocConstants.js","components/diff/v2/shape_viewers/ShapeOnlyShapeRows.js","components/support/NeedHelpButton.js","components/support/EmptyState.js","components/diff/v2/shape_viewers/SideBySideShapeRows.js","components/diff/v2/DiffHunkViewer.js","components/diff/v2/DiffCursor.js","components/diff/v2/Finalize.js","components/diff/v2/DiffReviewPage.js","components/diff/v2/DiffPageNew.js","components/diff/v2/shape_viewers/ReusableDiffRow.js","components/docs/ContentTabs.js","components/diff/v2/shape_viewers/styles.js","components/diff/SimulatedCommandContext.js","components/diff/v2/DiffCopy.js","components/diff/v2/CaptureManagerPage.js","../../cli-client/build/index.js","engine/routines.js","components/diff/v2/DiffHelperCard.js","components/diff/v2/Stats.js","theme.js","Analytics.js","components/docs/DocSubGroup.js","utilities/RequestUtilities.js","utilities/EndpointUtilities.ts","contexts/RfcContext.js","components/diff/v2/shape_viewers/ShapeRenderContext.js","ContributionKeys.js","components/navigation/Loading.js","contexts/CommandContext.js","utilities/dump-spec-service-state.js","contexts/BaseUrlContext.js","utilities/debug-dump.js","serviceWorker.js","components/loaders/ApiLoader.js","components/docs/DocParameter.js","components/docs/DocsPage.js","routes.js","services/diff/ExampleDiffService.ts","entrypoints/testing-sessions.js","services/diff/LocalCliDiffService.ts","entrypoints/localcli.js","components/support/WelcomePage.js","entrypoints/private-sessions.js","components/DemoModal.js","entrypoints/demo-sessions.js","entrypoints/index.js","App.js","components/diff/UrlToPath.js","components/diff/PathMatcher.js","components/diff/v2/AddUrlModal.js","index.js","contexts/CaptureContext.js","../../cli-client/build/client.js","../../client-utilities/build/json-http-client.js","components/diff/v2/shape_viewers/Indent.js","../../cli-client/build/spec-service-client.js","contexts/GenericContextFactory.js","contexts/SpecServiceContext.js","components/diff/v2/DiffContext.js","components/diff/v2/PathAndMethod.js","components/diff/v2/MoreRecentCapture.js","components/shared/JsonTextarea.js","contexts/EndpointContext.js","components/support/Links.js","components/shared/Show.js","components/utilities/PathUtilities.js","contexts/MockDataContext.js","components/docs/DocContribution.js","components/diff/v2/DiffHooks.js","RouterPaths.js","components/navigation/Navbar.js","components/Page.js","components/diff/v2/DiffViewSimulation.js","components/diff/v2/DiffReviewExpanded.js"],"names":["GenericContextFactory","InitialRfcCommandsContext","Context","withContext","global","devlog2","InitialRfcCommandsStore","this","props","rfcId","initialCommandsString","initialEventsString","push","instance","e","length","c","Provider","value","children","React","LightTooltip","withStyles","theme","tooltip","backgroundColor","palette","common","white","color","boxShadow","shadows","maxWidth","fontSize","padding","Tooltip","Object","defineProperty","exports","JsonHttpClient","json_http_client_1","enumerable","get","_NewRegions","newRegions","ignoreDiff","captureId","endpointId","classes","useStyles","acceptSuggestion","useContext","DiffContext","useCaptureContext","diffService","captureService","useState","deselected","setDeselected","finished","setFinished","inferPolymorphism","setInferPolymorphism","isDeselected","diff","find","i","CompareEquality","between","onChange","target","checked","filter","onApply","a","allIgnored","diffBlock","map","Promise","all","loadInteraction","firstInteractionPointer","interaction","cacheKey","toString","cached","window","naiveCache","loadInitialPreview","JsonHelper","fromInteraction","suggestion","getOrUndefined","allApproved","track","newRequests","inRequest","PreviewNewBodyRegion","key","newResponses","inResponse","requestCount","responseCount","regions","locationString","approveCount","className","header","elevation","style","flex","variant","approveNewRegions","title","display","flexDirection","marginTop","DocDarkGrey","marginRight","control","size","disabled","labelPlacement","label","onClick","wrapper","diffsNewRegion","region","when","marginBottom","NewRegions","nextProps","nextState","nextContext","console","log","Component","BreadcumbX","location","itemStyles","separator","aria-label","n","crumb","isChecked","interactionsCount","interactionIndex","setInteractionIndex","useEffect","undefined","currentInteractionPointer","getIndex","interactionPointers","currentInteraction","useInteractionWithPointer","useInitialBodyPreview","interactionScala","initialBody","preview","loadingInferPoly","bodyPreview","shapePreview","regionHeader","classNames","uncheckedText","primary","contentType","statusCode","secondary","primaryTypographyProps","secondaryTypographyProps","unchecked","count","page","showLastButton","pageNumber","newContentPreview","width","paddingRight","alignItems","exampleOnly","makeStyles","root","blur","opacity","pointerEvents","paddingLeft","justifyContent","position","top","zIndex","paddingTop","hunkHeader","paddingBottom","minHeight","fontWeight","marginLeft","textTransform","heading","typography","pxToRem","fontWeightRegular","overflow","hunk","subheader","height","AddedGreenBackground","ChangedYellowBackground","RemovedRedBackground","CustomNavTab","minWidth","textAlign","textOverflow","whiteSpace","spacing","disableRipple","CustomNavTabDense","DiffLoading","show","sideBySide","component","textParent","text","DiffLoadingOverview","rootOverview","DiffReviewLoading","rootUnder","withChildren","visibility","margin","SubHeadingTitleColor","DocGrey","ParametersStyles","SubHeadingStyles","letterSpacing","DocSubGroupHeadingStyles","DocSubGroupHeadingBigStyles","methodColorsDark","GET","POST","PUT","PATCH","DELETE","DocDivider","DocSubHeading","ShapeOnlyViewer","useShapeViewerStyles","rootId","shape","getRootShape","Error","hideDivider","depth","renderShape","nested","baseShapeId","ObjectRender","Boolean","AnyShape","shapeRender","ShapeRenderContext","renderChild","setRenderChild","setType","link","Row","left","rowContents","typeName","name","onTypeClick","in","add","getSpecShape","withShapeRenderContext","onLeftClick","stayHighlighted","rowHighlightColor","highlight","row","rowWithHover","noHover","spacerBorder","replace","right","fields","mapScala","field","FieldRow","withIndent","FieldName","missing","fieldName","ValueRows","FieldDescription","fieldId","RfcContext","cachedQueryResults","handleCommands","description","contributions","DESCRIPTION","editing","setEditing","stagedContent","setStagedContent","displayDescription","finalize","commandsForUpdatingContribution","fieldDescription","onBlur","autoFocus","fullWidth","multiline","inputProps","SymbolColor","source","noHeadings","cursor","fieldShape","specFieldId","isObject","NeedHelp","Button","Intercom","hide_default_launcher","paper","inlineCode","EmptyState","content","Paper","src","Typography","EmptyStateMarkdown","renderers","paragraph","DiffViewer","containerRef","useRef","isEnabled","isAbove","isBelow","x","compassState","setCompassState","elementRef","animationRaf","onAnimationFrame","useCallback","trackedEl","current","viewportHeight","innerHeight","boundingRect","getBoundingClientRect","bottom","requestAnimationFrame","ref","useCompassTargetTracker","compassTargetRef","useDiff","diffDescription","containerEl","querySelector","isTracked","onClickCompass","preventDefault","scrollIntoView","scrollMode","block","RowCompass","changeType","changeTypeAsString","ListRender","ValueContents","getJson","example","getHighlightColor","tracked","highlightColor","rowCompass","rowCompassBody","rowCompassDirection","rowCompassDirectionDown","rowCompassDirectionUp","DiffNotif","displayName","headOrUndefined","diffs","join","parent","Indent","showAllLists","ShapeExpandedContext","listId","id","items","itemsWithHidden","includes","item","index","ItemRow","isLast","lengthScala","IndexMarker","indexMarker","jsTypeString","prototype","call","isOptional","isNullable","innerShape","wordBreak","overflowWrap","fontFamily","useColor","StringColor","BooleanColor","NumberColor","AssertionMetTypeName","coloredComponents","asColoredString","specShapes","assertionMet","withDiffContext","diffAssertion","assertion","exampleShape","specShape","getOrUndefinedJson","diffNotif","exampleItemShape","listItemShape","specListItem","expandId","DiffHunkViewer","diffCursor","borderLeft","UpdatedBlue","diffTitle","diffCursorActions","diffItem","DiffCursor","state","showAllDiffs","selectedDiff","setSelectedDiff","setState","toggle","shouldComponentUpdate","betweenBodyDiffs","tab","componentDidUpdate","prevProps","prevState","snapshot","containsDiff","render","diffCount","DiffReviewExpanded","Cursor","Card","button","Collapse","timeout","List","IconButton","DiffItem","useDiffDescription","ListItem","DiffCopy","copy","titleCopy","Transition","forwardRef","Slide","direction","FinalizeDialog","open","close","canOnlyReset","commitMessage","setCommitMessage","saving","setSaving","acceptedSuggestions","SuggestionsContext","ignoredDiffs","IgnoreDiffContext","specService","useServices","reset","baseUrl","useBaseUrl","history","useHistory","initialEventStore","clientSessionId","clientId","commit","newEventStore","getCopy","opticEngine","com","useoptic","contexts","rfc","Commands","StartBatchCommit","EndBatchCommit","batchId","uuidv4","specContext","withSpecContext","applyCommands","jsArrayToVector","forEach","seqToVector","commands","saveEvents","setTimeout","message","suggestions","pastTenseChanges","pastTenseAction","pluralIf","collection","hasChanges","Dialog","TransitionComponent","keepMounted","onClose","DialogTitle","DialogContent","DialogContentText","TextField","onFocus","currentTarget","setSelectionRange","DialogActions","LinearProgress","eventStore","commandContext","RfcCommandContext","Facade","fromCommands","error","DiffReviewPage","method","pathId","rfcService","rfcState","currentState","endpointDescriptor","EndpointsContext","diffsForThisEndpoint","completed","currentTab","setCurrentTab","showFinalize","setShowFinalize","DiffResultHelper","groupEndpointDiffsByRegion","firstRequestIdWithDiff","firstResponseIdWithDiff","newRegionsCount","requestBodyTabs","requestDiffs","responseBodyTabs","responseDiffs","sectionHeader","empty","container","navigationContainer","navRoot","endpointPurpose","PathAndMethod","httpMethod","path","fullPath","suggestionsBox","suggestionsCount","buttonSmall","tabScroll","Tabs","orientation","tabs","_","pageContainer","center","seqToJsArray","bodyDiffsForId","flexGrow","overflowY","borderRight","grey","background","chips","flexShirnk","indent","statsSection","progressStats","progressWrapper","flexShrink","formControl","selectEmpty","stats","subStat","listItemInner","diffContainer","diffWrapper","fab","fabLabel","jsonHelper","createContext","SuggestionsStore","setAcceptedSuggestions","context","resetAccepted","IgnoreDiffStore","setIgnoredDiffs","resetIgnored","flatten","acc","array","InnerDiffWrapper","isLoading","session","endpointDiffs","updatedAdditionalCommands","diffId","diffsForPathAndMethod","jsArrayToSeq","updatedSuggestions","simulatedCommands","reduce","action","_CaptureSessionInlineContext","services","Consumer","suggestionsContext","SimulatedCommandContext","shouldSimulate","CaptureContext","CaptureSessionInlineContext","compose","withRfcContext","withSpecServiceContext","specStore","SpecServiceContext","match","params","inContextOfDiff","notFound","to","ReusableDiffRow","mainContentMax","notifications","classnames","mainContent","spacer","RequestTabsContext","withRequestTabsContext","RequestTabsContextStore","requestContentType","responseStatusCode","responseContentType","setRequestContentType","setResponseStatusCode","setResponseContentType","ContentStyledTabs","indicator","TabIndicatorProps","ContentStyledTab","Tab","ContentTabs","options","contentTypes","renderDescription","renderResponse","renderRequest","contentTypeTab","setContentTypeTab","contentTypeOptions","contribution","newValue","animation","willChange","transition","transform","borderRadius","fill","menu","userSelect","fontStyle","hiddenItem","symbols","toolbar","dash","isSticky","HiddenItemEllipsis","setShowAllLists","DiffToolTip","placement","ObjectColor","ListColor","UnknownColor","modifier","TypeName","isLink","textDecoration","Symbols","symbol","serializeEvents","JSON","stringify","commandsToJson","hash","sha1","components","normal","code","UpdatedBlueBackground","AllCapturesContext","AllCapturesStore","captures","setCaptures","dismissed","setDismissed","useSpecService","update","listCaptures","listCapturesResponse","task","addEventListener","removeEventListener","opticDump","dumpSpecServiceState","dumpEvents","listEvents","dismissCapture","switchToCapture","CaptureManagerPage","routerPaths","useRouterPaths","Navbar","mini","Body","padded","diffsRoot","CaptureManager","exact","captureRoot","CaptureDiffWrapper","captureRequestDiffsRoot","RequestDiffWrapper","subtabs","CaptureChooserComponent","captureContext","unrecognizedUrls","skipped","processed","realEndpointDiffCount","isDocumentedEndpoint","totalEndpoints","urlsSplit","splitUnmatchedUrls","setTab","undocumentedUrlCount","total","debugOptic","debugDump","placeholder","event","reload","capture","time","ago","lastUpdate","hasDiff","showSkipped","EndpointDiffs","UnrecognizedUrls","AddOpticLink","trim","real","realCount","anyHaveDiffs","some","Link","undocumented","allUnmatchedPaths","allPaths","urls","pendingUrl","setPendingUrl","urlOverride","override","newUrl","onAdd","result","Stat","number","totalCount","url","divider","SpecServiceClient","Client","client_1","spec_service_client_1","RfcCommands","AddContribution","alignItem","font","icon","buttons","DiffHelperCard","selectedInterpretation","setSelectedInterpretation","clearPreview","useSuggestionsForDiff","summary","PulsingOptic","betweenWithoutCommands","copyPair","toIgnore","DiffStats","methodColors","appTheme","createMuiTheme","main","updated","added","removed","httpMethods","OPTIONS","dark","opticVersion","packageJson","version","isAnalyticsEnabled","opticAnalyticsEnabled","readyPromise","resolve","client","getIdentity","response","ok","json","user","FS","identify","sub","email","analytics","warn","shutdown","touchAnalytics","trackEmitter","EventEmitter","allProps","emit","DocSubGroup","innerStyle","getNormalizedBodyDescriptor","ShapedBodyDescriptor","getEndpointId","pathMethodKeyBuilder","createEndpointDescriptor","requests","pathsById","requestIdsByPathId","responsesArray","requestsOnPathAndMethod","requestId","request","requestDescriptor","toUpperCase","pathParameters","pathTrail","asPathTrail","pathComponent","pathComponentName","getNameWithFormattedParameters","pathComponentId","p","isPathParameter","descriptor","ParameterizedPathComponentDescriptor","requestBodies","requestBody","bodyDescriptor","responsesForPathAndMethod","sortBy","responseDescriptor","responseId","responseBody","httpStatusCode","responses","PURPOSE","endpointDescription","isEmpty","stuffFromQueries","queries","requestsState","pathComponents","requestParameters","pathIdsByRequestId","pathsWithRequests","pathIdsWithRequests","Set","values","endpoints","shapesState","shapesResolvers","entries","entry","BaseRfcStore","CommandContext","initialRfcInput","setError","setX","setUpdateCount","makeEventStore","bulkAdd","fromJsonCommands","handleCommand","Queries","getCommandsAsJson","RfcStore","LocalRfcStore","enqueueSnackbar","useSnackbar","debounce","leading","trailing","LocalDiffRfcStore","ShapeRenderStore","ShapeExpandedStore","collapsedIds","Array","from","setCollapsedIds","include","delete","Loading","loaderCenter","disableShrink","thickness","outputFileName","downloadSourcePath","downloadDestinationPath","events","listCapturedSamples","output","parse","examples","blob","Blob","type","URL","createObjectURL","document","createElement","href","download","click","BaseUrlContext","sessionCleaned","samples","body","asJsonString","asText","Math","floor","Date","now","hostname","unregister","navigator","serviceWorker","ready","then","registration","ApiSpecServiceLoader","diffServiceFactory","captureServiceFactory","debugData","useMockData","service","setService","setEvents","available","loading","serviceFactory","createExampleSpecServiceFactory","data","eventEmitter","on","specServiceEvents","LocalCliSpecServiceLoader","loadConfig","config","apiName","ignoreRequests","getCaptureStatus","status","toISOString","serializedEvents","listExamples","saveExample","requestExamples","getEnabledFeatures","TESTING_DASHBOARD","DocParameter","paramId","updateContribution","alignSelf","overviewSection","expand","specPreview","DocsPage","Page","scrollToTop","docsRoot","DocumentationToc","requestDocsRoot","EndpointDocumentationWrapper","DocumentingYourApi","getContribution","hasRequestBody","httpContentType","endIcon","res","bgColor","useParams","EndpointDocs","purpose","fingerPrint","usePageTitle","currentRfcState","diffPreviewer","DiffPreviewer","responsesGroupedByStatusCode","groupBy","allResponses","keys","sort","r","renderedShape","previewShape","toOption","shapeId","TestingDashboardLoader","lazy","ApiRoutes","fallback","strict","testingDashboard","process","demo","ExampleCaptureService","additionalCommands","filters","notificationsUrl","interactionPointer","uuid","ExampleDiffService","diffConfig","ScalaJSHelpers","toJsArray","samplesSeq","undocumentedUrlHelpers","helpers","UndocumentedUrlHelpers","counter","countUndocumentedUrls","UrlCounterJsonSerializer","toFriendlyJs","UrlCounterHelper","fromJsonToSeq","diffedInteractionsCounter","skippedInteractionsCounter","descriptionFromDiff","suggestionsForDiff","previewBodyRender","interactions","previewShapeRender","TestingSessions","useRouteMatch","sessionId","useMockSession","exampleSessionCollection","_events","_rfcState","computeInitialDiff","cachingResolversAndRfcStateFromEventsAndAdditionalCommands","resolvers","DiffHelpers","emptyInteractionPointersGroupedByDiff","groupInteractionPointerByDiffs","LocalCliDiffService","diffsJson","DiffWithPointersJsonDeserializer","fromJs","randomPointers","LocalCliCaptureService","postJson","LocalCli","apiId","WelcomePage","OpticDocs","PrivateSessions","DemoModal","setOpen","handleClose","aria-labelledby","DemoSessions","showModal","setShowDemoModal","actionsCompleted","setActions","setInterval","setMessage","setAction","hasCommited","setHasCommited","pathname","eventProps","diffAmount","exampleEndpointName","preventDuplicate","autoHideDuration","anchorOrigin","horizontal","vertical","onCancel","TopLevelRoutes","App","hasError","AppError","Fragment","CssBaseline","ThemeProvider","maxSnack","onClickRefresh","stack","SupportLinks","createStyles","thin","thick","PathComponentItem","updateItem","isParameter","ButtonBase","originalName","UrlToPath","onAccept","split","charAt","rest","urlStringToPathComponents","setPathComponentsInternal","lastInteractedIndex","setLastInteractedIndex","setItemAt","newItem","setPathComponents","parameters","flatMap","updater","PathMatcher","handlePathComponentsChange","pathExpression","pathComponentsToString","pathWrapper","maxHeight","OpticIds","NewUrlModal","knownPathId","naming","setNaming","setPathExpression","handleCreate","lastParentPathId","pathStringToPathComponents","resolvePath","toAdd","lastMatch","addition","newPathId","command","RequestsCommands","AddPathParameter","AddPathComponent","regex","pathString","pathToRegexp","start","end","completePathMatcherRegex","matches","exec","matchingUrls","NamingDialog","setPurpose","transitionDuration","onKeyPress","initialPathString","Show","stripped","trimTrailingEmptyPath","slice","opticDebug","ReactDOM","getElementById","initialState","debouncer","notificationChannel","pendingUpdates","reloadDebounce","_CaptureContextStore","componentDidMount","maxWait","startDiff","notifData","notifDataUpdates","hasOwnProperty","hasMoreInteractions","listDiffs","listUnrecognizedUrls","diffsResponse","urlsResponse","newUrls","cleanupDiff","s","apiConfig","eventsLength","additionalCommandsLength","eventsAsArray","eventsJsArray","stats_SIMULATED","EventSource","onmessage","onerror","onopen","loadStats","endpointDiffsWithoutIgnored","filterIgnored","CaptureContextStore","_classCallCheck","_createClass","client_utilities_1","concat","getJsonWithoutHandlingResponse","putJson","taskConfig","specId","_regeneratorRuntime","_asyncToGenerator","__importDefault","mod","__esModule","cross_fetch_1","_verifyOkResponse","mark","_callee","wrap","_context","prev","next","sent","statusText","abrupt","stop","_x","apply","arguments","_handleJsonResponse","_callee2","_context2","_x2","additionalHeaders","default","headers","assign","accept","handleJsonResponse","Accept","postJsonString","verifyOkResponse","putJsonString","DepthContext","IndentIncrement","bottleneck_1","outgoingPoll","maxConcurrent","minTime","getJsonAsText","_this","_this2","schedule","metadata","_getEnabledFeatures","getTestingCredentials","defaultValue","Wrapper","SpecServiceStore","enabledFeatures","forceUpdate","determineEnabledFeatures","useEnabledFeatures","_DiffContextStore","isFinishing","exampleInteractions","DiffContextStore","methodRender","pathRender","PathAndMethodOverflowFriendly","PathAndMethodLarge","SquareChip","mode","tabSize","showPrintMargin","editorProps","$blockScrolling","EndpointsContextStoreWithoutContext","lookupExampleForRequest","lookupExampleForResponse","EndpointsContextStore","PathNameFromId","docsBaseLink","Contact","subject","GithubIssues","ShowSpan","asNormalizedAbsolutePath","pathTrailComponents","pathTrailComponent","BasicPathComponentDescriptor","getNormalizedName","asAbsolutePath","lastPathId","lastPath","parentPathId","reverse","asPathTrailComponents","normalizePath","lastOrElse","rootPathComponent","normalizedPathMap","lastMatchComponents","prefixes","pathComponentPrefix","normalized","lengthDifference","MockDataContext","useMemo","fetchedData","refresh","fetch","getData","createDebugSession","deps","debugSession","setData","setLoading","setAvailable","catch","err","MarkdownRender","level","list","listItem","FieldDescriptionMarkdownRender","styles","_MarkdownContribution","inputValue","handleChange","b","MarkdownContribution","_HeadingContribution","HeadingContribution","setDescription","loadDescription","getDescription","pointer","setInteraction","mounted","getInteraction","setSuggestions","listSuggestions","requirement","getSuggestions","setPreview","setLoadingInferPoly","getInitialPreview","base","testingCapture","testingEndpointDetails","routesByName","routeName","route","drawer","miniDrawer","drawerPaper","miniDrawerPaper","topLevel","navButton","opticLogo","mainSection","PageContext","pageContext","titles","useLocation","scrollTo","injectedContext","setTitles","indexOf","menuItems","Drawer","anchor","_DiffViewSimulation","betweenBodyDiff","betweenSuggestions","betweenInteractions","renderDiff","outerRfcState","renderKey","previewDiff","timeEnd","previewBody","DiffViewSimulation","leftContent","rightDrawer","borderLeftColor","innerRow","shapeBox","headerBox","DiffReviewExpandedCached","rfcContext","setSelectedInterpretationInner","Pagination","nonEmpty","InnerRow","ShapeBox"],"mappings":"gOAMIA,YAAsB,MAFfC,E,EAATC,Q,EACAC,YAEFC,EAAOC,QAAU,G,IACXC,E,uKACM,IAAD,EACqDC,KAAKC,MAA1DC,EADA,EACAA,MAAOC,EADP,EACOA,sBAAuBC,EAD9B,EAC8BA,oBAQrC,OAPAP,EAAOC,QAAQO,KAAK,CAClBC,SAAUN,KAAKC,MAAMK,SACrBC,EAAGH,GAAuBA,EAAoBI,OAC9CC,EAAGN,GAAyBA,EAAsBK,OAClDJ,sBACAD,0BAGA,gBAACT,EAA0BgB,SAA3B,CAAoCC,MAAO,CAACT,QAAOC,wBAAuBC,wBACvEJ,KAAKC,MAAMW,c,GAZkBC,e,mDCRtC,6DAIaC,EAAeC,aAAW,SAAAC,GAAK,MAAK,CAC/CC,QAAS,CACPC,gBAAiBF,EAAMG,QAAQC,OAAOC,MACtCC,MAAO,sBACPC,UAAWP,EAAMQ,QAAQ,GACzBC,SAAU,IACVC,SAAU,GACVC,QAAS,MAPeZ,CASxBa,M,iCCXJC,OAAOC,eAAeC,EAAS,aAAc,CAC3CpB,OAAO,IAEToB,EAAQC,oBAAiB,EAEzB,IAAIC,EAAqB,EAAQ,KAEjCJ,OAAOC,eAAeC,EAAS,iBAAkB,CAC/CG,YAAY,EACZC,IAAK,WACH,OAAOF,EAAmBD,mB,odCmD9B,SAASI,EAAYnC,GAAQ,IACnBoC,EAAkDpC,EAAlDoC,WAAYC,EAAsCrC,EAAtCqC,WAAYC,EAA0BtC,EAA1BsC,UAAWC,EAAevC,EAAfuC,WAErCC,EAAUC,IAERC,EAAqBC,qBAAWC,KAAhCF,iBALkB,EAMcG,cAAhCC,EANkB,EAMlBA,YAAaC,EANK,EAMLA,eANK,EAQUC,mBAAS,IARnB,mBAQnBC,EARmB,KAQPC,EARO,OASMF,oBAAS,GATf,mBASnBG,EATmB,KASTC,EATS,OAUcJ,oBAAS,GAVvB,gCAWwBpC,IAAMoC,UAAS,IAXvC,mBAWnBK,EAXmB,KAWAC,EAXA,KAa1B,GAA0B,IAAtBlB,EAAW7B,OACb,OAAO,KAGT,IAAMgD,EAAe,SAACC,GAAD,QACjBP,EAAWQ,MAAK,SAACC,GAAD,OAAOC,kBAAgBC,QAAQF,EAAGF,EAAKA,UACrDK,EAAW,SAACL,GAAD,OAAU,SAAClD,GACrBA,EAAEwD,OAAOC,QAGZb,EACED,EAAWe,QAAO,SAACN,GAAD,OAAQC,kBAAgBC,QAAQF,EAAGF,EAAKA,UAH5DN,EAAc,GAAD,mBAAKD,GAAL,CAAiBO,EAAKA,UAQjCS,EAAO,uCAAG,8BAAAC,EAAA,6DACdd,GAAY,GACNe,EAAa/B,EAChB4B,QAAO,SAACI,GAAD,OAAeb,EAAaa,MACnCC,KAAI,SAACX,GAAD,OAAOA,EAAEF,QAEhBnB,EAAU,WAAV,cAAc8B,IANA,SAQYG,QAAQC,IAChCnC,EACG4B,QAAO,SAACI,GAAD,OAAgBb,EAAaa,MACpCC,IAFH,uCAEO,WAAOX,GAAP,yBAAAQ,EAAA,sEAE2BnB,EAAeyB,gBAC3Cd,EAAEe,yBAHD,mBAEKC,EAFL,EAEKA,YAIFC,EAAWjB,EAAEkB,WAAavB,EAAkBuB,aAC5CC,EAASC,OAAOC,YAAcD,OAAOC,WAAWJ,IAPnD,sBAUCE,EAVD,yCAWO/B,EAAYkC,mBAChBtB,EACAuB,aAAWC,gBAAgBR,GAC3BrB,GAdH,0CASK8B,EATL,EASKA,WATL,kBAmBIC,yBAAeD,IAnBnB,4CAFP,wDATY,OAQRE,EARQ,OAiCdC,YAAM,sBAEN5C,EAAgB,WAAhB,cAAoB2C,IAnCN,2CAAH,qDA2CPE,GACHpC,GACDf,EACGiC,KAAI,SAACb,GACJ,GAAIA,EAAKgC,UACP,OACE,kBAACC,EAAD,CACEjC,KAAMA,EACNkC,IAAKlC,EAAKA,KAAKoB,WACfrB,aAAcA,EACdM,SAAUA,EACVR,kBAAmBA,EACnBd,WAAYA,OAKnByB,QAAO,SAACN,GAAD,QAASA,KAEfiC,GACHxC,GACDf,EACGiC,KAAI,SAACb,GACJ,GAAIA,EAAKoC,WACP,OACE,kBAACH,EAAD,CACEjC,KAAMA,EACND,aAAcA,EACdM,SAAUA,EACV6B,IAAKlC,EAAKA,KAAKoB,WACfvB,kBAAmBA,EACnBd,WAAYA,OAKnByB,QAAO,SAACN,GAAD,QAASA,MAEjB6B,EAAYhF,QAAUoF,EAAapF,SACrC+E,YAAM,kBAAmB,CACvBO,aAAcN,EAAYhF,OAC1BuF,cAAeH,EAAapF,OAC5BwF,QAAS,CACPR,EAAYlB,KAAI,SAACX,GAAD,OAAOA,EAAEsC,kBACzBL,EAAatB,KAAI,SAACX,GAAD,OAAOA,EAAEsC,qBAKhCV,YAAM,kCAAmCtF,GAEzC,IAAMiG,EACJN,EAAapF,OAASgF,EAAYhF,OAAS0C,EAAW1C,OAExD,OACE,oCACE,kBAAC,IAAD,CAAM2F,UAAW1D,EAAQ2D,OAAQC,UAAW,GAC1C,yBAAKC,MAAO,CAAEC,KAAM,IAClB,kBAAC,IAAD,CAAYC,QAAQ,KAAKlF,MAAM,UAAUgF,MAAO,CAAE5E,SAAU,KAA5D,mCAIF,yBAAKyE,UAAW1D,EAAQgE,mBACtB,kBAAC,IAAD,CACEC,MACE,yBAAKJ,MAAO,CAAEK,QAAS,OAAQC,cAAe,WAA9C,+PAKE,kBAAC,IAAD,CACEJ,QAAQ,UACRF,MAAO,CAAEO,UAAW,GAAIvF,MAAOwF,MAFjC,sGAK0C,OAK9C,kBAAC,IAAD,CACER,MAAO,CAAES,YAAa,IACtBC,QACE,kBAAC,IAAD,CACEC,KAAK,SACLjD,QAASV,EACT4D,SAAU9D,EACVU,SAAU,SAACvD,GACTgD,EAAqBhD,EAAEwD,OAAOC,SAC1BzD,EAAEwD,OAAOC,SACXuB,YAAM,qBAAsB,CAAEhD,eAGlCjB,MAAM,YAGV6F,eAAe,QACfC,MACE,kBAAC,IAAD,CACEZ,QAAQ,QACRlF,MAAM,gBACNgF,MAAO,CAAE5E,SAAU,KAHrB,yBAUN,kBAAC,IAAD,CACEuF,KAAK,QACL3F,MAAM,UACN+F,QApHQ,WAChB,IAAMjD,EAAa/B,EAAWiC,KAAI,SAACX,GAAD,OAAOA,EAAEF,QAC3CnB,EAAU,WAAV,cAAc8B,KAmHN8C,SAAU9D,EACVkD,MAAO,CAAES,YAAa,KALxB,cASA,kBAAC,IAAD,CACEE,KAAK,QACL3F,MAAM,UACNkF,QAAQ,YACRU,SAA2B,IAAjBhB,GAAsB9C,EAChCiE,QAASnD,GALX,aAOagC,GAAgB,GAP7B,aAUD9C,GAAY,kBAAC,IAAD,QAGbA,GACA,yBAAK+C,UAAW1D,EAAQ6E,SACtB,yBAAKnB,UAAW1D,EAAQ8E,gBACrB/B,EAAYhF,OAAS,GACpB,yBAAK2F,UAAW1D,EAAQ+E,QACtB,kBAAC,IAAD,CAAYhB,QAAQ,KAAKlF,MAAM,WAA/B,YAGCkE,GAIL,kBAAC,IAAD,CAAMiC,KAAMjC,EAAYhF,QACtB,kBAAC,IAAD,CAAY8F,MAAO,CAAEO,UAAW,GAAIa,aAAc,OAGnD9B,EAAapF,OAAS,GACrB,yBAAK2F,UAAW1D,EAAQ+E,QACtB,kBAAC,IAAD,CAAYhB,QAAQ,KAAKlF,MAAM,WAA/B,aAGCsE,MAUV,IAAM+B,EAAb,oLACwBC,EAAWC,EAAWC,GAO1C,OANelE,kBAAgBC,QAC7B+D,EAAUvF,WACVrC,KAAKC,MAAMoC,cAJjB,+BAaI,OADA0F,QAAQC,IAAI,4BACL,kBAAC5F,EAAgBpC,KAAKC,WAbjC,GAAgCY,IAAMoH,WAiBzBC,EAAa,SAACjI,GACzB,IAAMwC,EAAUC,IACRyF,EAAyBlI,EAAzBkI,SAAUC,EAAenI,EAAfmI,WAClB,OACE,kBAAC,IAAD,CACEjC,UAAW1D,EAAQ0F,SACnBE,UAAW,0BAAM/B,MAAK,aAAI5E,SAAU,IAAO0G,IAAe,UAC1DE,aAAW,cAEVH,EACElE,QAAO,SAACN,GAAD,QAASA,KAChBW,KAAI,SAACiE,GAAD,OACH,kBAAC,IAAD,CACE5C,IAAK4C,EACLjC,MAAO8B,EACPjC,UAAW1D,EAAQ+F,MACnBlH,MAAM,WAELiH,QAOP7C,EAAuB,SAAC,GAMvB,IALLjC,EAKI,EALJA,KACAH,EAII,EAJJA,kBACAE,EAGI,EAHJA,aACAM,EAEI,EAFJA,SACAtB,EACI,EADJA,WAEMiG,GAAajF,EAAaC,GAC1BhB,EAAUC,IACVlC,EAASiD,EAAKiF,kBAHhB,EAK4C7H,IAAMoC,SAAS,GAL3D,mBAKG0F,EALH,KAKqBC,EALrB,KAOJC,qBAAU,WACRD,EAAoB,KACnB,CAACnF,EAAKA,KAAOA,EAAKA,KAAKoB,gBAAaiE,IAEvC,IAAMC,EAA4BC,mBAASvF,EAAKwF,oBAAdD,CAChCL,EAAmB,GAGfO,EAAqBC,YACzBJ,GAhBE,EAmB+CK,YACjD3F,EACAyF,GAAsBA,EAAmBG,iBACzC/F,EACAd,GAJe8G,EAnBb,EAmBIC,QAAsBC,EAnB1B,EAmB0BA,iBAO9B,IAAKN,IAAuBI,GAAeE,EACzC,OAAO,kBAAC,IAAD,MAGT,IAAMC,EAAcpE,yBAAeiE,EAAYG,aACzCC,EAAerE,yBAAeiE,EAAYI,cAEhD,OACE,oCACE,kBAAC,IAAD,CAAMvD,UAAW1D,EAAQkH,aAActD,UAAW,GAChD,kBAAC,IAAD,CACErC,QAASyE,EACT3E,SAAUA,EAASL,GACnBnC,MAAM,YAER,kBAAC,IAAD,CACE6E,UAAWyD,IAAW,eACnBnH,EAAQoH,eAAiBpB,IAE5BqB,QACErG,EAAKgC,UACDJ,yBAAe5B,EAAKsG,cAAgB,UADxC,UAEO1E,yBAAe5B,EAAKuG,YAF3B,qBAGM3E,yBAAe5B,EAAKsG,cAAgB,WAG5CE,UAAS,mBAAcxG,EAAKiF,kBAAnB,UACTwB,uBAAwB,CAAE5D,MAAO,CAAE5E,SAAU,KAC7CyI,yBAA0B,CAAE7D,MAAO,CAAE5E,SAAU,OAGjD,yBAAK4E,MAAO,CAAEC,KAAM,KACnB/F,EAAS,GAAK6E,yBAAe5B,EAAKsG,cACjC,kBAAC,IAAD,CACEzI,MAAM,UACN6E,UAAWyD,IAAW,eAAGnH,EAAQ2H,WAAa3B,IAC9CnC,MAAO,CAAEK,QAAS,QAClB0D,MAAO7J,EACP8J,KAAM3B,EACN4B,eAAgB/J,EAAS,EACzByG,KAAK,QACLnD,SAAU,SAACvD,EAAGiK,GAAJ,OAAmB5B,EAAoB4B,OAKvD,yBACErE,UAAWyD,IAAWnH,EAAQgI,kBAAT,eAClBhI,EAAQ2H,WAAa3B,KAGxB,yBAAKnC,MAAO,CAAEoE,MAAO,MAAOC,aAAc,KACvClB,GACC,kBAAC,IAAD,CACErD,OACE,yBAAKE,MAAO,CAAEK,QAAS,OAAQiE,WAAY,WACzC,kBAAC1C,EAAD,CACEE,WAAY,CAAE1G,SAAU,GAAIJ,MAAO,SACnC6G,SAAU,CAAC,aAEb,yBAAK7B,MAAO,CAAEC,KAAM,KACpB,0BAAMD,MAAO,CAAEhF,MAAO,UAAtB,YAIJ,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAgBiI,QAASE,EAAaoB,aAAW,OAKzD,yBAAKvE,MAAO,CAAEC,KAAM,IACjBmD,GACC,kBAAC,IAAD,CACEtD,OACE,kBAAC8B,EAAD,CACEE,WAAY,CAAE1G,SAAU,GAAIJ,MAAO,SACnC6G,SAAU,CAAC,uBAIf,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAiBoB,QAASG,EAAcmB,aAAW,UAU7DnI,EAAYoI,aAAW,SAAC9J,GAAD,MAAY,CACvC+J,KAAM,CACJL,MAAO,QAETM,KAAM,CACJC,QAAS,GACTC,cAAe,QAEjB9E,OAAQ,CACNlF,gBAAiB,QACjBS,QAAS,EACTwJ,YAAa,GACbxE,QAAS,OACTyE,eAAgB,SAChBC,SAAU,SACVC,IAAK,EACLC,OAAQ,IACRX,WAAY,UAEdpD,OAAQ,CACN7F,QAAS,GAEXgI,aAAc,CACZhD,QAAS,OACTC,cAAe,MACfC,UAAW,GACX8D,aAAc,IAEhBlE,kBAAmB,CACjBkE,aAAc,IAEhBF,kBAAmB,CACjBe,WAAY,GACZb,aAAc,EACdhE,QAAS,OACTC,cAAe,OAEjBwD,UAAW,CACTc,cAAe,OACfD,QAAS,KAEXpB,cAAe,CACbqB,cAAe,OACfD,QAAS,KAEXQ,WAAY,CACVd,aAAc,GACda,WAAY,EACZE,cAAe,EACfpK,MAAO,UACPqK,UAAW,GACXC,WAAY,IACZjF,QAAS,OACTC,cAAe,MACfgE,WAAY,QACZQ,eAAgB,SAElBjD,SAAU,CACR0D,WAAY,IAEdpI,KAAM,CACJ/B,SAAU,GACVkK,WAAY,IACZtK,MAAO,UACPuK,WAAY,GACZtF,KAAM,EACN4E,YAAa,IAEf3C,MAAO,CACL9G,SAAU,GACVoK,cAAe,aAEjBC,QAAS,CACPrK,SAAUV,EAAMgL,WAAWC,QAAQ,IACnCtK,QAAS,EACTiK,WAAY5K,EAAMgL,WAAWE,mBAE/B5E,QAAS,CACP6E,SAAU,SACVX,WAAY,IAEdY,KAAM,CACJlL,gBAAiB,QACjByK,UAAW,KAEbU,UAAW,CACTT,WAAY,IACZF,cAAe,EACfhE,aAAc,EACd4E,OAAQ,IAEV/E,eAAgB,CACdZ,QAAS,OACTC,cAAe,SACfuE,YAAa,EACbC,eAAgB,cAKjB,IACgDmB,IAKhD,IACgDC,IAKhD,IACgDC,K,iCC/jBnD,0HAKaC,EAAe3L,KAAW,SAACC,GACtC,MAAO,CACL+J,KAAM,CACJe,cAAe,OACfxK,MAAOwI,IACPnI,QAAS,EACTkF,UAAW,EACXyF,OAAQ,GACRX,UAAW,UACXgB,SAAU,UACVf,WAAY,IACZgB,UAAW,OACXlL,SAAUV,EAAMgL,WAAWC,QAAQ,IACnCY,aAAc,WACdC,WAAY,SACZ/F,YAAa/F,EAAM+L,QAAQ,GAC3B,UAAW,CACT9B,QAAS,IAGb3D,QAAS,CACPsD,WAAY,iBArBU7J,EAwBzB,SAACd,GAAD,OAAW,kBAAC,IAAD,eAAK+M,eAAa,GAAK/M,OAExBgN,EAAoBlM,KAAW,SAACC,GAC3C,MAAO,CACL+J,KAAM,CACJe,cAAe,OACfxK,MAAOwI,IACPnI,QAAS,EACTkF,UAAW,EACXyF,OAAQ,GACRX,UAAW,UACXgB,SAAU,UACVf,WAAY,IACZgB,UAAW,OACXlL,SAAUV,EAAMgL,WAAWC,QAAQ,IACnCY,aAAc,WACdC,WAAY,SACZ/F,YAAa/F,EAAM+L,QAAQ,GAC3B,UAAW,CACT9B,QAAS,IAGb3D,QAAS,CACPsD,WAAY,iBArBe7J,EAwB9B,SAACd,GAAD,OACD,kBAAC,IAAD,eACE+M,eAAa,GACT/M,EAFN,CAGEmH,MACE,yBAAKd,MAAO,CAAEK,QAAS,OAAQ+D,MAAO,SACpC,yBAAKpE,MAAO,CAAEC,KAAM,IAAMtG,EAAMmH,OAChC,6BAAMnH,EAAMoK,e,iCC9DpB,iKAOO,SAAS6C,EAAT,GAA+B,EAARC,KAAS,IAC/B1K,EAAUC,IAMhB,OACE,yBAAKyD,UAAW1D,EAAQsI,MACtB,yBAAK5E,UAAW1D,EAAQ6I,KACtB,kBAAC,IAAD,CAAU9E,QAAQ,OAAO8F,OAAQ,MAEnC,yBAAKnG,UAAW1D,EAAQ2K,YACtB,kBAAC,IAAD,CACE5G,QAAQ,OACR8F,OAAQ,IACRe,UAAU,MACVlH,UAAW1D,EAAQ6K,YAEnB,kBAAC,IAAD,CACED,UAAU,MACVlH,UAAW1D,EAAQ8K,KACnB/G,QAAQ,YAHV,6BAQF,yBAAKF,MAAO,CAAEoE,MAAO,MACrB,kBAAC,IAAD,CAAUlE,QAAQ,OAAOkE,MAAO,IAAK4B,OAAQ,QAM9C,SAASkB,EAAT,GAAwC,IAATL,EAAQ,EAARA,KAC9B1K,EAAUC,IAEhB,OAAKyK,EAKH,yBAAKhH,UAAW1D,EAAQgL,cACtB,kBAAC,IAAD,CACEjH,QAAQ,OACR8F,OAAQ,GACRe,UAAU,MACV/G,MAAO,CAAEO,UAAW,MAGtB,kBAAC,IAAD,CACEL,QAAQ,OACR8F,OAAQ,GACRe,UAAU,MACV/G,MAAO,CAAEO,UAAW,MAEtB,kBAAC,IAAD,CACEL,QAAQ,OACR8F,OAAQ,GACRe,UAAU,MACV/G,MAAO,CAAEO,UAAW,MAEtB,kBAAC,IAAD,CACEL,QAAQ,OACR8F,OAAQ,GACRe,UAAU,MACV/G,MAAO,CAAEO,UAAW,OA5BjB,KAkCJ,SAAS6G,EAAT,GAAsC,IAATP,EAAQ,EAARA,KAC5B1K,EAAUC,IAEhB,OAAKyK,EAKH,yBAAKhH,UAAW1D,EAAQkL,WACtB,yBAAKxH,UAAW1D,EAAQ2K,YACtB,kBAAC,IAAD,CACE5G,QAAQ,OACR8F,OAAQ,IACRe,UAAU,MACVlH,UAAW1D,EAAQ6K,WACnBM,aAAc,CACZA,aAAcnL,EAAQmL,eAGxB,kBAAC,IAAD,CACEP,UAAU,MACVlH,UAAW1D,EAAQ8K,KACnB/G,QAAQ,WACRF,MAAO,CAAEuH,WAAY,YAJvB,gCASF,yBAAKvH,MAAO,CAAEoE,MAAO,MACrB,kBAAC,IAAD,CAAUlE,QAAQ,OAAOkE,MAAO,IAAK4B,OAAQ,QAzB1C,KA+BX,IAAM5J,EAAYoI,aAAW,SAAC9J,GAAD,MAAY,CACvC+J,KAAM,CACJL,MAAO,QAET+C,aAAc,CACZtC,YAAa,GACbR,aAAc,IAEhBgD,UAAW,CACTjD,MAAO,OACP7D,UAAW,IAEb0G,KAAM,CACJO,OAAQ,SACRpM,SAAU,GACVkK,WAAY,IACZtK,MAAO,UACPuM,WAAY,sBAEdP,WAAY,CACV3G,QAAS,OACTyE,eAAgB,SAChB7E,KAAM,EACN9E,SAAU,UACVmJ,WAAY,UAEdU,IAAK,CACHI,cAAe,IAEjB0B,WAAY,CACVzG,QAAS,OACTlF,SAAU,UACVmF,cAAe,OAEjBgH,aAAc,CACZC,WAAY,gB,+XChJHE,E,MAAuBjE,EACvBkE,EAAU,UACVlH,EAAc,UAEdmH,EAAmB,CAC9BrC,WAAY,IACZlK,SAAU,IAECwM,EAAmB,CAC9B5M,MAAOyM,EACPnC,WAAY,IACZuC,cAAe,QACfrC,cAAe,QAEJsC,EAA2B,CACtC9M,MAAO0M,EACPtM,SAAU,OACVkK,WAAY,IACZuC,cAAe,SAEJE,EAA8B,CACzC/M,MAAOwF,EACPpF,SAAU,OACVkK,WAAY,IACZuC,cAAe,SAWJG,EAAmB,CAC9BC,IAAK,UACLC,KAAM,UACNC,IAAK,UACLC,MAAO,UACPC,OAAQ,WAaGC,EAAa,SAAC,GAAD,IAAGtI,EAAH,EAAGA,MAAH,OACxB,kBAAC,IAAD,CAASA,MAAK,2BAAOA,GAAP,IAAcpF,gBAAiB,eAElC2N,EAAgB,SAAC,GAAD,IAAGnI,EAAH,EAAGA,MAAOW,EAAV,EAAUA,QAAV,OAC3B,kBAAC,IAAD,CAAYA,QAASA,EAASb,QAAQ,KAAKF,MAAO4H,GAC/C,IACAxH,EAAO,O,qQCpBL,SAASoI,EAAgB7O,GAAQ,IAC9BsJ,EAAyBtJ,EAAzBsJ,QAASsB,EAAgB5K,EAAhB4K,YACXpI,EAAUsM,cAEhB,IAAKxF,EACH,OAAO,KAGSA,EAAQyF,OAA1B,IACMC,EAAQ5J,yBAAekE,EAAQ2F,cAErC,IAAKD,EACH,MAAM,IAAIE,MAAM,+BAGlB,OACE,kBAAC,IAAD,CACEF,MAAO1F,EACP6F,aAAa,EACbvE,YAAaA,GAEb,yBAAK1E,UAAW1D,EAAQsI,MACtB,kBAAC,IAAarK,SAAd,CAAuBC,MAAO,CAAE0O,MAAO,IACpCC,EAAYL,MAOvB,SAASK,EAAYL,EAAOM,GAC1B,IAAKN,EACH,OAAO,KAGT,OAAQA,EAAMO,aACZ,IAAK,UACH,OAAO,kBAACC,EAAD,CAAcR,MAAOA,EAAOM,OAAQG,QAAQH,KAErD,QACE,OAAO,kBAACI,EAAD,CAAUV,MAAOA,KAIvB,IAAMU,EAAW,SAAC1P,GACvB,IAAMwC,EAAUsM,cACRa,EAAgBhN,qBAAWiN,KAA3BD,YACAX,EAAUhP,EAAVgP,MAHyB,EAKKhM,mBAAS,MALd,mBAK1B6M,EAL0B,KAKbC,EALa,KAOjClH,qBAAU,WACRkH,EAAe,QACd,CAACd,IAEJ,IAAMe,EAAU,SAACC,GACf,GAAIA,IAASH,EACX,OAAOC,EAAe,MAExBA,EAAeE,IAGjB,OACE,oCACE,kBAACC,EAAD,CACEC,KAEI,kBAAC,IAAD,KACE,yBAAKhK,UAAW1D,EAAQ2N,aACtB,yBAAK9J,MAAO,CAAEC,KAAM,EAAG4E,YAAa,IAClC,kBAAC,IAAD,CAAUkF,SAAUpB,EAAMqB,KAAMC,YAAaP,SAOzD,kBAAC,IAAD,CAAUQ,KAAMV,GACbA,GACC,kBAAC,IAAD,CAAQW,IAAK,GACX,kBAAC,IAAD,CAAOtK,UAAW1D,EAAQ8M,OAAQlJ,UAAW,GAC3C,kBAAC,IAAa3F,SAAd,CAAuBC,MAAO,CAAE0O,MAAO,IACpCC,EACCjK,yBAAeuK,EAAYc,aAAaZ,WAW7CI,EAAMS,aAAuB,SAAC1Q,GAAW,IAAD,EAC7CwC,EAAUsM,cAERlE,EAA2D5K,EAA3D4K,YAAa+F,EAA8C3Q,EAA9C2Q,YAAaC,EAAiC5Q,EAAjC4Q,gBAAiBzB,EAAgBnP,EAAhBmP,YAE7C0B,EACoB,aAApB7Q,EAAM8Q,UACDxE,IACsB,WAApBtM,EAAM8Q,UACRvE,IACsB,YAApBvM,EAAM8Q,UACRtE,SADF,EAKT,OACE,yBACEtG,UAAWyD,IAAWnH,EAAQuO,KAAT,mBAClBvO,EAAQoO,gBAAkBA,GADR,cAElBpO,EAAQwO,cAAgBhR,EAAMiR,SAFZ,IAIrB5K,MAAO,CAAEpF,gBAAiB4P,IAE1B,yBAAK3K,UAAW1D,EAAQ0N,KAAM9I,QAASuJ,GACpC3Q,EAAMkQ,OAEPtF,IAAgBuE,GAChB,yBAAKjJ,UAAW1D,EAAQ0O,cACrB,IAAIC,QAAQ,KAAM,UAGrBvG,GACA,yBAAK1E,UAAW1D,EAAQ4O,MAAO/K,MAAO,CAAEoE,MAAO,QAC5CzK,EAAMoR,WAOJ5B,EAAekB,aAAuB,SAAC1Q,GAClC8O,cACuB9O,EAA/B2P,YADR,IACqBX,EAAkBhP,EAAlBgP,MAAOM,EAAWtP,EAAXsP,OACtB+B,EAASrC,EAAMqC,OACrB,OACE,qCACI/B,GAAU,kBAACW,EAAD,CAAKC,KAAM,kBAAC,IAAD,KAAU,KAAgBe,SAAO,IACvDK,mBAASD,EAATC,EAAiB,SAACC,GAAD,OAChB,kBAACC,EAAD,CAAUD,MAAOA,OAEnB,kBAAC,IAAD,KACE,kBAACtB,EAAD,CAAKC,KAAM,kBAAC,IAAD,CAASuB,YAAU,GAAE,KAAgBR,SAAO,SA+B/D,SAASS,EAAT,GAA2C,IAAtB/Q,EAAqB,EAArBA,SAAUgR,EAAW,EAAXA,QACvBnP,EAAUsM,cAChB,OACE,kBAAC,IAAD,CACEvI,QAAQ,UACRL,UAAW1D,EAAQoP,UACnBvL,MAAO,CAAE2E,QAAS2G,EAAU,GAAM,IAEjChR,EALH,KAmBJ,SAASkR,EAAT,GAA+B,IAAV7C,EAAS,EAATA,MACHF,cAChB,OAAO,kBAAC,IAAD,CAAiB0B,IAAK,GAAInB,EAAYL,GAAO,IAGtD,SAAS8C,EAAT,GAAwC,IAAZC,EAAW,EAAXA,QACpBvP,EAAUsM,cADqB,EAEUnM,qBAAWqP,KAAlDC,EAF6B,EAE7BA,mBAAoBC,EAFS,EAETA,eAGtBC,EAFoBF,EAAlBG,cAE0BhN,eAAe2M,EAASM,KALrB,EAOPrP,oBAAS,GAPF,mBAO9BsP,EAP8B,KAOrBC,EAPqB,OAQKvP,mBAASmP,GAAe,IAR7B,mBAQ9BK,EAR8B,KAQfC,EARe,KAW/BC,EAAqBP,GAAeK,EACpCG,EAAW,WACXH,IAAkBL,GACpBD,EAAc,WAAd,cACKU,YAAgCb,EAASM,IAAaG,KAG7DD,GAAW,IAGb,OACE,yBACErM,UAAW1D,EAAQqQ,iBACnBxM,MAAO,CAAE8E,eAAgB,aAExBmH,GACC,kBAAC,IAAD,CACE5R,MAAO8R,EACP3O,SAnBa,SAACvD,GAAD,OAAOmS,EAAiBnS,EAAEwD,OAAOpD,QAoB9CoS,OAAQH,EACRI,WAAS,EACTC,WAAW,EACXC,WAAW,EACXC,WAAY,CAAEJ,OAAQH,EAAUtM,MAAO,CAAEhF,MAAO8R,MAChDnM,KAAK,WAGPsL,GAAWI,GACX,yBAAKrM,MAAO,CAAEC,KAAM,GAAKc,QAAS,kBAAMmL,GAAW,KACjD,kBAAC,IAAD,CACEa,OAAQV,EACRW,YAAY,MAIhBlB,IAAgBG,GAChB,kBAAC,IAAD,CAAc7L,MAAM,yBAClB,kBAAC,IAAD,CACEP,UAAW,oBACXkB,QAAS,kBAAMmL,GAAW,IAC1BlM,MAAO,CACLoE,MAAO,GACP/D,QAAS,OACT2F,OAAQ,GACRiH,OAAQ,UACRjS,MAAO8R,KAET9R,MAAM,cAQX,IAAMmQ,EAAWd,aAAuB,SAAC1Q,GAC9C,IAAMwC,EAAUsM,cACRyC,EAAuBvR,EAAvBuR,MAAO5B,EAAgB3P,EAAhB2P,YACTiC,EAAYL,EAAMK,UAClB2B,EAAahC,EAAMvC,MAEnB+C,EAAUR,EAAMiC,YANkC,EAQlBxQ,mBAAS,MARS,mBAQjD6M,EARiD,KAQpCC,EARoC,KAUxDlH,qBAAU,WACRkH,EAAe,QACd,CAACyD,IASJ,OACE,oCACE,kBAACtD,EAAD,CACEW,gBAAiBnB,QAAQI,GACzBK,KACE,kBAAC,IAAD,KACE,yBAAKhK,UAAW1D,EAAQ2N,aACtB,6BACE,kBAACuB,EAAD,KAAYE,IAEd,yBAAKvL,MAAO,CAAEC,KAAM,EAAG4E,YAAa,IACjCqI,EAAWE,SACV,kBAAC,IAAD,CAAS9S,SAAU,MAEnB,kBAAC,IAAD,CAAUyP,SAAUmD,EAAWlD,KAAMC,YArBrC,SAACN,GACf,GAAIA,IAASH,EACX,OAAOC,EAAe,MAExBA,EAAeE,SAuBXoB,MAAO,kBAACU,EAAD,CAAkBC,QAASA,MAGnCwB,GAAcA,EAAWE,SACxB,kBAAC5B,EAAD,CAAW7C,MAAOuE,IAElB,kBAAC,IAAD,CAAUhD,KAAMV,GACbA,GACC,kBAAC,IAAD,CAAQW,IAAK,GACX,kBAAC,IAAD,CAAOtK,UAAW1D,EAAQ8M,OAAQlJ,UAAW,GAC3C,kBAAC,IAAa3F,SAAd,CAAuBC,MAAO,CAAE0O,MAAO,IACpCC,EACCjK,yBAAeuK,EAAYc,aAAaZ,c,yHC3W/C6D,EAAW,WAKtB,OACE,kBAACC,EAAA,EAAD,CAAQtS,MAAM,YAAY+F,QALT,WACjBtC,OAAO8O,SAAS,iBAAkB,sCAClC9O,OAAO8O,SAAS,SAAU,CAAEC,uBAAuB,MAGnD,eCTJ,kCASA,IAAMpR,EAAYoI,aAAW,SAAC9J,GAAD,MAAY,CACvCoF,OAAQ,CACNwG,UAAW,SACXlF,aAAc,IAEhBqM,MAAO,CACLpS,QAAS,GACT+I,MAAO,IACPoD,OAAQ,WACRpC,cAAe,IAEjBsI,WAAY,CACV9S,gBAAiB,UACjBS,QAAS,EACTD,SAAU,GACV8J,WAAY,EACZE,cAAe,EACf/E,QAAS,eACTrF,MAAO2I,SAII,SAASgK,EAAWhU,GACjC,IAAMwC,EAAUC,IACRgE,EAAmBzG,EAAnByG,MAAOwN,EAAYjU,EAAZiU,QAEf,OACE,kBAACC,EAAA,EAAD,CAAOhO,UAAW1D,EAAQsR,OACxB,yBAAK5N,UAAW1D,EAAQ2D,QACtB,yBAAKgO,IAAI,oBACT,kBAACC,EAAA,EAAD,CAAY7N,QAAQ,KAAKlF,MAAM,WAC5BoF,IAIL,kBAAC,IAAD,CAAYJ,MAAO,CAAEoB,aAAc,MAEnC,kBAAC4M,EAAD,CAAoBjB,OAAQa,IAE5B,yBAAK5N,MAAO,CAAEK,QAAS,OAAQE,UAAW,KACxC,yBAAKP,MAAO,CAAEC,KAAM,KACpB,kBAAC,EAAD,QAMR,SAAS+N,EAAT,GAAgD,IAAlBjB,EAAiB,EAAjBA,OAAQ/M,EAAS,EAATA,MAC9B7D,EAAUC,IAEhB,OACE,yBAAK4D,MAAOA,GACV,kBAAC,IAAD,CACE+M,OAAQA,EACRkB,UAAW,CACTC,UAAW,gBAAG5T,EAAH,EAAGA,SAAH,OACT,kBAACyT,EAAA,EAAD,CACE7N,QAAQ,QACRF,MAAO,CAAEsF,WAAY,IAAK/E,UAAW,GAAIiG,WAAY,aAEpDlM,IAGLoT,WAAY,gBAAGpT,EAAH,EAAGA,SAAH,OACV,kBAACyT,EAAA,EAAD,CAAYlO,UAAW1D,EAAQuR,YAAapT,U,qOC1B3C6T,G,OAAa,SAAC,GAAe,IAAbxF,EAAY,EAAZA,MACrBxM,EAAUsM,cACV2F,EAAeC,iBAAO,MAFW,EAkjBzC,SAAiCC,GAAY,IAAD,EACF3R,mBAAS,CAC/C4R,SAAS,EACTC,SAAS,EACTC,EAAG,KACHrK,MAAO,OALiC,mBACnCsK,EADmC,KACrBC,EADqB,KAOpCC,EAAaP,iBAAO,MACpBQ,EAAeR,iBAAO,MAEtBS,EAAmBC,uBAAY,WACnC,GAAKT,GAAc7P,OAAnB,CACA,IAAMuQ,EAAYJ,EAAWK,QAE7B,GAAKD,EAAL,CAEA,IAAME,EAAiBzQ,OAAO0Q,YACxBC,EAAeJ,EAAUK,wBAEzBd,EAAUa,EAAaE,OAAS,IAChCd,EAAUY,EAAapK,IAAMkK,EAAiB,EAC5CT,EAAaW,EAAbX,EAAGrK,EAAUgL,EAAVhL,MAGTmK,IAAYG,EAAaH,SACzBC,IAAYE,EAAaF,SACzBC,IAAMC,EAAaD,GACnBrK,IAAUsK,EAAatK,OAEvBuK,EAAgB,CACdJ,UACAC,UACAC,IACArK,UAIJyK,EAAaI,QAAUM,sBAAsBT,OAC5C,CACDJ,EAAaH,QACbG,EAAaF,QACbE,EAAaD,EACbC,EAAatK,QAQf,MAAO,CACLoL,IAAKZ,EACLF,gBAnmB8Ce,EAAwB,GAA3DC,EAH0B,EAG/BF,IAAuBd,EAHQ,EAGRA,aAHQ,EAILiB,cAA1BxS,EAJ+B,EAI/BA,KAAMyS,EAJyB,EAIzBA,gBAEdrN,qBAAU,WACR,IAAMsN,EAAczB,EAAaa,QAKjC,OAJAS,EAAiBT,QAAUY,EAAYC,cAAZ,WACrB3T,EAAQ4T,UADa,aACC5T,EAAQ4O,QAG7B,WACL2E,EAAiBT,QAAU,QAE5B,CAAC9R,GAAQA,EAAKoB,aAEjB,IAAMyR,EAAiBjB,uBACrB,SAAC9U,GACCA,EAAEgW,iBACGP,EAAiBT,SAEtBiB,YAAeR,EAAiBT,QAAS,CACvCkB,WAAY,SACZC,MAAO,aAGX,CAACjT,GAAQA,EAAKoB,aAGhB,OACE,yBAAKiR,IAAKpB,EAAcvO,UAAW1D,EAAQsI,MACzC,kBAAC,IAAarK,SAAd,CAAuBC,MAAO,CAAE0O,MAAO,IACpCC,EAAYL,IAGdxL,GACC,kBAACkT,EAAD,eACEC,WAAYV,EAAgBW,oBACxB7B,EAFN,CAGE3N,QAASiP,QAOnB,SAAShH,EAAYL,EAAOM,GAC1B,IAAKN,EACH,OAAO,KAGT,OAAQA,EAAMO,aACZ,IAAK,UACH,OAAO,kBAACC,EAAD,CAAcR,MAAOA,EAAOM,OAAQG,QAAQH,KACrD,IAAK,QACH,OAAO,kBAACuH,EAAD,CAAY7H,MAAOA,EAAOM,OAAQG,QAAQH,KACnD,QACE,OACE,kBAACW,EAAD,CACEC,KAAM,kBAAC4G,EAAD,CAAe9H,MAAOA,EAAOtO,MAAOqW,kBAAQ/H,EAAMgI,cAMlE,SAASC,EAAkBN,GACzB,MAAmB,aAAfA,EACKrK,IACiB,WAAfqK,EACFpK,IACiB,YAAfoK,EACFnK,SADF,EAKF,IAAMyD,EAAMS,aAAuB,SAAC1Q,GAAW,IAAD,EAC7CwC,EAAUsM,cACRlE,EAA6B5K,EAA7B4K,YAAa+F,EAAgB3Q,EAAhB2Q,YAEfE,EAAoBoG,EAAkBjX,EAAM2W,YAElD,OACE,yBACEzQ,UAAWyD,IAAWnH,EAAQuO,KAAT,mBAClBvO,EAAQwO,cAAgBhR,EAAMiR,SADZ,cAElBzO,EAAQ4T,YAAcpW,EAAMkX,SAFV,IAIrB7Q,MAAO,CAAEpF,gBAAiB4P,IAE1B,yBAAK3K,UAAW1D,EAAQ0N,KAAM9I,QAASuJ,GACpC3Q,EAAMkQ,OAEPtF,GACA,yBAAK1E,UAAW1D,EAAQ0O,cACrB,IAAIC,QAAQ,KAAM,UAGrBvG,GAAe,yBAAK1E,UAAW1D,EAAQ4O,OAAQpR,EAAMoR,WAM7D,SAASsF,EAAW1W,GAAQ,IAAD,EACnBwC,EAAUsM,cACVqI,EAAiBF,EAAkBjX,EAAM2W,YACvC7B,EAA+B9U,EAA/B8U,EAAGrK,EAA4BzK,EAA5ByK,MAAOmK,EAAqB5U,EAArB4U,QAASC,EAAY7U,EAAZ6U,QAE3B,OACE,yBACE3O,UAAWyD,IAAWnH,EAAQ4U,YAAT,mBAClB5U,EAAQoS,QAAUA,GADA,cAElBpS,EAAQqS,QAAUA,GAFA,IAIrBxO,MAAO,CACL6J,KAAM4E,EACNrK,SAEFrD,QAASpH,EAAMoH,SAEf,yBACElB,UAAW1D,EAAQ6U,eACnBhR,MAAO,CAAEpF,gBAAiBkW,IAE1B,kBAAC,IAAD,CACEjR,UAAWyD,IACTnH,EAAQ8U,oBACR9U,EAAQ+U,2BAGZ,kBAAC,IAAD,CACErR,UAAWyD,IACTnH,EAAQ8U,oBACR9U,EAAQgV,yBAIZ,kBAACC,EAAD,QApCRxH,EAAIyH,YAAc,kBA0CX,IAAMlI,EAAekB,aAAuB,SAAC1Q,GACXA,EAA/B2P,YADqD,IACxCX,EAAkBhP,EAAlBgP,MAAOM,EAAWtP,EAAXsP,OACtB+B,EAASrC,EAAMqC,OAErB,OACE,qCACI/B,GACA,kBAACW,EAAD,CACEC,KAAM,kBAAC,IAAD,KAAU,KAChBkB,MAAO,kBAAC,EAAD,CAAsBhB,SAAUpB,EAAMqB,OAC7CY,SAAO,IAGVK,mBAASD,EAATC,EAAiB,SAACC,GACjB,IAAM7L,EAAM,CAAC6L,EAAMK,UAAW+F,0BAAgBpG,EAAMqG,QAAQC,KAAK,KAEjE,OAAO,kBAACrG,EAAD,CAAU9L,IAAKA,EAAK6L,MAAOA,EAAOuG,OAAQ9I,OAEnD,kBAAC+I,EAAA,EAAD,KACE,kBAAC9H,EAAD,CAAKC,KAAM,kBAAC,IAAD,CAASuB,YAAU,GAAE,KAAgBR,SAAO,SAMlD4F,EAAanG,aAAuB,SAAC1Q,GAChC8O,cACuB9O,EAA/B2P,YADR,IACqBX,EAAkBhP,EAAlBgP,MAAOM,EAAWtP,EAAXsP,OACpB0I,EAAiBrV,qBAAWsV,KAA5BD,aAEFE,EAASlJ,EAAMmJ,GAEfC,EAAQpJ,EAAMqJ,gBAAgBL,EAAaM,SAASJ,IAE1D,OACE,qCACI5I,GACA,kBAACW,EAAD,CACEC,KAAM,kBAAC,IAAD,KAAU,KAChBkB,MAAO,kBAAC,EAAD,CAAsBhB,SAAUpB,EAAMqB,OAC7CY,SAAO,IAGVK,mBAAS8G,EAAT9G,EAAgB,SAACiH,EAAMC,GACtB,OACE,kBAACC,EAAD,CACE/S,IAAK8S,EACLD,KAAMA,EACNL,OAAQA,EACRQ,OAAQF,EAAQ,IAAMG,sBAAYP,QAIxC,kBAACL,EAAA,EAAD,KACE,kBAAC9H,EAAD,CAAKC,KAAM,kBAAC,IAAD,CAASuB,YAAU,GAAE,KAAgBR,SAAO,SAM/D,SAASS,EAAT,GAA2C,IAAtB/Q,EAAqB,EAArBA,SAAUgR,EAAW,EAAXA,QACvBnP,EAAUsM,cAChB,OACE,kBAACsF,EAAA,EAAD,CACE7N,QAAQ,UACRL,UAAW1D,EAAQoP,UACnBvL,MAAO,CAAE2E,QAAS2G,EAAU,GAAM,IAEjChR,EALH,KAUJ,SAASiY,EAAT,GAAoC,IAAbjY,EAAY,EAAZA,SACf6B,EAAUsM,cAChB,OACE,kBAACsF,EAAA,EAAD,CAAY7N,QAAQ,UAAUL,UAAW1D,EAAQqW,aAC9ClY,EADH,KAMJ,SAASkR,EAAT,GAAsC,IAAjBnR,EAAgB,EAAhBA,MAAOsO,EAAS,EAATA,MAGpB8J,GAFUhK,cACQnM,qBAAWiN,KAA3BD,YACa/N,OAAOmX,UAAUnU,SAASoU,KAAKtY,IAEpD,OAAKsO,EAIDA,EAAMiK,YAAcjK,EAAMkK,WACrB,kBAACrH,EAAD,CAAWnR,MAAOA,EAAOsO,MAAOA,EAAMmK,aAG1B,mBAAjBL,GAAsD,oBAAjBA,EAErC,kBAACf,EAAA,EAAD,CAAiBvH,IAAK,GAAInB,EAAYL,GAAO,IAI1C,KAbE,KAgBX,SAAS8H,EAAT,GAA0C,IAAjBpW,EAAgB,EAAhBA,MAAOsO,EAAS,EAATA,MACdF,cACQnM,qBAAWiN,KAA3BD,YAER,GAAqB,qBAAVjP,EACT,OAAO,KAGT,IAAKsO,EACH,OAAO,KAGT,IAAM8J,EAAelX,OAAOmX,UAAUnU,SAASoU,KAAKtY,GAEpD,OAAIsO,EAAMiK,YAAcjK,EAAMkK,WACrB,kBAACpC,EAAD,CAAepW,MAAOA,EAAOsO,MAAOA,EAAMmK,aAG9B,kBAAjBL,EACK,kBAAC,IAAD,KAAU,QAGE,mBAAjBA,EACK,kBAAC,IAAD,KAAU,KAGE,oBAAjBA,EACK,kBAAC,IAAD,KAAU,KAGE,oBAAjBA,EAEA,kBAAC1E,EAAA,EAAD,CACE7N,QAAQ,UACR6G,UAAU,MACVlH,UAAW,aACXG,MAAO,CACLsF,WAAY,IACZkB,WAAY,WACZuM,UAAW,YACXC,aAAc,aACdC,WAAY,+BACZjY,MAAOkY,IAASC,cAVpB,IAaI9Y,EAbJ,KAkBiB,qBAAjBoY,EAEA,kBAAC1E,EAAA,EAAD,CACE7N,QAAQ,UACRL,UAAW,aACXG,MAAO,CACLsF,WAAY,IACZ2N,WAAY,+BACZjY,MAAOkY,IAASE,eAGjB/Y,EAAQ,OAAS,SAKH,oBAAjBoY,EAEA,kBAAC1E,EAAA,EAAD,CACE7N,QAAQ,UACRL,UAAW,aACXG,MAAO,CACLsF,WAAY,IACZ2N,WAAY,+BACZjY,MAAOkY,IAASG,cAGjBhZ,EAAMkE,YAKN,KAKT,IAAM+U,EAAuB,SAAC,GAAyB,IAAvBvJ,EAAsB,EAAtBA,SACxB5N,GAD8C,EAAZ6D,MACxByI,eAERa,EAAgBhN,qBAAWiN,KAA3BD,YAER,IAAKS,EACH,OAAO,KAGT,IAAMwJ,EAAoBxJ,EAASyJ,gBAAgBlK,EAAYmK,YAE/D,OACE,yBAAK5T,UAAW1D,EAAQuX,cACtB,kBAAC,IAAD,CACE1T,MAAO,CACLhF,MAAO,UACPgL,OAAQ,GACR5B,MAAO,GACP7D,UAAW,EACXE,YAAa,KAGhBwK,mBAASsI,EAATtI,EAA4B,SAAC5N,EAAG4E,GAC/B,GAAI5E,EAAE4J,KACJ,OACE,0BAAM5H,IAAK4C,EAAGjC,MAAO,CAAEwG,WAAY,QAChCnJ,EAAE4J,WASJmK,EAAY/G,YACvBsJ,aAAgB,SAACha,GACf,IAAMwC,EAAUsM,cACRmH,EAAoBjW,EAApBiW,gBAER,OACE,0BAAM/P,UAAW1D,EAAQyX,eACvB,kBAAC,IAAD,CAAa5T,MAAO,CAAEhF,MAAO2I,IAAWqC,OAAQ,GAAI5B,MAAO,MAC3D,0BAAMpE,MAAO,CAAEuF,WAAY,IAAMqK,EAAgBiE,gBAM5C1I,EAAWd,aAAuB,SAAC1Q,GAC9C,IAAMwC,EAAUsM,cACRyC,EAA4DvR,EAA5DuR,MAA4B0E,GAAgCjW,EAArD8X,OAAqD9X,EAA7C2P,YAA6C3P,EAAhCiW,iBAAiB9Q,EAAenF,EAAfmF,WAE/CwM,EAA4B,YAAlBJ,EAAM7K,QAEhB6M,EAAanO,yBAAemM,EAAM4I,cAClCC,EAAYhV,yBAAemM,EAAM6I,WAEjCpD,EAAUqD,6BAAmB9I,EAAMyF,SAEnCxT,EAAOmU,0BAAgBpG,EAAMqG,OAI7B0C,EAAY9W,GAAQ,kBAACiU,EAAD,MAE1B,OACE,oCACE,kBAACxH,EAAD,CACEiH,UAAW1T,EACXmT,WACMnT,GAAQ2B,EACHA,EAAWyR,mBAGhBpT,EACKyS,EAAgBW,wBADzB,EAIF1G,KACE,kBAAC6H,EAAA,EAAD,KACE,yBAAK7R,UAAW1D,EAAQ2N,aACtB,6BACE,kBAACuB,EAAD,CAAWC,QAASA,GAAUJ,EAAMK,YAEtC,yBAAKvL,MAAO,CAAEC,KAAM,EAAG4E,YAAa,IAClC,kBAAC4L,EAAD,CAAepW,MAAOsW,EAAShI,MAAOuE,OAK9CnC,MACMkJ,GAAanV,EAEb,yBAAKkB,MAAO,CAAEC,KAAM,EAAGI,QAAS,OAAQkF,WAAY,KACf,YAAlCzG,EAAWyR,oBACV,kBAAC,IAAD,CACEvQ,MAAO,CAAES,YAAa,GACtBsJ,SAAUgK,GAAaA,EAAU/J,OAGrC,kBAAC+D,EAAA,EAAD,CACE7N,QAAQ,UACRL,UAAW1D,EAAQ2C,WACnBkB,MAAO,CACLuF,WACoC,YAAlCzG,EAAWyR,mBAAmC,GAAK,IALzD,IAQIzR,EAAWyR,mBARf,MAaF0D,IAIA/G,EAEA,kBAAC,EAAD,CAAsBnD,SAAUgK,GAAaA,EAAU/J,YAF3D,KAQJ,kBAACwB,EAAD,CAAWnR,MAAOsW,EAAShI,MAAOuE,QAIxC/B,EAASkG,YAAc,wBAEhB,IAAMe,EAAU/H,aAAuB,SAAC1Q,GAC7C,IAAMwC,EAAUsM,cAEdyJ,EAMEvY,EANFuY,KAGAL,GAGElY,EALF2P,YAKE3P,EAJF0Y,OAIE1Y,EAHFkY,QACAjC,EAEEjW,EAFFiW,gBACA9Q,EACEnF,EADFmF,WAGIoV,EAAmBhC,EAAK4B,aACxBK,EAAgBpV,yBAAemT,EAAKkC,cACpCjX,EAAOmU,0BAAgBY,EAAKX,OAE5B0C,EAAY9W,GAAQ,kBAACiU,EAAD,MAE1B,OACE,oCACE,kBAACxH,EAAD,CACEiH,UAAW1T,EACXmT,WACMnT,GAAQ2B,EACHA,EAAWyR,mBAGhBpT,EACKyS,EAAgBW,wBADzB,EAIF1G,KACuB,WAAjBqI,EAAK7R,QAEL,kBAACqR,EAAA,EAAD,KACE,kBAAC,IAAD,CAAoB2C,SAAUxC,KAMlC,kBAACH,EAAA,EAAD,KACE,yBAAK7R,UAAW1D,EAAQ2N,aACtB,kBAACyI,EAAD,KAAcL,EAAKC,OACnB,yBAAKnS,MAAO,CAAEC,KAAM,EAAG4E,YAAa,IAClC,kBAAC4L,EAAD,CACEpW,MAAOqW,kBAAQwB,EAAKvB,SACpBhI,MAAOuL,OAOnBnJ,MACMkJ,GAAanV,EAEb,yBAAKkB,MAAO,CAAEC,KAAM,EAAGI,QAAS,OAAQkF,WAAY,KACf,YAAlCzG,EAAWyR,oBACV,kBAAC,IAAD,CACEvQ,MAAO,CAAES,YAAa,GACtBsJ,SAAUoK,EAAcnK,OAG5B,kBAAC+D,EAAA,EAAD,CACE7N,QAAQ,UACRL,UAAW1D,EAAQ2C,WACnBkB,MAAO,CACLuF,WACoC,YAAlCzG,EAAWyR,mBAAmC,GAAK,IALzD,IAQIzR,EAAWyR,mBARf,MAaF0D,IAGAE,EAEA,kBAAC,EAAD,CACEpK,SAAUoK,EAAcnK,YAH9B,KASc,WAAjBkI,EAAK7R,SACJ,kBAACmL,EAAD,CAAWnR,MAAOqW,kBAAQwB,EAAKvB,SAAUhI,MAAOuL,QC3lBxD,kCAMA,IAAM9X,EAAYoI,aAAW,SAAA9J,GAAK,MAAK,CACrC+J,KAAM,CACJL,MAAO,YAKI,SAASkQ,EAAe3a,GAAQ,IACtCsJ,EAA2DtJ,EAA3DsJ,QAAS2M,EAAkDjW,EAAlDiW,gBAAiB9Q,EAAiCnF,EAAjCmF,WAAYyF,EAAqB5K,EAArB4K,YAAapH,EAAQxD,EAARwD,KAIpDwL,GAHUvM,IAEE6G,EAAQyF,OACZ3J,yBAAekE,EAAQ2F,eAErC,OACE,kBAAC,IAAD,CAAkBD,MAAO1F,EAAS9F,KAAMA,EAAMyS,gBAAiBA,EAAiB9Q,WAAYA,EAAYyF,YAAaA,GACnH,kBAAC,EAAD,CAAYoE,MAAOA,O,iWCFnBvM,EAAYoI,aAAW,SAAC9J,GAAD,MAAY,CACvC6Z,WAAY,CACVxP,SAAU,SACVC,IAAK,EACLC,OAAQ,IACR5E,QAAS,OACTyE,eAAgB,SAChBxE,cAAe,MACfkU,WAAW,aAAD,OAAeC,KACzBnQ,WAAY,UAEdoQ,UAAW,CACTtZ,SAAU,GACVkK,WAAY,IACZT,YAAa,IAEf8P,kBAAmB,CACjBtU,QAAS,OACTiE,WAAY,SACZhE,cAAe,MACf+D,aAAc,IAEhBuQ,SAAU,CACRvU,QAAS,OACTC,cAAe,SACfgE,WAAY,WACZO,YAAa,OAIJgQ,EAAb,4MACEC,MAAQ,CACNC,cAAc,EACdC,aAAc,MAHlB,EAMEC,gBAAkB,SAACD,GAAD,OAChB,EAAKE,SAAS,CAAEF,eAAcD,cAAc,KAPhD,EASEI,OAAS,SAAC9a,GAAD,OAAW,EAAK6a,SAAS,CAAEH,aAAc1a,KATpD,EAWE+a,sBAAwB,SAAC9T,EAAWC,EAAWC,GAC7C,OACGlE,kBAAgB+X,iBAAiB,EAAK1b,MAAM4X,MAAOjQ,EAAUiQ,QAC9D,EAAKuD,MAAMC,eAAiBxT,EAAUwT,eACrC,EAAKD,MAAME,cACZ1T,EAAUgU,MAAQ,EAAK3b,MAAM2b,KAhBnC,EAoBEC,mBAAqB,SAACC,EAAWC,EAAWC,GACV,IAA5B,EAAK/b,MAAM4X,MAAMrX,OAOjB,EAAK4a,MAAME,cAEV1X,kBAAgBqY,aAAa,EAAKhc,MAAM4X,MAAO,EAAKuD,MAAME,eAM7D,EAAKC,gBAAgB,EAAKtb,MAAM4X,MAAM,IAdlC,EAAKuD,MAAME,cACb,EAAKE,SAAS,CAAEF,aAAc,QAvBtC,EA4CEY,OAAS,WAAO,IAAD,EACgB,EAAKjc,MAA1B4X,EADK,EACLA,MAAOtV,EADF,EACEA,UACT4Z,EAAYtE,EAAMrX,OAFX,EAG0B,EAAK4a,MAApCC,EAHK,EAGLA,aAAcC,EAHT,EAGSA,aAEtB,GAAkB,IAAda,IAAoBb,EACtB,OAAO,KAGT,IAAMrb,EAAQ,CACZqb,eACAC,gBAAiB,EAAKA,gBACtB1D,QACAsE,YACAd,eACAI,OAAQ,EAAKA,QAEf,OACE,yBAAK9V,IAAK,EAAK1F,MAAM2b,KACnB,kBAAC,EAAW3b,GACZ,kBAACmc,EAAA,EAAD,eACE7Z,UAAWA,EACXoD,IAAK2V,EAAa7X,KAAKoB,YACnB,CAAEyW,eAAcC,gBAAiB,EAAKA,qBAnEpD,kEAyCIvb,KAAKub,gBAAgBvb,KAAKC,MAAM4X,MAAM,QAzC1C,GAAgChX,IAAMoH,WA0EhCoU,EAAS,SAAC,GAOT,IANLhB,EAMI,EANJA,aACAxD,EAKI,EALJA,MACA0D,EAII,EAJJA,gBACAD,EAGI,EAHJA,aACAa,EAEI,EAFJA,UACAV,EACI,EADJA,OAEMhZ,EAAUC,IAEhB,OACE,kBAAC4Z,EAAA,EAAD,CAAMnW,UAAW1D,EAAQoY,WAAYxU,UAAW,GAC9C,yBAAKC,MAAO,CAAEC,KAAM,KAChB8U,GAAgBC,GAChB,kBAAC,EAAD,CAAUiB,QAAQ,EAAO9Y,KAAM6X,IAEjC,kBAACkB,EAAA,EAAD,CAAUhM,GAAI6K,EAAcoB,QAAS,GACnC,kBAACpI,EAAA,EAAD,CACE7N,QAAQ,YACRF,MAAO,CAAE6E,YAAa,GAAIK,WAAY,KAFxC,2BAMA,kBAACkR,EAAA,EAAD,KACG7E,EAAMvT,KAAI,SAACb,GAAD,OACT,kBAAC,EAAD,CACEkC,IAAKlC,EAAKA,KAAKoB,WACf0W,gBAAiBA,EACjBE,OAAQA,EACRhY,KAAMA,EACN8Y,QAAQ,WAMhBlB,GACA,yBAAKlV,UAAW1D,EAAQwY,mBACtB,kBAAC5G,EAAA,EAAD,CACE7N,QAAQ,WACRF,MAAO,CAAEhF,MAAOwF,IAAaC,YAAa,KAEzCoV,EAJH,UAMA,kBAAC,IAAD,CAAazV,MAAM,iBACjB,kBAACiW,EAAA,EAAD,CACErb,MAAM,UACN4F,SAAUiV,GAAa,EACvB9U,QAAS,kBAAMoU,GAAO,KAEtB,kBAAC,IAAD,WASRmB,EAAW,SAAC,GAA+C,IAA7CnZ,EAA4C,EAA5CA,KAAM8Y,EAAsC,EAAtCA,OAAQhB,EAA8B,EAA9BA,gBAC1BnJ,GADwD,EAAbqJ,OAC7BoB,YAAmBpZ,IACjChB,EAAUC,IAEhB,OACE,kBAACoa,EAAA,EAAD,CACEP,OAAQA,EACRpW,UAAW1D,EAAQyY,SACnB7T,QAAS,WACPkU,EAAgB9X,KAGjB2O,GACC,yBAAK9L,MAAO,CAAEK,QAAS,OAAQC,cAAe,MAAOuE,YAAa,IAC/DoR,GAAU,yBAAKjW,MAAO,CAAES,YAAa,IAAM,YAC5C,kBAACgW,EAAA,EAAD,CAAUC,KAAM5K,EAAY6K,UAAWvb,SAAU,Q,4JC5KrDwb,GAAarc,IAAMsc,YAAW,SAAoBld,EAAO6V,GAC7D,OAAO,kBAACsH,GAAA,EAAD,eAAOC,UAAU,KAAKvH,IAAKA,GAAS7V,OAG9B,SAASqd,GAAerd,GAAQ,IACrCsd,EAAyCtd,EAAzCsd,KAAMC,EAAmCvd,EAAnCud,MAAOC,EAA4Bxd,EAA5Bwd,aAAclb,EAActC,EAAdsC,UADS,EAEFU,mBAAS,IAFP,mBAErCya,EAFqC,KAEtBC,EAFsB,OAGhB1a,oBAAS,GAHO,mBAGrC2a,EAHqC,KAG7BC,EAH6B,KAKpCC,EAAwBlb,qBAAWmb,IAAnCD,oBACAE,EAAiBpb,qBAAWqb,IAA5BD,aACAE,EAAgBC,cAAhBD,YACAE,EAAUxb,qBAAWC,KAArBub,MACFC,EAAUC,cAEVC,EAAUC,cAX4B,EAaoB5b,qBAC9DqP,KADMwM,EAboC,EAapCA,kBAAmBve,EAbiB,EAajBA,MAAOwe,EAbU,EAaVA,gBAAiBC,EAbP,EAaOA,SAO7CC,EAAM,uCAAG,sCAAAza,EAAA,6DACP0a,EAAgBJ,EAAkBK,QAAQ5e,GADnC,EAKT6e,cAAYC,IAAIC,SAASC,SAASC,IAAIC,SAFxCC,EAHW,EAGXA,iBACAC,EAJW,EAIXA,eAEIC,EAAUC,QACVC,EAAcC,GAClBb,EACA3e,EACAye,EACAD,IAEUiB,cACVza,aAAW0a,gBAAgB,CAACP,EAAiBE,EAAS7B,MAExDI,EAAoB+B,SAAQ,SAACza,GAC3Bqa,EAAYE,cAAcza,aAAW4a,YAAY1a,EAAW2a,cAE9DN,EAAYE,cACVza,aAAW0a,gBAAgB,CAACN,EAAeC,MApBhC,SAsBPrB,EAAY8B,WAAWnB,EAAe3e,GAtB/B,OAwBbqe,EAAQle,KAAR,UAAgBge,EAAhB,kBAAiC9b,IAEjC0d,YAAW,WACT1a,aAAM,gCAAiC,CACrC2a,QAASxC,EACTnb,YACA4d,YAAarC,EAAoBtd,WAElC,KAhCU,4CAAH,qDAmCZqI,qBAAU,WACR,IAAMuX,EAAmBtC,EACtBxZ,KAAI,SAACX,GAAD,kBAAYA,EAAE0c,oBAClBvI,KAAK,MACR6F,EAAiB,iBAAD,OAAkByC,MACjC,CAAC7C,EAAMO,EAAoBtd,OAAQwd,EAAaxd,SAEnD,IAAM8f,EAAW,SAACC,GAAD,OAAuC,IAAtBA,EAAW/f,OAAe,IAAM,IAG5DggB,EAAa1C,EAAoBtd,OAAS,EAEhD,OACE,kBAACigB,EAAA,EAAD,CACElD,KAAMA,EACNmD,oBAAqBxD,GACrByD,aAAW,EACXC,QAASpD,GAET,kBAACqD,GAAA,EAAD,KAAc,uCACd,kBAACC,EAAA,EAAD,KACE,kBAACC,GAAA,EAAD,0BACqBjD,EAAoBtd,OADzC,cAEG8f,EAASxC,GAFZ,iBAEgDE,EAAaxd,OAAQ,IAFrE,OAGO8f,EAAStC,GACbwC,GACC,kBAACQ,GAAA,EAAD,CACE9N,WAAS,EACT9L,MAAM,kBACNd,MAAO,CAAEO,UAAW,IACpBlG,MAAO+c,EACPzK,WAAS,EACTD,WAAS,EACTiO,QAAS,SAAC1gB,GAAD,OAAOA,EAAE2gB,cAAcC,kBAAkB,EAAG,IACrDrd,SAAU,SAACvD,GAAD,OAAOod,EAAiBpd,EAAEwD,OAAOpD,aAKjD6f,GACA,kBAACY,EAAA,EAAD,KACE,kBAACxN,EAAA,EAAD,CAAQ3M,KAAK,QAAQI,QA/EV,WACjBkX,EAAQle,KAAR,UAAgBge,EAAhB,kBAAiC9b,MA8E3B,sBAKHqb,GAAU,kBAACyD,GAAA,EAAD,CAAgB7a,QAAQ,kBAClCga,IAAe5C,GACd,kBAACwD,EAAA,EAAD,KACG3D,EACC,kBAAC7J,EAAA,EAAD,CAAQ3M,KAAK,QAAQI,QAAS+W,EAAO9c,MAAM,WAA3C,SAIA,kBAACsS,EAAA,EAAD,CAAQ3M,KAAK,QAAQI,QAASmW,EAAOlc,MAAM,WAA3C,SAIF,kBAACsS,EAAA,EAAD,CACE3M,KAAK,QACLT,QAAQ,YACRa,QAAO,sBAAE,sBAAAlD,EAAA,6DACP0Z,GAAU,GADH,SAEDe,IAFC,2CAITtd,MAAM,WAPR,oBAiBV,SAASoe,GAAgB4B,EAAYphB,EAAOye,EAAUD,GACpD,MAAO,CACLiB,cADK,SACSI,GACZ,IACE,IAAMR,EAAUC,OACV+B,EAAiB,IAAIC,oBACzB7C,EACAD,EACAa,GAEFkC,SAAOC,aAAaJ,EAAYphB,EAAO6f,EAAUwB,GACjD,MAAOhhB,GACPwH,QAAQ4Z,MAAMphB,MCvIf,SAASqhB,GAAe3hB,GAAQ,IAC7BsC,EAA8BtC,EAA9BsC,UAAWsf,EAAmB5hB,EAAnB4hB,OAAQC,EAAW7hB,EAAX6hB,OACrBrf,EAAUC,KAFoB,EAINE,qBAAWqP,KAAjC/R,EAJ4B,EAI5BA,MAAO6hB,EAJqB,EAIrBA,WACP3D,EAAUxb,qBAAWC,KAArBub,MACAN,EAAwBlb,qBAAWmb,IAAnCD,oBACFkE,EAAWD,EAAWE,aAAa/hB,GAEjCgiB,EAAuBtf,qBAAWuf,KAAlCD,mBAT4B,EAUQtf,qBAAWC,KAA/Cuf,EAV4B,EAU5BA,qBAAsBC,EAVM,EAUNA,UAVM,EAYApf,mBAAS,MAZT,mBAY7Bqf,EAZ6B,KAYjBC,EAZiB,OAaItf,oBAAS,GAbb,mBAa7Buf,EAb6B,KAafC,EAbe,KAe5BngB,EAAeM,qBAAWqb,IAA1B3b,WAEF0D,EAAU0c,mBAAiBC,2BAC/BP,EACAJ,EACAH,EACAC,GAGFjZ,qBAAU,WACR,IAAKyZ,EAAY,CACf,IAAMM,EAAyBvd,yBAC7BW,EAAQ4c,wBAGJC,EAA0Bxd,yBAC9BW,EAAQ6c,yBAGN7c,EAAQ8c,gBAAkB,EAC5BP,EArCuB,eAsCdK,EACTL,EAAcK,GACLC,GACTN,EAAcM,OAKpB,IAAME,EAAkBxR,mBAASvL,EAAQgd,aAAjBzR,EAA+B,SAAC5N,GACtD,OACE,kBAAC+I,EAAA,EAAD,CACEtF,MAAO/B,yBAAe1B,EAAEoG,cAAgB,UACxC7C,SAAsB,IAAZvD,EAAE0G,MACZ1J,MAAOgD,EAAEyU,GACT/N,MAAO1G,EAAE0G,WAKT4Y,EAAmB1R,mBAASvL,EAAQkd,cAAjB3R,EAAgC,SAAC5N,GAExD,MAAO,CACL,kBAAC0Q,EAAA,EAAD,CAAY7N,QAAQ,WAAWL,UAAW1D,EAAQ0gB,eAC/Cxf,EAAEqG,WADL,kBAGAuH,mBAAS5N,EAAEqC,QAAXuL,EAAoB,SAAC9Q,GACnB,OACE,kBAACiM,EAAA,EAAD,CACEtF,MAAO/B,yBAAe5E,EAAEsJ,cAAgB,UACxCpJ,MAAOF,EAAE2X,GACTlR,SAAsB,IAAZzG,EAAE4J,MACZA,MAAO5J,EAAE4J,WAIf,kBAAC,IAAD,CAAY/D,MAAO,CAAEO,UAAW,GAAIa,aAAc,UAUtD,OANAmB,qBAAU,YACJ2Z,GAAiBH,GAAarc,EAAQod,QACxC7d,aAAM,4BAEP,CAACid,EAAcH,EAAWrc,EAAQod,QAGnC,yBAAKjd,UAAW1D,EAAQ4gB,WACtB,yBAAKld,UAAW1D,EAAQ6gB,qBACtB,yBAAKnd,UAAW1D,EAAQ8gB,SACtB,yBAAKpd,UAAW1D,EAAQ2D,QACtB,kBAACiO,EAAA,EAAD,CAAY7N,QAAQ,YAAYL,UAAW1D,EAAQiE,OAChDwb,EAAmBsB,iBAAmB,oBAEzC,kBAACC,EAAA,EAAD,CACE5B,OAAQK,EAAmBwB,WAC3BC,KAAMzB,EAAmB0B,YAI7B,kBAAC,IAAD,MAEA,yBAAKzd,UAAW1D,EAAQohB,gBACtB,kBAACxP,EAAA,EAAD,CAAY7N,QAAQ,UAAUL,UAAW1D,EAAQqhB,kBAC9ChG,EAAoBtd,OADvB,aAGA,yBAAK8F,MAAO,CAAEC,KAAM,KACpB,kBAACqN,EAAA,EAAD,CACE3M,KAAK,QACL3F,MAAM,UACN+F,QAAS+W,EACT3b,QAAS,CAAEsI,KAAMtI,EAAQshB,cAJ3B,SAQA,kBAACnQ,EAAA,EAAD,CACE3M,KAAK,QACL3F,MAAM,UACN+F,QAAS,kBAAMob,GAAgB,IAC/BhgB,QAAS,CAAEsI,KAAMtI,EAAQshB,cAJ3B,WAUF,kBAAC,IAAD,MAEA,yBAAK5d,UAAW1D,EAAQuhB,WACtB,kBAACC,EAAA,EAAD,CACEC,YAAY,WACZ/d,UAAW1D,EAAQ0hB,KACnBrgB,SAAU,SAACsgB,EAAGzjB,GACRA,IAAU2hB,GACZC,EAAc5hB,IAGlBA,MAAO2hB,GAEP,kBAAC5V,EAAA,EAAD,CACEtF,MAAK,UACLzG,MAAO,KACP2F,MAAO,CAAEK,QAAS,UAEpB,kBAAC+F,EAAA,EAAD,CACEtF,MAAK,qBACLzG,MA9Ie,cA+If0J,MAAOrE,EAAQ8c,gBACf5b,UAAWlB,EAAQ8c,gBACnBxc,MAAO,CAAEoB,aAAc,MAGxBqb,EAAgBviB,OAAS,GACxB,kBAAC6T,EAAA,EAAD,CACE7N,QAAQ,WACRL,UAAW1D,EAAQ0gB,eAFrB,sBAQDJ,EAEAA,EAAgBviB,OAAS,GACxB,kBAAC,IAAD,CAAY8F,MAAO,CAAEO,UAAW,GAAIa,aAAc,MAGnDub,IAGL,kBAAC,IAAD,QAGJ,yBAAK9c,UAAW1D,EAAQ4hB,eACtB,yBAAKle,UAAW1D,EAAQ6hB,SACpBhC,IAAeD,GAAa,kBAAC,IAAD,CAAalV,MAAM,IA3K5B,gBA6KpBmV,GACC,kBAAC,IAAD,CACEhgB,WAAYA,EACZC,UAAWA,EACXC,WAAYsf,EAASD,EACrBxf,WAAY6C,aAAWqf,aAAave,EAAQ3D,cAI/CigB,GAtLoB,gBAsLNA,GACb,kBAAC,EAAD,CACE/f,UAAWA,EACXoD,IAAK2c,EACLzK,MAAO3S,aAAWqf,aAChBve,EAAQwe,eAAelC,IAEzBD,UAAWA,EACXzG,IAAK0G,MAKb,kBAAChF,GAAD,CACE/a,UAAWA,EACXgb,KAAMiF,GAAiBH,GAAarc,EAAQod,MAC5C3F,aAAczX,EAAQod,OAASf,EAC/B7E,MAAO,kBAAMiF,GAAgB,OAMrC,IAAM/f,GAAYoI,aAAW,SAAC9J,GAAD,MAAY,CACvCqiB,UAAW,CACT1c,QAAS,OACT2F,OAAQ,QACRH,SAAU,UAEZmX,oBAAqB,CACnB5Y,MAAO,IACPyB,SAAU,SACVxF,QAAS,QAEX0d,cAAe,CACblY,SAAU,SACVG,OAAQ,QACRlB,eAAgB,SAChBqZ,SAAU,GAEZlB,QAAS,CACPkB,SAAU,EACVpZ,SAAU,QACVX,MAAO,UACP4B,OAAQ,QACRoY,UAAW,SACX/d,QAAS,OACTC,cAAe,SACf+d,YAAY,aAAD,OAAe3jB,EAAMG,QAAQyjB,KAAK,MAC7CC,WAAY7jB,EAAMG,QAAQyjB,KAAK,KAC/BrZ,OAAQ,KAEVuZ,MAAO,CACLjZ,WAAY,IAEdmY,UAAW,CACTxY,WAAY,GACZiZ,SAAU,EACVM,WAAY,EACZ5Y,SAAU,UAEZgY,KAAM,CACJtY,WAAY7K,EAAM+L,QAAQ,IAE5BiY,OAAQ,CACNre,QAAS,OACTC,cAAe,SACfiF,WAAY7K,EAAM+L,QAAQ,IAE5BuX,OAAQ,CACN/d,KAAM,EACN9E,SAAU,KACV0J,YAAa,GACbR,aAAc,GACda,WAAY,GACZE,cAAe,IACfoC,OAAQ,UAEVmX,aAAc,CACZte,QAAS,OACTC,cAAe,MACfgE,WAAY,WACZO,YAAanK,EAAM+L,QAAQ,IAE7BmY,cAAe,CACb/Z,YAAanK,EAAM+L,QAAQ,GAC3BzL,MAAOwF,IACPP,KAAM,GAER4e,gBAAiB,CACf7Y,OAAQ,EACR5B,MAAO,QAETtE,OAAQ,CACNO,QAAS,OACTC,cAAe,SACfwe,WAAY,EACZ1a,MAAO,OACPE,WAAY,OACZQ,eAAgB,SAChBM,cAAe,EACfoC,OAAQ9M,EAAM+L,QAAQ,IAExBsY,YAAa,CACXla,YAAa,GACbR,aAAc,IAEhB2a,YAAa,CACXze,UAAW7F,EAAM+L,QAAQ,IAE3BwY,MAAO,CACL1e,UAAW,GACX6E,cAAe,GACfd,WAAY,SACZjE,QAAS,OACTyE,eAAgB,SAChBxE,cAAe,OAEjB4e,QAAS,CACP9Z,cAAe,GACfd,WAAY,SACZjE,QAAS,OACTyE,eAAgB,SAChBxE,cAAe,OAEjB6e,cAAe,CACb9e,QAAS,OACTC,cAAe,UAEjBoK,IAAK,CACHtJ,aAAc,IAEhBR,SAAU,CACRgE,cAAe,OACfD,QAAS,IAEX8I,MAAO,CACLrM,aAAc,IAEhBge,cAAe,CACb/e,QAAS,OACT2F,OAAQ,QACRnB,YAAa,GACbR,aAAc,GACd/D,cAAe,MACfuF,SAAU,SACVsY,SAAU,EACVW,WAAY,EACZha,eAAgB,UAElBua,YAAa,CACXpf,KAAM,EACN5E,QAAS,iBACTF,SAAU,MAEZ0hB,cAAe,CACbvX,WAAY,IACZlK,SAAU,GACVJ,MAAOwF,KAET8e,IAAK,CACHva,SAAU,QACVuK,OAAQ,GACRvE,MAAO,IAETwU,SAAU,CACRlb,aAAc,GAEhBjE,MAAO,CACLhF,SAAU,GACVC,QAAS,EACTiL,UAAW,OACXlF,aAAc,GAEhBmc,eAAgB,CACdld,QAAS,OACTwE,YAAa,GACbK,WAAY,EACZE,cAAe,EACff,aAAc,EACd/D,cAAe,MACfgE,WAAY,UAEdkZ,iBAAkB,CAChBpiB,SAAU,GACVJ,MAAOwF,KAETid,YAAa,CACXriB,SAAU,GACVC,QAAS,EACTgL,SAAU,Q,gHCxXeoS,cAAYC,IAAIC,SAA/B/Z,I,GAANzB,K,GAAMyB,YACR4gB,GAAa5gB,KA8BZ,IAAM6Y,GAAqBld,IAAMklB,cAAc,MAEtD,SAASC,GAAT,GAAyC,IAAbplB,EAAY,EAAZA,SAAY,EACgBC,IAAMoC,SAAS,IAD/B,mBAC/B6a,EAD+B,KACVmI,EADU,KAOhCC,EAAU,CACdpI,sBACAmI,yBACAE,cAPoB,WACpBF,EAAuB,MAQzB,OACE,kBAAClI,GAAmBrd,SAApB,CAA6BC,MAAOulB,GACjCtlB,GAKA,IAAMqd,GAAoBpd,IAAMklB,cAAc,MAE9C,SAASK,GAAT,GAAwC,IAAbxlB,EAAY,EAAZA,SAAY,EACJC,IAAMoC,SAAS,IADX,mBACrC+a,EADqC,KACvBqI,EADuB,KAQtCH,EAAU,CACd5jB,WANiB,WAAe,IAAD,uBAAVuV,EAAU,yBAAVA,EAAU,gBAC/BwO,EAAgB,GAAD,mBAAKrI,GAAiBnG,KAMrCmG,eACAsI,aALmB,kBAAMD,EAAgB,MAO3C,OACE,kBAACpI,GAAkBvd,SAAnB,CAA4BC,MAAOulB,GAChCtlB,GAKP,SAAS2lB,GAAQC,EAAKC,GACpB,MAAM,GAAN,mBAAWD,GAAX,YAAmBC,IAGrB,IAAMC,GAAmB,SAAUzmB,GAAQ,IACjC0mB,EAAkC1mB,EAAlC0mB,UAAoBpkB,GAActC,EAAvB2mB,QAAuB3mB,EAAdsC,WACpB3B,EAAaX,EAAbW,SAFgC,EAQpCkC,cAJF+jB,EAJsC,EAItCA,cACAC,EALsC,EAKtCA,0BACAC,EANsC,EAMtCA,OACA1E,EAPsC,EAOtCA,UAGA4D,EAQEhmB,EARFgmB,uBAEAnI,GAME7d,EAPFsb,gBAOEtb,EANF6d,qBACAE,EAKE/d,EALF+d,aACAsI,EAIErmB,EAJFqmB,aACAH,EAGElmB,EAHFkmB,cACArE,EAEE7hB,EAFF6hB,OACAD,EACE5hB,EADF4hB,OAGF,GAAI8E,EACF,OAAO,KAGT,IAAMvE,EAAuBM,mBAAiBsE,sBAC5ClB,GAAWmB,aAAaJ,GACxB/E,EACAD,EACAiE,GAAWmB,aAAajJ,IAG1B,OACE,kBAACnb,EAAA,EAAD,CACEkkB,OAAQA,EACR3E,qBAAsBA,EACtBC,UAAWA,EACXjE,MAAO,WACL0I,EAA0B,IAC1BR,IACAH,IACA5gB,aAAM,aAAc,CAClBhD,eAGJI,iBAAkB,WAAqB,IAAD,uBAAhBwd,EAAgB,yBAAhBA,EAAgB,gBACpC,GAAIA,EAAa,CACf,IAAM+G,EAAkB,sBAAOpJ,GAAwBqC,GACvD8F,EAAuBiB,GACvB,IAAMC,EAAoBD,EACvB5iB,KAAI,SAACyQ,GAAD,OAAO+Q,GAAWvB,aAAaxP,EAAEgL,aACrCqH,OAAOb,GAAS,IACnBO,EAA0BK,GAC1BhH,EAAY7b,KAAI,SAACX,GACf4B,aAAM,oBAAqB,CACzBhD,YACA6C,WAAYzB,EAAE0jB,cAKtBvJ,oBAAqBA,GAEpBld,IAMD0mB,G,uKAEF,IAAMxB,EAAa5gB,KADZ,EAUHlF,KAAKC,MAPPsC,EAHK,EAGLA,UACAglB,EAJK,EAILA,SACArnB,EALK,EAKLA,MACAohB,EANK,EAMLA,WACA1gB,EAPK,EAOLA,SACAkhB,EARK,EAQLA,OACAD,EATK,EASLA,OAEF,OAEE,kBAACmE,GAAD,KACE,kBAAC/H,GAAkBuJ,SAAnB,MACG,gBAAGxJ,EAAH,EAAGA,aAAcsI,EAAjB,EAAiBA,aAAjB,OACC,kBAACvI,GAAmByJ,SAApB,MACG,SAACC,GAAwB,IAEtB3J,EAGE2J,EAHF3J,oBACAmI,EAEEwB,EAFFxB,uBACAE,EACEsB,EADFtB,cAEIgB,EAAoBrJ,EACvBxZ,KAAI,SAACyQ,GAAD,OAAO+Q,EAAWvB,aAAaxP,EAAEgL,aACrCqH,OAAOb,GAAS,IACnB,OACE,kBAACmB,EAAA,EAAD,CACExnB,MAAOA,EACPohB,WAAYA,EAAWxC,QAAQ5e,GAC/B6f,SAAUoH,EACVQ,gBAAgB,GAEhB,kBAACC,EAAA,EAAD,eACErlB,UAAWA,EACXuf,OAAQA,EACRD,OAAQA,EACR7D,aAAcA,GACVuJ,GAEJ,kBAAC,GAAD,CACEzF,OAAQA,EACRD,OAAQA,EACRtf,UAAWA,EACXyb,aAAcA,EACdsI,aAAcA,EACdH,cAAeA,EACfF,uBAAwBA,EACxBnI,oBAAqBA,GAEpBld,gB,GAnDkBC,IAAMoH,WAiE3C4f,GAA8BC,IAAQC,IAARD,CAClCR,IAGaQ,QAAQE,IAARF,EApNf,SAAqB7nB,GAAQ,IACnBgoB,EAAcrlB,qBAAWslB,KAAzBD,UACF5J,EAAUC,cACViJ,EAAWpJ,cAHS,EAKYle,EAAMkoB,MAAMC,OAA1CtG,EALkB,EAKlBA,OAAQD,EALU,EAKVA,OAAQtf,EALE,EAKFA,UAExB,OACE,kBAACslB,GAAD,CACEI,UAAWA,EACX1lB,UAAWA,EACXuf,OAAQA,EACRD,OAAQA,EACR0F,SAAUA,GAEV,kBAAC,IAAD,CACEzF,OAAQA,EACRD,OAAQA,EACRwG,iBAAiB,EACjBC,SAAU,kBAAC,IAAD,CAAUC,GAAE,UAAKlK,EAAL,aAGtB,kBAACuD,GAAD,CAAgBrf,UAAWA,EAAWuf,OAAQA,EAAQD,OAAQA,U,yJCpChE2G,E,uKACM,IAAD,EACgExoB,KAAKC,MAArEwC,EADA,EACAA,QAAS0D,EADT,EACSA,UAAWsiB,EADpB,EACoBA,eAAgBC,EADpC,EACoCA,cAAgB9nB,EADpD,EACoDA,SAC3D,OACE,yBAAKuF,UAAWwiB,IAAWlmB,EAAQsI,KAAM5E,IACvC,yBAAKA,UAAW1D,EAAQmmB,YAAatiB,MAAO,CAAC7E,SAAUgnB,EAAgB/d,MAAO,SAAU9J,GACxF,yBAAKuF,UAAW1D,EAAQomB,SACxB,yBAAK1iB,UAAW1D,EAAQ4O,OAAQqX,Q,GAPV7nB,IAAMoH,WAarBlH,OA9BA,SAAAC,GAAK,MAAK,CACvB+J,KAAM,CACJpE,QAAS,OACTC,cAAe,OAEjBgiB,YAAa,GAGbC,OAAQ,CACNtiB,KAAM,GAER8K,MAAO,CACL1K,QAAS,OACTiE,WAAY,aAiBD7J,CAAmBynB,G,kFCpB9B/oB,YAAsB,MAFfqpB,E,EAATnpB,QACaopB,E,EAAbnpB,YAGIopB,E,4MAEJ5N,MAAQ,CACN6N,mBAAoB,KACpBC,mBAAoB,KACpBC,oBAAqB,M,uDAGb,IAAD,OACDjD,EAAU,CACdkD,sBAAuB,SAAC7oB,GAAD,OAAO,EAAKib,SAAS,CAACyN,mBAAoB1oB,KACjE8oB,sBAAuB,SAAC9oB,GAAD,OAAO,EAAKib,SAAS,CAAC0N,mBAAoB3oB,KACjE+oB,uBAAwB,SAAC/oB,GAAD,OAAO,EAAKib,SAAS,CAAC2N,oBAAqB5oB,KACnE0oB,mBAAoBjpB,KAAKob,MAAM6N,mBAC/BC,mBAAoBlpB,KAAKob,MAAM8N,mBAC/BC,oBAAqBnpB,KAAKob,MAAM+N,qBAGlC,OACE,kBAACL,EAAmBpoB,SAApB,CAA6BC,MAAOulB,GACjClmB,KAAKC,MAAMW,c,GApBkBC,IAAMoH,WAgCtCshB,EAAoBxoB,IAAW,CACnCgK,KAAM,CAEJJ,aAAc,GACdgB,UAAW,WAEb6d,UAAW,CACT7iB,QAAS,OACTyE,eAAgB,SAChB9J,MAAO2I,IACP/I,gBAAiB,cACjB,UAAW,CACTwJ,MAAO,OACPxJ,gBAAiB+I,OAbGlJ,EAgBvB,SAAAd,GAAK,OAAI,kBAACgkB,EAAA,EAAD,iBAAUhkB,EAAV,CAAiBwpB,kBAAmB,CAAC7oB,SAAU,qCAErD8oB,EAAmB3oB,KAAW,SAAAC,GAClC,MAAQ,CACN+J,KAAM,CACJe,cAAe,OACfxK,MAAO,UACPK,QAAS,EACTkF,UAAW,EACXyF,OAAQ,GACRX,UAAW,UACXgB,SAAU,UACVf,WAAY,IACZlK,SAAUV,EAAMgL,WAAWC,QAAQ,IACnClF,YAAa/F,EAAM+L,QAAQ,GAC3B,UAAW,CACT9B,QAAS,OAdQlK,EAkBtB,SAAAd,GAAK,OAAI,kBAAC0pB,EAAA,EAAD,eAAK3c,eAAa,GAAK/M,OAkB7B2pB,E,kLAEiB,IAAD,EAC8I5pB,KAAKC,MAA9JwF,EADW,EACXA,UAAgC6jB,GADrB,EACAH,oBADA,EACqBG,wBAAwBD,EAD7C,EAC6CA,sBAAuBH,EADpE,EACoEA,mBAAoBD,EADxF,EACwFA,mBAAoBY,EAD5G,EAC4GA,QAAST,EADrH,EACqHA,sBACnI3jB,IAAcwjB,GAAsBY,EAAQC,aAAatpB,OAAS,GACpE4oB,EAAsBS,EAAQC,aAAa,KAExCrkB,IAAcyjB,GAAsBW,EAAQrpB,OAAS,IACxD6oB,EAAsBQ,EAAQ,GAAG7f,YACjCsf,EAAuBO,EAAQ,GAAGC,aAAa,O,+BAI1C,MAEmO9pB,KAAKC,MAAxOwC,EAFA,EAEAA,QAASonB,EAFT,EAESA,QAASnB,EAFlB,EAEkBA,cAAeqB,EAFjC,EAEiCA,kBAAmBtkB,EAFpD,EAEoDA,UAAWwjB,EAF/D,EAE+DA,mBAAoBE,EAFnF,EAEmFA,oBAAqBC,EAFxG,EAEwGA,sBAAuBE,EAF/H,EAE+HA,uBAAwBJ,EAFvJ,EAEuJA,mBAAoBG,EAF3K,EAE2KA,sBAAuBW,EAFlM,EAEkMA,eAAgBC,EAFlN,EAEkNA,cAEnNC,EAAiBzkB,EAAYwjB,EAAqBE,EAClDgB,EAAoB1kB,EAAY2jB,EAAwBE,EAExDc,EAAqB3kB,EAAaokB,EAAQC,cAAgB,IAC3DD,EAAQnmB,MAAK,SAAAC,GAAC,OAAIA,EAAEqG,aAAekf,MAAuB,IAAIY,cAAiB,GAE9ElpB,EAAW6E,EAAYwkB,EAAchB,GAAsBe,EAAed,EAAoBC,GAC9FkB,EAAeN,IAAsBtkB,EAAYskB,EAAkBd,GAAsBc,EAAkBb,EAAoBC,IAErI,GAAI1jB,GAA6C,IAAhCokB,EAAQC,aAAatpB,OACpC,OAAO,KAGT,IAAKiF,GAAgC,IAAnBokB,EAAQrpB,OACxB,OAAO,KAGT,IAAMmF,EAAG,UAAMukB,EAAN,YAAwBhB,EAAxB,YAA8CC,GAEvD,OACE,yBAAKhjB,UAAW1D,EAAQ4gB,UAAW1d,IAAKA,GACtC,kBAAC,EAAD,CAAiB+iB,cAAeA,GAC9B,yBAAKviB,UAAW1D,EAAQsI,MACtB,kBAACsJ,EAAA,EAAD,CAAY7N,QAAQ,KAAKlF,MAAM,WAAWmE,EAAY,UAAY,cAGrE4kB,EACD,yBAAKlkB,UAAW1D,EAAQsI,OACpBtF,GAAc,kBAAC8jB,EAAD,CACZzlB,SAAU,SAACvD,EAAG+pB,GAAJ,OAAiBjB,EAAsBiB,IACjD3pB,MAAOuoB,GACNW,EAAQvlB,KAAI,WAAemU,GAAf,IAAEzO,EAAF,EAAEA,WAAF,OACX,kBAAC0f,EAAD,CAAkBtiB,MAAO4C,EAAYrJ,MAAOqJ,QAKlD,yBAAK1D,MAAO,CAACC,KAAM,KAEnB,kBAACgjB,EAAD,CACE5oB,MAAOupB,EACPpmB,SAAU,SAACvD,EAAG+pB,GAAJ,OAAiBH,EAAkBG,KAC5CF,EAAmB9lB,KAAI,SAACyF,GAAD,OACrB,kBAAC2f,EAAD,CAAkBtiB,MAAO2C,EAAapJ,MAAOoJ,SAIpD,yBAAK5D,UAAW1D,EAAQyR,SACrBtT,Q,GAjEeC,IAAMoH,WAwEjB8gB,MAAuBhoB,KAvFvB,SAAAC,GAAK,MAAK,CACvBqiB,UAAW,CACT3b,aAAc,IAEhBqD,KAAM,CACJlE,UAAW,GACXF,QAAS,OACTJ,KAAM,GAER2N,QAAS,CACPvJ,aAAc,GACda,WAAY,OA4EsBzK,CAAmB6oB,K,gCC7KzD,2UAca7a,EAAuBjE,aAAW,SAAC9J,GAAD,MAAY,CACzD+J,KAAM,CACJS,WAAY,GACZE,cAAe,GACfxK,gBAAiB,UACjBmK,SAAU,YAEZkE,OAAQ,CACN/D,WAAY,GACZ3E,UAAW,GACX6E,cAAe,GACfxK,gBAAiB,WAEnB8P,IAAK,CACHrK,QAAS,OACThF,QAAS,EACTwJ,YAAa,EACbvE,cAAe,OAEjBqK,aAAc,CACZsC,OAAQ,UACR,UAAW,CACTrS,gBAAiB,oCAEnB,6BAA8B,CAC5ByF,QAAS,uBAIb0Q,WAAY,CACV3M,MAAO,OACPW,SAAU,QACV1E,QAAS,OACTyE,eAAgB,WAChBD,YAAa,EAEboI,OAAQ,UACRgX,UAAW,wCACXtf,QAAS,EAETuf,WAAY,UACZC,WAAY,wBAEZ,YAAa,CACXnf,IAAKtK,EAAM+L,QAAQ,IACnB9B,QAAS,GAEX,YAAa,CACX2K,OAAQ5U,EAAM+L,QAAQ,GACtB9B,QAAS,IAIb,0BAA2B,CACzB,KAAM,CACJyf,UAAW,oBAEb,MAAO,CACLA,UAAW,mBAEb,OAAQ,CACNA,UAAW,qBAIf7V,QAAS,GACTC,QAAS,GAETwC,eAAgB,CACdjM,SAAU,WACV1J,QAASX,EAAM+L,QAAQ,GAAK,GAC5BhG,YAAa,EACbqe,WAAY,EACZX,SAAU,EAEVkG,aAAc,IAGhBpT,oBAAqB,CACnBlM,SAAU,WACV8E,KAAM,MACNtE,YAAa,GACbnB,MAAO1J,EAAMgL,WAAWC,QAAQ,IAChCK,OAAQtL,EAAMgL,WAAWC,QAAQ,IACjCwY,SAAU,EACVW,WAAY,EACZwF,KAAM,UACN3f,QAAS,GAGXuM,wBAAyB,CACvB,aAAc,CACZ5B,QAAS,GACT3K,QAAS,IAIbwM,sBAAuB,CACrB,aAAc,CACZnM,KAAM,GACNL,QAAS,IAIb6H,iBAAkB,CAChBvM,KAAM,EACNqE,WAAY,SACZD,aAAc,GACdhE,QAAS,QAEXkK,gBAAiB,CACf3P,gBAAiB,oCAEnB2pB,KAAM,CACJC,WAAY,QAEd1lB,WAAY,CACV2lB,UAAW,SACXzpB,MAAO,QACPiF,KAAM,EACNqG,UAAW,QACXjC,aAAc,IAEhBqgB,WAAY,CACV1pB,MAAO,UACPI,SAAU,GACVyJ,YAAa,EACbR,aAAc,EACdzJ,gBAAiB,UACjBypB,aAAc,IAEhBM,QAAS,CACP3pB,MAAO,UACPsK,WAAY,IACZ2N,WAAY,gCAEd5Y,MAAO,CACLiL,WAAY,IACZ2N,WAAY,gCAEd1H,UAAW,CACTjG,WAAY,IACZtK,MAAO,UACPI,SAAU,GACV6X,WAAY,gCAEdT,YAAa,CACXlN,WAAY,IACZtK,MAAO,UACPI,SAAU,GACV6X,WAAY,gCAEdnJ,YAAa,CACXzJ,QAAS,OACTiE,WAAY,WACZQ,eAAgB,SAChBxE,cAAe,OAEjBuJ,KAAM,CACJsU,SAAU,EACVW,WAAY,EACZjZ,SAAU,SACVxF,QAAS,OACT6E,WAAY,EACZE,cAAe,EACfP,YAAa,GAEfgG,aAAc,CACZ1P,SAAU,EACVP,gBAAiB,UACjBujB,SAAU,EACVW,WAAY,GAEd/T,MAAO,CACL1K,QAAS,OACTwE,YAAa,EACbK,WAAY,EACZE,cAAe,EACfhB,MAAO,MACP+Z,SAAU,EACVW,WAAY,EACZjZ,SAAU,UAEZkE,SAAU,CACR1J,QAAS,OACTmG,WAAY,MACZvG,KAAM,EACNqF,WAAY,IACZ2N,WAAY,gCAEdS,aAAc,CACZrT,QAAS,OACTJ,KAAM,EACNqF,WAAY,IACZtK,MAAO,UACPypB,UAAW,SACXxR,WAAY,gCAEdW,cAAe,CACb5Y,MAAO,UACPiF,KAAM,EACN7E,SAAU,GACVkK,WAAY,IACZ2N,WAAY,gCAEd2R,QAAS,CACPtgB,WAAY,aACZY,WAAYxK,EAAM+L,QAAQ,GAC1BrB,cAAe1K,EAAM+L,QAAQ,IAE/Boe,KAAM,CACJvf,WAAY,IACZC,YAAa,GACbvK,MAAOwI,KAGTshB,SAAU,OAGCC,EAAqB1a,aAAuB,SAAC1Q,GACxD,IAAMwC,EAAUsM,IACRuc,EAAoB1oB,qBAAWsV,KAA/BoT,gBACA3Q,EAAa1a,EAAb0a,SACR,OACE,kBAAC4Q,EAAD,CAAaC,UAAU,QAAQ9kB,MAAM,4BACnC,yBACEP,UAAW1D,EAAQuoB,WACnB3jB,QAAS,kBAAMikB,EAAgB3Q,GAAU,KAExC,cAMI4Q,EAAcxqB,KAAW,SAACC,GAAD,MAAY,CAChDC,QAAS,CACPC,gBAAiB,UACjBI,MAAO,yBACPC,UAAWP,EAAMQ,QAAQ,GACzBC,SAAU,IACVC,SAAU,GACVkK,WAAY,IACZjK,QAAS,MARcZ,CAUvBa,KAES4X,EAAW,CACtBC,YAAa,UACbE,YAAa,UACbD,aAAc,UACd+R,YAAa,UACbC,UAAW,UACXC,aAAc,UACdC,SAAU,WAGCxY,EAAc,UAEdyY,EAAW,SAAC,GAAsC,IAApCxb,EAAmC,EAAnCA,SAAiBE,GAAkB,EAAzBjK,MAAyB,EAAlBiK,aACpC9N,EAAUsM,IACRa,EAAgBhN,qBAAWiN,KAA3BD,YAER,IAAKS,EACH,OAAO,KAGT,IAAMwJ,EAAoBxJ,EAASyJ,gBAAgBlK,EAAYmK,YAE/D,OACE,yBAAK5T,UAAW1D,EAAQ4N,UACrBkB,mBAASsI,EAATtI,EAA4B,SAAC5N,GAC5B,GAAIA,EAAE4J,KAAM,CACV,IAAM0C,EAAO5K,yBAAe1B,EAAEsM,MACxB6b,EAASvb,GAAeN,EAC9B,OACE,0BACE5I,QAASykB,GAAW,kBAAMvb,EAAYN,IACtC3J,MAAO,CACLhF,MAAOkY,EAAS7V,EAAErC,QAAUqC,EAAErC,MAC9BwL,WAAY,MACZif,eAAgBD,GAAU,YAC1BvY,OAAQuY,GAAU,YAGnBnoB,EAAE4J,YASV,SAASye,EAAT,GAA4C,IAAzBprB,EAAwB,EAAxBA,SAAU8Q,EAAc,EAAdA,WAC5BjP,EAAUsM,IAEVkd,EACJ,kBAAC,IAAD,CAAYzlB,QAAQ,UAAUL,UAAW1D,EAAQwoB,SAC9CrqB,GAIL,OAAI8Q,EACK,kBAAC,IAAD,CAAQjB,KAAM,GAAIwb,GAElBA,I,yJCxTLvE,E,uKACM,IAAD,EAOH1nB,KAAKC,MALPC,EAFK,EAELA,MACAohB,EAHK,EAGLA,WACAvB,EAJK,EAILA,SACA4H,EALK,EAKLA,eACAzJ,EANK,EAMLA,YAEIO,EAAoB6C,EAAWxC,QAAQ5e,GACvCE,EAAsBkhB,EAAW4K,gBAAgBhsB,GACjDC,EAAwBwnB,EAC1BwE,KAAKC,UAAUC,yBAAetM,IAC9B,KACEuM,EAAOC,IAAK,GAAD,OAAInsB,EAAJ,YAA2BD,IAC5C,OACE,kBAAC,IAAD,CACEG,SAAS,uCACTJ,MAAOA,EACPE,oBAAqBA,EACrBD,sBAAuBA,GAEvB,kBAAC,IAAD,CACE+d,YAAaA,EACbO,kBAAmBA,EACnB9Y,IAAK2mB,GAEJtsB,KAAKC,MAAMW,e,GA3BgBC,IAAMoH,WAkC7B6f,QAAQE,IAARF,CAAgCJ,I,iCC1C/C,6EAKO,SAAS3K,EAAS9c,GACvB,IAAMwC,EAAUC,IAEVsa,EAAO/c,EAAM+c,KACbtb,EAAWzB,EAAMyB,UAAY,GAE7B8qB,EAAajb,mBAASyL,EAATzL,EAAe,SAAC5N,GACjC,MAAgB,WAAZA,EAAE2C,MAEF,0BAAMH,UAAW1D,EAAQgqB,OAAQnmB,MAAO,CAAE5E,aACvCiC,EAAEhD,MAAO,KAGO,SAAZgD,EAAE2C,MAET,8BACE,0BAAMH,UAAW1D,EAAQiqB,KAAMpmB,MAAO,CAAE5E,aACrCiC,EAAEhD,OACG,UALP,KAWT,OAAO,6BAAM6rB,GAGf,IAAM9pB,EAAYoI,aAAW,SAAC9J,GAAD,MAAY,CACvCyrB,OAAQ,CACNpT,UAAW,aACXE,WAAY,UAEdmT,KAAM,CACJnT,WAAY,+BACZ3N,WAAY,IACZT,YAAa,EACbR,aAAc,EACda,WAAY,EACZE,cAAe,EACf2N,UAAW,aACXnY,gBAAiByrB,U,gmBCgCjBltB,YAAsB,MAFfmtB,G,GAATjtB,Q,GACAC,YAIF,SAASitB,GAAiB5sB,GACxB,IAAMoe,EAAUC,cADe,EAECrb,mBAAS,IAFV,mBAExB6pB,EAFwB,KAEdC,EAFc,OAGG9pB,mBAAS,IAHZ,mBAGxB+pB,EAHwB,KAGbC,EAHa,KAIzB/O,EAAcgP,cACd3O,EAAUC,cAEhB,SAAS2O,KACG,uCAAG,8BAAAhpB,EAAA,sEACwB+Z,EAAYkP,eADpC,OACLC,EADK,OAEHP,EAAaO,EAAbP,SACRC,EAAYD,GAHD,2CAAH,qDAKVQ,GAGFzkB,qBAAU,WACRskB,MACC,IAEHtkB,qBAAU,WAOR,OANA9D,OAAOwoB,iBAAiB,QAASJ,GAEjC,WACEpoB,OAAOyoB,oBAAoB,QAASL,MAIrC,IAEHtkB,qBAAU,WACRhJ,EAAO4tB,UAAYC,YAAqBxP,GACxCre,EAAO8tB,WAAP,sBAAoB,sBAAAxpB,EAAA,sEAAkB+Z,EAAY0P,aAA9B,qFACnB,IAUH,IAAM1H,EAAU,CACd4G,WACAE,YACAa,eAXF,SAAwBtrB,GACtB0qB,EAAa,GAAD,mBAAKD,GAAL,CAAgBzqB,MAW5BurB,gBARF,SAAyBvrB,GACvBgc,EAAQle,KAAR,UAAgBge,EAAhB,kBAAiC9b,MASnC,OACE,kBAACqqB,GAAmBlsB,SAApB,CAA6BC,MAAOulB,GACjCjmB,EAAMW,UAKN,SAASmtB,GAAmB9tB,GACjC,IAAM+tB,EAAcC,cAEpB,OACE,kBAAC,IAAD,CAAMvnB,MAAM,oBACV,kBAAC,IAAKwnB,OAAN,CAAaC,MAAM,IACnB,kBAAC,IAAKC,KAAN,CAAWC,QAAQ,GACjB,kBAACxB,GAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOlJ,KAAMqK,EAAYM,UAAWjhB,UAAWkhB,UAStD,IAAMA,GAAiB,SAAC,GAAQ,eACrB7rB,KAAhB,IACMsrB,EAAcC,cACZnB,EAAalqB,qBAAWgqB,IAAxBE,SACFzO,EAAUC,cAEhB,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CACEkQ,OAAK,EACL7K,KAAMqK,EAAYS,YAClBphB,UAAWqhB,KAEb,kBAAC,IAAD,CACEF,OAAK,EACL7K,KAAMqK,EAAYW,wBAClBthB,UAAWuhB,KAEZ9B,EAAStsB,QACR,kBAAC,IAAD,CAAU+nB,GAAE,UAAKlK,EAAL,kBAAsByO,EAAS,GAAGvqB,aAEhD,kBAAC,IAAD,CAAO8K,UAAW,kBAAM+V,QAKxByL,GACW,gBADXA,GAEc,mBAGpB,SAASC,GAAwB7uB,GAAQ,IAC/BsC,EAActC,EAAdsC,UACF2b,EAAcgP,cACdzqB,EAAUC,KACVqsB,EAAiBnsB,qBAAWgqB,IAJI,EAWlC9pB,cALF+jB,EANoC,EAMpCA,cACAmI,EAPoC,EAOpCA,iBAKIzQ,GAZgC,EAQpC8D,UARoC,EASpC4M,QAToC,EAUpCC,UAEc1Q,eACVH,EAAUC,cAEV6Q,EAAwBtI,EAAc5iB,QAC1C,SAACN,GAAD,OAAOA,EAAE0G,MAAQ,GAAK1G,EAAEyrB,wBACxB5uB,OAEI6uB,EAAiBxI,EAAc5iB,QAAO,SAACN,GAAD,OAAOA,EAAEyrB,wBAClD5uB,OAEG8uB,EAAY5M,mBAAiB6M,mBACjCrqB,aAAW+hB,aAAa+H,GACxB9pB,aAAW+hB,aAAaJ,IAxBY,EA2BhB5jB,mBAAS4rB,IA3BO,mBA2B/BjT,EA3B+B,KA2B1B4T,EA3B0B,KAoDtC,OAvBA3mB,qBAAU,WACRtD,aAAM,cAAD,OAAeqW,GAAO,CACzBO,UAAWgT,EACXM,qBAAsBH,EAAUI,UAEjC,CAAC9T,EAAKuT,EAAuBG,EAAUI,QAE1C7mB,qBAAU,WACRhJ,EAAO8vB,WAAaC,YAAU1R,EAAa3b,MAG7CsG,qBAAU,WACe,IAAnBwmB,GAAwBL,EAAiBxuB,OAAS,GACpDgvB,EAAOX,MAER,CAACQ,EAAgBL,EAAiBxuB,SASnC,yBAAK2F,UAAW1D,EAAQ4gB,WACtB,yBAAKld,UAAW1D,EAAQ6gB,qBACtB,yBAAKnd,UAAW1D,EAAQ8gB,SACtB,yBAAKpd,UAAW1D,EAAQ2D,QACtB,kBAAC,IAAD,CACE9E,MAAM,YACNI,SAAS,QACT4E,MAAO,CAAES,YAAa,MAExB,kBAAC,IAAD,CAAYP,QAAQ,KAAKF,MAAO,CAAE5E,SAAU,KAA5C,kBAKF,kBAAC,IAAD,CAAayE,UAAW1D,EAAQ4iB,YAAapS,WAAS,GACpD,kBAAC,IAAD,CACEhM,KAAK,QACL4oB,YAAY,iBACZlvB,MAAO4B,EACPuB,SA1BZ,SAAsBgsB,GACpB,IAAMvtB,EAAYutB,EAAM/rB,OAAOpD,MAC/B4d,EAAQle,KAAR,UAAgBge,EAAhB,kBAAiC9b,IACjCwC,OAAOoD,SAAS4nB,WAyBLhB,EAAejC,SAASxoB,KAAI,SAAC0rB,EAASvX,GACrC,OACE,kBAAC,IAAD,CAAU9X,MAAOqvB,EAAQztB,UAAWoD,IAAKqqB,EAAQztB,WAC/C,kBAAC,IAAD,CACEuH,QAAO,UAAKmmB,IAAKC,IAAIF,EAAQG,YAAtB,YACK,IAAV1X,EAAc,YAAc,GADvB,OAIT,kBAAC,IAAD,KACGuX,EAAQI,SACP,kBAAC,IAAD,CACE1uB,SAAS,QACTJ,MAAM,YACNgF,MAAO,CAAES,YAAa,EAAGyE,WAAY,YAUrD,kBAAC,IAAD,CAAYlF,MAAO,CAAEO,UAAW,GAAIa,aAAc,MAElD,kBAAC,IAAD,CACEwc,YAAY,WACZ/d,UAAW1D,EAAQ0hB,KACnBrgB,SAAU,SAACsgB,EAAGzjB,GAAJ,OAAc6uB,EAAO7uB,IAC/BA,MAAOib,GAEP,kBAAC,IAAD,CACExU,MAAK,0BAAqB+nB,EAArB,cAAgDE,EAAhD,MACL1uB,MAAOkuB,KAET,kBAAC,IAAD,CACEznB,MAAK,6BAAwBkoB,EAAUI,MAAlC,KACL/uB,MAAOkuB,MAIX,kBAAC,IAAD,CAAYvoB,MAAO,CAAEO,UAAW,GAAIa,aAAc,MAElD,yBAAKpB,MAAO,CAAEC,KAAM,KAEpB,kBAAC,KAAD,CAAW8pB,aAAa,MAG5B,yBAAKlqB,UAAW1D,EAAQ4hB,eACtB,yBAAKle,UAAW1D,EAAQ6hB,QACrBuK,KAA0BjT,GACzB,kBAAC0U,GAAD,CAAe/tB,UAAWA,IAE3BssB,KAA6BjT,GAC5B,kBAAC2U,GAAD,CAAkBhuB,UAAWA,EAAW+sB,UAAWA,OAQ/D,SAASV,GAAmB3uB,GACNitB,cACJxqB,KAEhB,OAGE,kBAAC,IAAgBzC,GAIrB,IAAMmjB,GACJ,kBAAC,IAAD,CACE1c,MAAM,qCACNwN,QAAS,kHAG0Csc,IAH1C,OAIXC,SAIF,SAAS/B,GAAmBzuB,GAAQ,IAC1BsC,EAActC,EAAMkoB,MAAMC,OAA1B7lB,UAIFglB,GAHU7kB,KAEGE,qBAAWqP,KACbkM,eAEjB,OACE,kBAAC,IAAkBqJ,SAAnB,MACG,gBAAGxJ,EAAH,EAAGA,aAAH,EAAiBsI,aAAjB,OACC,kBAAC,IAAD,eACE/jB,UAAWA,EACXyb,aAAcA,GACVuJ,GAEJ,kBAACuH,GAAD,CAAyBvsB,UAAWA,QA+B9C,SAAS+tB,GAAcrwB,GAAQ,IACrBsC,EAActC,EAAdsC,UACFE,EAAUC,KAFY,EAGSI,cAA7B+jB,EAHoB,EAGpBA,cAAexE,EAHK,EAGLA,UAEjBhE,GADUG,cACAF,eAEVoS,EAAO7J,EAAc5iB,QAAO,SAACN,GAAD,OAAOA,EAAEyrB,wBACrCuB,EAAYD,EAAKlwB,OACjBowB,EAAeF,EAAKG,MAAK,SAACltB,GAAD,OAAOA,EAAE0G,MAAQ,KAEhD,OAAkB,IAAdsmB,GAAoBtO,EAQtB,oCACE,yBAAKlc,UAAW1D,EAAQ8iB,OACtB,kBAAC,IAAD,CAAY/e,QAAQ,KAAKlF,MAAM,UAAUgF,MAAO,CAAEsF,WAAY,MAC3DglB,EACG,sDACA,2CAGR,kBAAC,IAAD,CAAMtqB,MAAO,CAAE3E,QAAS,GAAI6J,WAAY,IACrCqb,EAAcviB,KAAI,SAACX,GAElB,IAAKA,EAAEyrB,qBACL,OAAO,KAGT,IAAM7G,EAAE,UAAMlK,EAAN,kBAAuB9b,EAAvB,kBAA0CoB,EAAEme,OAA5C,oBAA8Dne,EAAEke,QACxE,OACE,kBAAC,IAAD,CAAuBlc,IAAK4iB,EAAIzG,OAAQne,EAAEme,OAAQD,OAAQle,EAAEke,QAC1D,kBAAC,IAAD,CACE1b,UAAWyD,IAAWnH,EAAQsR,MAAT,eAClBtR,EAAQyE,SAAuB,IAAZvD,EAAE0G,SAGxB,kBAAC,IAAiBmd,SAAlB,MACG,gBAAGtF,EAAH,EAAGA,mBAAH,OACC,kBAAC,IAAD,CACE3F,QAAM,EACNpW,UAAW1D,EAAQuO,IACnB3D,UAAWyjB,IACXvI,GAAIA,EACJlhB,QAAS,WACP9B,aAAM,wBAAyB5B,KAGjC,yBAAKwC,UAAW1D,EAAQgjB,eACtB,kBAAC,IAAD,CAAYpY,UAAU,MAAM7G,QAAQ,aACjC0b,EAAmBsB,iBAClB,0BAAMld,MAAO,CAAEhF,MAAOwF,MAAtB,oBAKJ,kBAAC,IAAD,CACE+a,OAAQK,EAAmBwB,WAC3BC,KAAMzB,EAAmB0B,YAG7B,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAUnc,KAAM9D,EAAE0G,MAAQ,GACxB,kBAAC,IAAD,CACElE,UAAW1D,EAAQqiB,MACnB7d,KAAK,QACLG,MAAK,iBAAYzD,EAAE0G,OACnB/D,MAAO,CACLpF,gBAAiBsL,QAIvB,kBAAC,IAAD,CAAU/E,KAAkB,IAAZ9D,EAAE0G,OAChB,kBAAC,IAAD,CACElE,UAAW1D,EAAQqiB,MACnB7d,KAAK,QACLG,MAAK,WACLd,MAAO,CACLpF,gBAAiBqL,oBAvEpC,kBAAC,KAAD,CAAqBY,MAAM,IAwFtC,SAASojB,GAAiBtwB,GAAQ,IACxBsC,EAAyBtC,EAAzBsC,UAAW+sB,EAAcrvB,EAAdqvB,UACb7sB,EAAUC,KACV6b,EAAUC,cAHe,EAIwB1b,cAAduf,GAJV,EAIvB2M,iBAJuB,EAILnI,cAJK,EAIUxE,WACnChE,EAAUC,cAEVyS,EAAe7rB,aAAWqf,aAAa+K,EAAUyB,cACjDC,EAAoB9rB,aAAWqf,aAAa+K,EAAU2B,UACtDC,EAAOhsB,aAAWqf,aAAa+K,EAAU4B,MAThB,EAWKjuB,mBAAS,MAXd,mBAWxBkuB,EAXwB,KAWZC,EAXY,KAa/B,OAAoB,IAAhBF,EAAK1wB,QAAwC,IAAxBuwB,EAAavwB,QAAiB6hB,EAKrD,oCACG8O,GACC,kBAAC,IAAD,CACEvQ,QAAS,kBAAMwQ,EAAc,OAC7BJ,kBAAmBA,EACnBK,YAAaF,EAAWG,SACxBC,OAAQJ,EACRK,MAAO,SAACC,GAAY,IACV3P,EAAmB2P,EAAnB3P,OAAQD,EAAW4P,EAAX5P,OACV0G,EAAE,UAAMlK,EAAN,kBAAuB9b,EAAvB,kBAA0Cuf,EAA1C,oBAA4DD,GACpEtD,EAAQle,KAAKkoB,MAInB,yBAAKpiB,UAAW1D,EAAQ8iB,OACtB,kBAAC,IAAD,CAAY/e,QAAQ,KAAKlF,MAAM,UAAUgF,MAAO,CAAEsF,WAAY,MAA9D,iBACiB,IACf,kBAAC8lB,GAAD,CAAMC,OAAQrC,EAAUsC,YAAc,EAAGxqB,MAAM,qBAFjD,MAMF,kBAAC,IAAD,CAAMK,KAAM6nB,EAAUsC,YAAc,KAClC,yBAAKzrB,UAAW1D,EAAQ+iB,SACtB,kBAAC,IAAD,CAAYhf,QAAQ,UAAUF,MAAO,CAAEhF,MAAO0M,MAA9C,WACWkjB,EAAK1wB,OADhB,yGAOJ,kBAAC,IAAD,CAAMiH,KAAMspB,EAAavwB,QACvB,kBAAC,IAAD,CAAYgG,QAAQ,YAAYlF,MAAM,UAAUgF,MAAO,CAAE3E,QAAS,IAAlE,qBAGA,kBAAC,IAAD,CAAM2E,MAAO,CAAEoB,aAAc,KAC1BqpB,EAAazsB,KAAI,SAACX,GACjB,IAAMkuB,EAAM,kBAAC,IAAD,CAAgB/P,OAAQzc,yBAAe1B,EAAEme,UAErD,OACE,kBAAC,IAAD,CACEvF,QAAM,EACNpW,UAAW1D,EAAQuO,IACnB8gB,SAAS,EACTzqB,QAAS,WACP+pB,EAAc,CACZtP,OAAQne,EAAEme,OACV6B,KAAMhgB,EAAEggB,KACR9B,OAAQle,EAAEke,OACVyP,SAAUO,MAId,yBAAK1rB,UAAW1D,EAAQgjB,eACtB,kBAAC,IAAD,CAAe5D,OAAQle,EAAEke,OAAQ8B,KAAMkO,KAEzC,kBAAC,IAAD,KACE,kBAAC,IAAD,CACE1rB,UAAW1D,EAAQqiB,MACnB7d,KAAK,QACLG,MAAOzD,EAAE0G,MAAQ,gBACjB/D,MAAO,CACLpF,gBAAiBqL,aAS9B2kB,EAAK1wB,OAAS,GACb,kBAAC,IAAD,CACEgG,QAAQ,YACRlF,MAAM,UACNgF,MAAO,CAAE3E,QAAS,IAHpB,sBAUJ,kBAAC,IAAD,KACGuvB,EAAK5sB,KAAI,SAACX,GACT,OACE,kBAAC,IAAD,CACE4Y,QAAM,EACNpW,UAAW1D,EAAQuO,IACnB8gB,SAAS,EACTzqB,QAAS,WACP+pB,EAAcztB,KAGhB,yBAAKwC,UAAW1D,EAAQgjB,eACtB,kBAAC,IAAD,CAAe5D,OAAQle,EAAEke,OAAQ8B,KAAMhgB,EAAEggB,QAE3C,kBAAC,IAAD,KACE,kBAAC,IAAD,CACExd,UAAW1D,EAAQqiB,MACnB7d,KAAK,QACLG,MAAOzD,EAAE0G,MAAQ,gBACjB/D,MAAO,CACLpF,gBAAiBqL,cAzG1B,kBAAC,KAAD,CAAqBY,MAAM,IAqHtC,IAAMukB,GAAO,SAAC,GAAuB,IAArBC,EAAoB,EAApBA,OAAQvqB,EAAY,EAAZA,MACtB,OACE,8BACc,IAAXuqB,GACC,kBAAC,IAAD,CACEnrB,QAAQ,KACR6G,UAAU,OACV/L,MAAM,YACNgF,MAAO,CAAEsF,WAAY,MAEpB+lB,EAAQ,KAGb,kBAAC,IAAD,CAAYnrB,QAAQ,KAAK6G,UAAU,OAAO/G,MAAO,CAAEsF,WAAY,MACjD,IAAX+lB,GAAgB,MAChBvqB,EACW,IAAXuqB,EAAe,GAAK,OAMvBjvB,GAAYoI,aAAW,SAAC9J,GAAD,MAAY,CACvCqiB,UAAW,CACT1c,QAAS,OACT2F,OAAQ,QACRH,SAAU,UAEZmX,oBAAqB,CACnB5Y,MAAO,IACPyB,SAAU,SACVxF,QAAS,QAEX0d,cAAe,CACb1d,QAAS,OACT8d,SAAU,EACVW,WAAY,EACZjZ,SAAU,SACVG,OAAQ,QACRlB,eAAgB,UAElBmY,QAAS,CACPkB,SAAU,EACVpZ,SAAU,QACVX,MAAO,UACP4B,OAAQ,QACRoY,UAAW,SACX/d,QAAS,OACTC,cAAe,SACf+d,YAAY,aAAD,OAAe3jB,EAAMG,QAAQyjB,KAAK,MAC7CC,WAAY7jB,EAAMG,QAAQyjB,KAAK,MAEjCE,MAAO,CACLjZ,WAAY,IAEdsY,KAAM,CACJtY,WAAY7K,EAAM+L,QAAQ,IAE5BuX,OAAQ,CACN/d,KAAM,EACNmF,cAAe,IACfjK,SAAU,MAEZwjB,aAAc,CACZvZ,cAAe1K,EAAM+L,QAAQ,IAE/BmY,cAAe,CACb/Z,YAAanK,EAAM+L,QAAQ,GAC3BzL,MAAOwF,KAETqe,gBAAiB,CACf7Y,OAAQ,EACR5B,MAAO,QAETtE,OAAQ,CACNO,QAAS,OACTC,cAAe,MACfwe,WAAY,EACZ1a,MAAO,OACPE,WAAY,SACZkD,OAAQ9M,EAAM+L,QAAQ,IAExBsY,YAAa,CACXla,YAAa,GACbR,aAAc,IAEhB2a,YAAa,CACXze,UAAW7F,EAAM+L,QAAQ,IAE3BwY,MAAO,CACL1e,UAAW,GACX6E,cAAe,GACfd,WAAY,SACZjE,QAAS,OACTyE,eAAgB,SAChBxE,cAAe,OAEjB4e,QAAS,CACP9Z,cAAe,GACfd,WAAY,SACZjE,QAAS,OACTyE,eAAgB,SAChBxE,cAAe,OAEjB6e,cAAe,CACb9e,QAAS,OACTC,cAAe,UAEjBoK,IAAK,CACHxF,WAAY,GACZE,cAAe,IAEjBxE,SAAU,CACRgE,cAAe,OACfD,QAAS,IAEX8I,MAAO,CACLrM,aAAc,IAEhBge,cAAe,CACb/e,QAAS,OACT2F,OAAQ,QACRnB,YAAa,GACbR,aAAc,GACd/D,cAAe,MACfuF,SAAU,SACVsY,SAAU,EACVW,WAAY,EACZha,eAAgB,UAElBua,YAAa,CACXpf,KAAM,EACN5E,QAAS,iBACTF,SAAU,Y,mDChvBdI,OAAOC,eAAeC,EAAS,aAAc,CAC3CpB,OAAO,IAEToB,EAAQgwB,kBAAoBhwB,EAAQiwB,YAAS,EAE7C,IAAIC,EAAW,EAAQ,KAEvBpwB,OAAOC,eAAeC,EAAS,SAAU,CACvCG,YAAY,EACZC,IAAK,WACH,OAAO8vB,EAASD,UAIpB,IAAIE,EAAwB,EAAQ,KAEpCrwB,OAAOC,eAAeC,EAAS,oBAAqB,CAClDG,YAAY,EACZC,IAAK,WACH,OAAO+vB,EAAsBF,W,iCCrBjC,6CAEO,SAASnf,EAAgCuF,EAAIzS,EAAKhF,GACvD,MAAO,CAACwxB,cAAYC,gBAAgBha,EAAIzS,EAAKhF,M,iCCH/C,8KAiBM+B,EAAYoI,aAAW,SAAC9J,GAAD,MAAY,CACvC+J,KAAM,CACJM,SAAU,SACVC,IAAK,KAEPlF,OAAQ,CACNO,QAAS,OACT0rB,UAAW,SACXjnB,eAAgB,SAChBD,YAAa,GACbK,WAAY,GACZE,cAAe,GAEjB4mB,KAAM,CACJ5wB,SAAU,GACVkK,WAAY,IACZ2N,WAAY,gCAEdgZ,KAAM,CACJ5nB,aAAc,GAEhB0a,YAAa,CACXvX,OAAQ9M,EAAM+L,QAAQ,GACtBlB,WAAY7K,EAAM+L,QAAQ,GAAK,EAC/BrF,aAAc,GAEhBtC,WAAY,CACVwG,WAAY,IACZC,YAAa,EACbnK,SAAU,IAEZ8wB,QAAS,CACP5lB,UAAW,QACXjL,QAAS,OAIA8wB,EAAiB,SAACxyB,GAC7B,IAAMwC,EAAUC,IAEd+C,EAQExF,EARFwF,UACAI,EAOE5F,EAPF4F,WACAuM,EAMEnS,EANFmS,YACAlJ,EAKEjJ,EALFiJ,mBACAwpB,EAIEzyB,EAJFyyB,uBACAC,EAGE1yB,EAHF0yB,0BACApX,EAEEtb,EAFFsb,gBACAD,EACErb,EADFqb,aAVqC,EAYI1Y,qBAAWC,KAA9CF,EAZ+B,EAY/BA,iBAEFwd,GAdiC,EAYbyS,aAENC,YAAsBvX,EAAcpS,IAMxD,OAHGoS,GAAgBA,EAAa7V,WAAaA,GAC1C6V,EAAazV,YAAcA,EAO5B,yBAAKM,UAAW1D,EAAQsI,MACtB,kBAAC,IAAD,CAAM1E,UAAW,GACf,yBAAKF,UAAW1D,EAAQ2D,QACtB,kBAAC,IAAD,CAAU4W,KAAM5K,EAAY0gB,UAC5B,yBAAKxsB,MAAO,CAAEC,KAAM,EAAGoG,SAAU,MACjC,kBAAComB,EAAD,OAGF,kBAAC,IAAD,MAEA,kBAAC,IAAD,CAAa1lB,UAAU,WAAWlH,UAAW1D,EAAQ4iB,aACnD,kBAAC,IAAD,KACGlF,EAAY7b,KAAI,SAACc,EAAYmD,GAC5B,OACE,kBAAC,IAAD,CACE5C,IAAK4C,EACLlB,QAAS,kBAAMsrB,EAA0BvtB,IACzC4B,QACE,kBAAC,IAAD,CACEC,KAAK,QACL3F,MAAM,UACNX,MAAOyE,EACPpB,QAAS0L,QACPgjB,GACE9uB,kBAAgBovB,uBACd5tB,EACAstB,MAKVtrB,MAAO,kBAAC,IAAD,CAAU4V,KAAM5X,EAAW6tB,SAAS5L,gBAOrD,kBAAC,IAAD,MAEA,yBAAKlhB,UAAW1D,EAAQ+vB,SACtB,kBAAC,IAAkBhL,SAAnB,MACG,YAAqB,IAAlBllB,EAAiB,EAAjBA,WACF,OACE,kBAAC,IAAD,CACE2E,KAAK,QACLI,QAAS,WACP,IAAM6rB,EAAW5X,EAAa7X,KAC9B8X,EAAgB,MAChBjZ,EAAW4wB,KALf,aAaN,kBAAC,IAAD,CACE5xB,MAAM,UACN2F,KAAK,QACLC,UAAWwrB,EACXrrB,QAAS,WACPkU,EAAgB,MAChB5Y,EAAiB+vB,KANrB,cA7DC,MA8EEK,EAAe,kBAC1B,yBAAK5sB,UAAW,OAAQG,MAAO,CAAES,YAAa,IAC5C,yBAAKqN,IAAI,kBAAkB1J,MAAO,GAAI4B,OAAQ,Q,iCC3JlD,gHAcO,SAAS6mB,EAAUlzB,GAAQ,IACxBowB,EAAgBpwB,EAAhBowB,YACF5tB,EAAUC,IAFe,EAIWI,cAAlCosB,EAJuB,EAIvBA,UAAWD,EAJY,EAIZA,QAAS5M,EAJG,EAIHA,UAE5B,OACE,yBAAKlc,UAAW1D,EAAQwiB,cACtB,yBAAK3e,MAAO,CAAEO,UAAW,IACvB,kBAAC,IAAD,CAAM2J,IAAK6R,GACT,kBAAC,IAAD,CAAkBpb,KAAM,GAAIT,QAAQ,oBAGxC,kBAAC,IAAD,CACE6G,UAAU,MACV7G,QAAQ,WACRF,MAAO,CAAE5E,SAAU,IACnByE,UAAW1D,EAAQyiB,eAElBgK,EANH,cAMyBmB,GAAW,aAAUpB,EAAV,cAM1C,IAAMvsB,EAAYoI,aAAW,SAAC9J,GAAD,MAAY,CACvCkkB,cAAe,CACb/Z,YAAanK,EAAM+L,QAAQ,GAC3BzL,MAAOwF,IACPP,KAAM,GAER0e,aAAc,CACZte,QAAS,OACTC,cAAe,MACfuE,YAAanK,EAAM+L,QAAQ,S,gCChD/B,6RAEajD,EAAU,UACVG,EAAY,UACZ8Q,EAAc,UACd4R,EAAwB,wBACxBpgB,EAAuB,qBACvBC,EAA0B,uBAC1BC,EAAuB,sBAMvB2mB,EACF,UADEA,EAEN,UAFMA,EAGL,UAHKA,EAIN,UAJMA,EAKJ,UALIA,EAMH,UAGG9kB,EACF,UADEA,EAEN,UAFMA,EAGL,UAHKA,EAIN,UAJMA,EAKJ,UALIA,EAMH,UAGG+kB,EAAWC,YAAe,CACrCnyB,QAAS,CACP2I,QAAS,CAAEypB,KAAMzpB,GACjBG,UAAW,CAAEspB,KAAMtpB,GACnBupB,QAAS,CAAED,KAAMxY,EAAa8J,WAAY8H,GAC1C8G,MAAO,CAAEF,KA5Ba,UA4BK1O,WAAYtY,GACvCmnB,QAAS,CAAEH,KA1BW,UA0BO1O,WAAYpY,GAEzCknB,YAAa,CACXC,QAAS,CAAEL,KAAMH,EAAsBS,KAAMvlB,GAC7CC,IAAK,CAAEglB,KAAMH,EAAkBS,KAAMvlB,GACrCE,KAAM,CAAE+kB,KAAMH,EAAmBS,KAAMvlB,GACvCG,IAAK,CAAE8kB,KAAMH,EAAkBS,KAAMvlB,GACrCI,MAAO,CAAE6kB,KAAMH,EAAoBS,KAAMvlB,GACzCK,OAAQ,CAAE4kB,KAAMH,EAAqBS,KAAMvlB,KAG/CtC,WAAY,CAEVuN,WAAY,CAAC,SAAU,a,oOChDrBua,EAAeC,EAAYC,QAE7BC,EAAqBlvB,OAAOmvB,sBAE1BC,EAAe,IAAI5vB,QAAJ,uCAAY,WAAO6vB,GAAP,qBAAAjwB,EAAA,yDACzBkwB,EAAS,IAAIrC,SAAO,SACtBiC,EAF2B,iCAGNI,EAAOC,cAHD,YAGvBC,EAHuB,QAKhBC,GALgB,iCAMJD,EAASE,OANL,gBAMnBC,EANmB,EAMnBA,KACR3vB,OAAO4vB,GAAGC,SAASF,EAAKG,IAAK,CAC3Bld,YAAa+c,EAAKpkB,KAClBwkB,MAAOJ,EAAKI,QAEd/vB,OAAOgwB,UAAUH,SAASF,EAAKG,IAAK,CAClCvkB,KAAMokB,EAAKpkB,KACXwkB,MAAOJ,EAAKI,QAEd/vB,OAAO8O,SAAS,SAAU,CAAEvD,KAAMokB,EAAKpkB,KAAMwkB,MAAOJ,EAAKI,QAf9B,QAiB7BV,IAjB6B,wBAmB7BrsB,QAAQitB,KAAK,yBACb,IACEjwB,OAAO4vB,GAAGM,WACV,MAAO10B,IACT6zB,IAvB6B,4CAAZ,uDA2Bd,SAAec,IAAtB,+B,4CAAO,sBAAA/wB,EAAA,sEACCgwB,EADD,OAELpsB,QAAQC,IAAI,oBAFP,4C,0BAOMmtB,EAAe,I,4HAFOC,MAI5B,SAAe7vB,EAAtB,oC,4CAAO,WAAqBuqB,EAAO7vB,GAA5B,eAAAkE,EAAA,sEACCgwB,EADD,OAEDF,IACIoB,EADgB,2BACAp1B,GADA,IACO6zB,iBAC7B/uB,OAAOgwB,UAAUxvB,MAAMuqB,EAAOuF,GAC9BtwB,OAAO4vB,GAAG7E,MAAMA,EAAOuF,IAEzBF,EAAaG,KAAK,QAASxF,EAAO7vB,GAAS,IAPtC,4C,6ICvCA,SAASs1B,EAAT,GAA4D,IAAtC7uB,EAAqC,EAArCA,MAAO9F,EAA8B,EAA9BA,SAAU0F,EAAoB,EAApBA,MAAOkvB,EAAa,EAAbA,WACnD,OACE,yBAAKlvB,MAAK,aAAGO,UAAW,IAAOP,IAC7B,6BACA,kBAAC,IAAD,CAAYE,QAAQ,WAAWF,MAAO8H,KAA2B1H,GACjE,kBAAC,IAAD,OAEA,yBAAKJ,MAAOkvB,GACX50B,M,iEC2BA,SAAS60B,EAA4B90B,GAC1C,OAAIA,GAASA,EAAM+0B,qBACV/0B,EAAM+0B,qBAER,G,sBCJF,SAASC,EAAT,GAA4C,IAAnB9T,EAAkB,EAAlBA,OAAQC,EAAU,EAAVA,OACtC,OAAO8T,YAAqB9T,EAAQD,GAG/B,SAASgU,EAAT,EAEL3jB,GAOqB,IAiBjB0R,EAzBF/B,EAQkB,EARlBA,OAAQC,EAQU,EARVA,OAURgU,EAKE5jB,EALF4jB,SACAC,EAIE7jB,EAJF6jB,UACAC,EAGE9jB,EAHF8jB,mBACAC,EAEE/jB,EAFF+jB,eACA5jB,EACEH,EADFG,cAGI7P,EAAamzB,EAAc,CAAE7T,SAAQD,WAIrCqU,GAHoBF,EAAmBlU,IAAW,IAAIxd,KAC1D,SAAC6xB,GAAD,OAAeL,EAASK,MAEuBlyB,QAC/C,SAACmyB,GAAD,OAAaA,EAAQC,kBAAkB3S,aAAe7B,EAAOyU,iBAI3DC,EAAiB,GAGrB,IACE,IAAMC,EAAYC,YAAY3U,EAAQiU,GAYtCnS,EAX4B4S,EAAUlyB,KAAI,SAACwd,GAAD,OAAYiU,EAAUjU,MAEjBxd,KAAI,SAACoyB,GAGlD,MAAO,CACLC,kBAHwBC,YAA+BF,GAIvDG,gBAHsBH,EAAc5U,WAQrCxd,KAAI,qBAAGqyB,qBACP7e,KAAK,KAERye,EAAiBC,EACdlyB,KAAI,SAACwd,GAAD,OAAYiU,EAAUjU,MAC1B7d,QAAO,SAAC6yB,GAAD,OAAOC,YAAgBD,MAC9BxyB,KAAI,SAACwyB,GAAD,MAAQ,CACXhV,OAAQgV,EAAEhV,OACVxR,KAAMwmB,EAAEE,WAAWC,qCAAqC3mB,KACxD8B,YAAaC,EAAchN,eAAeyxB,EAAEhV,OAAQxP,SAExD,MAAO/R,GAGPwH,QAAQ4Z,MAAMphB,GAGhB,IAAKqjB,EAAU,OAAO,KAEtB,IAAMsT,EAAgBhB,EAAwB5xB,KAC5C,YAIE,MAAO,CACL6xB,UALkC,EAAnCA,UAMCgB,YALkB1B,EADgB,EAAxBY,kBAEQe,oBASlBC,EAA4BC,IAChCrB,EACGhyB,QACC,SAACswB,GAAD,OACEA,EAASgD,mBAAmB7T,aAAe7B,EAAOyU,eAClD/B,EAASgD,mBAAmBzV,SAAWA,KAE1Cxd,KAAI,YAAyC,IAAtCkzB,EAAqC,EAArCA,WAAYD,EAAyB,EAAzBA,mBAIlB,MAAO,CACLC,aACAC,aALmBhC,EACnB8B,EAAmBH,gBAKnBptB,WAAYutB,EAAmBG,mBAGrC,CAAC,eAGH,MAAO,CACLhU,WAAY7B,EACZA,SACAC,SACA8B,WACA2S,iBACAW,gBACAS,UAAWN,EACX7T,gBAAiBnR,EAAchN,eAAe7C,EAAYo1B,KAC1DC,oBAAqBxlB,EAAchN,eAAe7C,EAAY8P,KAC9DwlB,QAC2B,IAAzBZ,EAAc12B,QAAqD,IAArC62B,EAA0B72B,QArJ9D,qE,yXCoBIf,YAAsB,OAFfwS,E,EAATtS,QACaooB,E,EAAbnoB,YAQK,SAASm4B,EAAiBC,GAC/B,IAAM3lB,EAAgB2lB,EAAQ3lB,gBADU,EAQpC2lB,EAAQC,gBAJVnC,EAJsC,EAItCA,SACAoC,EALsC,EAKtCA,eACAP,EANsC,EAMtCA,UACAQ,EAPsC,EAOtCA,kBAEIC,EAAqBJ,EAAQK,oBAC7BtC,EAAYmC,EAGZI,EAAsB,IAAIC,IAAI12B,OAAO22B,OAAOJ,IAE5CK,EAAYT,EAAQS,YACpBC,EAAcV,EAAQU,cACtBC,EAAkBX,EAAQW,kBAC1B3C,EAAqBn0B,OAAO+2B,QAAQR,GAAoBhR,QAC5D,SAACZ,EAAKqS,GAAW,IAAD,cACcA,EADd,GACP1C,EADO,KACIrU,EADJ,KAERnhB,EAAQ6lB,EAAI1E,IAAW,GAG7B,OAFAnhB,EAAMN,KAAK81B,GACX3P,EAAI1E,GAAUnhB,EACP6lB,IAET,IAgBF,MAd2B,CACzBnU,gBACAyjB,WACAqC,oBACAR,YACA1B,eAAgBp0B,OAAO22B,OAAOb,GAC9BS,qBACApC,qBACAD,YACA0C,YACAH,sBACAI,cACAC,mBAKJ,SAASG,EAAa74B,GAAQ,IAAD,EACW2C,qBAAWm2B,KAAzCpa,EADmB,EACnBA,SAAUD,EADS,EACTA,gBACZsa,EAAkBp2B,qBAAWlD,KAFR,EAGDuD,mBAAS,MAHR,mBAGpB0e,EAHoB,KAGbsX,EAHa,OAITh2B,mBAAS,MAJA,mBAIpB8R,EAJoB,KAIjBmkB,EAJiB,OAKWj2B,mBAAS,GALpB,mBAKPk2B,GALO,WAMnBh5B,EAAsD64B,EAAtD74B,sBAAuBC,EAA+B44B,EAA/B54B,oBAAqBF,EAAU84B,EAAV94B,MA6BpD,GA3BA2I,qBACE,WACE,IACE,IAAMyY,EAAaG,SAAO2X,iBAC1Bv5B,EAAOyhB,WAAaA,EAChBlhB,GACFkhB,EAAW+X,QAAQn5B,EAAOE,GAE5B,IACMmhB,EAAiB,IAAIC,oBACzB7C,EACAD,EAHc,iBAMVqD,EAAaN,SAAO6X,iBACxBhY,EACAphB,EACAC,GAAyB,KACzBohB,GAEF2X,EAAK,CAAEnX,aAAYT,eACnB,MAAO/gB,GACP04B,EAAS14B,MAGb,CAACJ,EAAuBC,KAErB2U,EACH,OAAO,KAGT,GAAI4M,EAEF,OADA5Z,QAAQ4Z,MAAMA,GACP,wCAzCkB,IA2CnBI,EAA2BhN,EAA3BgN,WAAYT,EAAevM,EAAfuM,WACd7C,GAAqBxe,EAAMwe,mBAAqB6C,GAAYxC,QAChE5e,GAGF,SAASiS,IACP,IAAMoN,EAAUC,MACV+B,EAAiB,IAAIC,oBACzB7C,EACAD,EACAa,GAGF,IAAK,IAAD,uBARqBQ,EAQrB,yBARqBA,EAQrB,gBACFgC,EAAW5P,eAAX,MAAA4P,EAAU,CAAgB7hB,EAAOqhB,GAAvB,OAA0CxB,IACpDoZ,GAAe,SAAC14B,GAAD,OAAOA,EAAI,KACtBR,EAAM6D,UACR7D,EAAM6D,SAAS,CACb5D,QACAohB,aACAS,eAGJ,MAAOxhB,GACP04B,EAAS14B,IAIb,IAAMg5B,EAAgBpnB,EAEhB6lB,EAAUwB,kBAAQlY,EAAYS,EAAY7hB,GAC1CgS,EAAqB6lB,EAAiBC,GAEtCr3B,GADkBV,EAAhBie,YACM,CACZhe,QACAwe,kBACAC,WACAoD,aACAtD,oBACA6C,aACA0W,UACA9lB,qBACAqnB,gBACApnB,mBAEF,OACE,gBAACF,EAAWvR,SAAZ,CAAqBC,MAAOA,GAAQV,EAAMW,UA3I9Cf,EAAOkgB,SAAW,GAClBlgB,EAAO45B,kBAAoB,WACzB,OAAOpN,yBAAexsB,EAAOkgB,WA6I/B,IAAM2Z,EAAWZ,EAEjB,SAASa,EAAc15B,GAAQ,IACrB25B,EAAoBC,wBAApBD,gBACA1b,EAAgBje,EAAhBie,YAFoB,4CAI5B,+BAAA/Z,EAAA,6DAA8Bmd,EAA9B,EAA8BA,WAAYphB,EAA1C,EAA0CA,MAA1C,kBAEUge,EAAY8B,WAAWsB,EAAYphB,GAF7C,uDAKI05B,EACE,qEACA,CAAEpzB,QAAS,UAPjB,0DAJ4B,sBAgB5B,OACE,gBAACkzB,EAAD,CACE51B,SAAUg2B,KAlBc,6CAkBS,IAAM,CAAEC,SAAS,EAAMC,UAAU,KAEjE/5B,EAAMW,UAKb,IAAMq5B,EAAoBnB,I,mUC1LtBr5B,YAAsB,MAFfoQ,E,EAATlQ,QACagR,E,EAAb/Q,YAGF,SAASs6B,EAAiBj6B,GAAQ,IAAD,EACSgD,mBAAS,CAC/C4R,SAAS,EACTC,SAAS,EACTC,EAAG,KACHrK,MAAO,OALsB,mBACxBsK,EADwB,KACVC,EADU,KAQzBiR,EAAU,CACdtW,YAAa3P,EAAMgP,MACnBD,OAAQ/O,EAAMgP,MAAMD,OACpBkH,gBAAiBjW,EAAMiW,gBACvB9Q,WAAYnF,EAAMmF,WAClB3B,KAAMxD,EAAMwD,KACZoH,YAAa5K,EAAM4K,YACnBuE,YAAanP,EAAMmP,YACnB4F,eACAC,mBAGF,OACE,kBAACpF,EAAmBnP,SAApB,CAA6BC,MAAOulB,GACjCjmB,EAAMW,UAON,SAASqV,IACd,IAAMiQ,EAAUtjB,qBAAWiN,GAE3B,IAAKqW,EACH,MAAM/W,MAAM,+DAEd,MAAO,CACL1L,KAAMyiB,EAAQziB,KACdyS,gBAAiBgQ,EAAQhQ,iB,MAQzBzW,YAAsB,MAFfyY,E,EAATvY,QAIIw6B,G,EAHJv6B,Y,4MAIAwb,MAAQ,CACNgf,aAAc,IAAI7B,IAClBtgB,aAAc,IAAIsgB,K,uDAGV,IAAD,OACDrS,EAAU,CACdkU,aAAcC,MAAMC,KAAKt6B,KAAKob,MAAMgf,cACpCniB,aAAcoiB,MAAMC,KAAKt6B,KAAKob,MAAMnD,cAEpCsiB,gBAAiB,SAACniB,EAAIoiB,GAChBA,EACF,EAAKpf,MAAMgf,aAAa3pB,IAAI2H,GAE5B,EAAKgD,MAAMgf,aAAaK,OAAOriB,GAEjC,EAAKoD,SAAS,CAAE4e,aAAc,EAAKhf,MAAMgf,gBAE3C9O,gBAAiB,SAAClT,EAAIoiB,GAChBA,EACF,EAAKpf,MAAMnD,aAAaxH,IAAI2H,GAE5B,EAAKgD,MAAMnD,aAAawiB,OAAOriB,GAEjC,EAAKoD,SAAS,CAAEvD,aAAc,EAAKmD,MAAMnD,iBAI7C,OACE,kBAACC,EAAqBxX,SAAtB,CAA+BC,MAAOulB,GACnClmB,KAAKC,MAAMW,c,GA/BaC,IAAMoH,a,gCCvDvC,sGAAO,IAAM2vB,EAAU,UACVtlB,EAAc,cAGdsjB,EAAuB,SAACjS,EAAM9B,GAAP,gBAAqB8B,EAArB,YAA6B9B,EAAOyU,iB,gICsBlEoE,E,uKACK,IAEFj4B,EAAWzC,KAAKC,MAAhBwC,QAEP,OAAO,yBAAK0D,UAAW1D,EAAQsI,MAE9B,kBAAC,IAAD,CAAO1E,UAAW,EAAGF,UAAW1D,EAAQk4B,cACvC,kBAAC,IAAD,CAAkBC,eAAe,EAAMC,UAAW,EAAGv0B,MAAO,CAACS,YAAa,IAAKE,KAAM,KACrF,kBAAC,IAAD,CAAYT,QAAQ,KAAKlF,MAAM,WAA/B,wB,GATkBT,IAAMoH,WAgBblH,SApCA,SAAAC,GAAK,MAAK,CACxB+J,KAAM,CACL7J,gBAAiB,UACjByF,QAAS,OACTC,cAAe,SACf8D,MAAO,OACP4B,OAAQ,OACR1B,WAAY,UAEb+vB,aAAc,CACbjwB,MAAO,IACP4B,OAAQ,IACRzF,UAAW,IACXF,QAAS,OACTC,cAAe,MACfgE,WAAY,SACZQ,eAAgB,aAoBHrK,CAAmB25B,I,uICtC5Bhc,E,MAAkBc,K,EAMpB/f,YAAsB,CAAEif,kBAAiBC,SAL5B,cAGJoa,E,EAATp5B,Q,EACAC,YAI8BiB,IAAMoH,W,8FCbjC,SAASylB,EAAqBxP,GACnC,8CAAO,WAAgB2L,GAAhB,mCAAA1lB,EAAA,6DAEH22B,EAGEjR,EAHFiR,eACAC,EAEElR,EAFFkR,mBACAC,EACEnR,EADFmR,wBAJG,SAOgB9c,EAAY0P,aAP5B,cAOCqN,EAPD,gBAQkB/c,EAAYkP,eAR9B,cAQCN,EARD,OASGvqB,EAAcuqB,EAASA,SAAS,GAAhCvqB,UATH,UAUiB2b,EAAYgd,oBAAoB34B,GAVjD,eAUCqkB,EAVD,OAYCuU,EAAShP,KAAKC,UAAU,CAC5B6O,OAAQ9O,KAAKiP,MAAMH,GACnBrU,UACAyU,SAAU,IACT,KAAM,GAEHC,EAAO,IAAIC,KAAK,CAACJ,GAAS,CAACK,KAAM,qBAEjC3J,EAAM9sB,OAAO02B,IAAIC,gBAAgBJ,IAEjCrrB,EAAO0rB,SAASC,cAAc,MAC/BC,KAAOhK,EACZ5hB,EAAK6rB,SAAWhB,EAChB/yB,QAAQC,IAAIiI,GACZA,EAAK8rB,QA1BA,gCA2BShB,EA3BT,YA2B+BD,EA3B/B,cA2BmDE,EA3BnD,YA2B8EF,EA3B9E,kDAAP,wD,i6ICDF,+EAEMkB,EAFN,OAEuBn7B,EAAMklB,cAAc,MAC3CiW,EAAerkB,YAAc,iB,IAGdjX,EAAas7B,EAAbt7B,SAGR,SAAS4d,IAEd,OADgB1b,qBAAWo5B,GACZnK,M,8FCXV,SAASjC,EAAU1R,EAAa3b,GACrC,6BAAO,wCAAA4B,EAAA,sEAEgB+Z,EAAY0P,aAF5B,cAECqN,EAFD,gBAGiB/c,EAAYgd,oBAAoB34B,GAHjD,OAGCqkB,EAHD,OAICqV,EAAiB9P,KAAKiP,MAAMjP,KAAKC,UAAUxF,IAEjD7e,QAAQC,IAAI,sBACZi0B,EAAeC,QAAQrc,SAAQ,SAAClc,GAC9BA,EAAEyyB,QAAQ+F,KAAKx7B,MAAMy7B,aAAe,KACpCz4B,EAAEyyB,QAAQ+F,KAAKx7B,MAAM07B,OAAS,KAE9B14B,EAAE4wB,SAAS4H,KAAKx7B,MAAMy7B,aAAe,KACrCz4B,EAAE4wB,SAAS4H,KAAKx7B,MAAM07B,OAAS,QAG3BlB,EAAShP,KAAKC,UAClB,CACE6O,OAAQ9O,KAAKiP,MAAMH,GACnBrU,QAASqV,EACTZ,SAAU,IAEZ,KACA,GAGIC,EAAO,IAAIC,KAAK,CAACJ,GAAS,CAAEK,KAAM,qBAClC3J,EAAM9sB,OAAO02B,IAAIC,gBAAgBJ,IAEjCrrB,EAAO0rB,SAASC,cAAc,MAC/BC,KAAOhK,EACZ5hB,EAAK6rB,SAAL,wBAAiCv5B,EAAjC,YAA8C+5B,KAAKC,MACjDC,KAAKC,MAAQ,KADf,SAGA10B,QAAQC,IAAIiI,GACZA,EAAK8rB,QAlCA,8C,iCCDT,kCAYoBrsB,QACW,cAA7B3K,OAAOoD,SAASu0B,UAEe,UAA7B33B,OAAOoD,SAASu0B,UAEhB33B,OAAOoD,SAASu0B,SAASvU,MACvB,2DA8GC,SAASwU,IACV,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMC,MAAK,SAAAC,GACjCA,EAAaL,kB,mPC3HZ,SAASM,EAAqBh9B,GAAQ,IACnCi9B,EAA8Cj9B,EAA9Ci9B,mBAAoBC,EAA0Bl9B,EAA1Bk9B,sBACtBC,EAAYC,cAFwB,EAIZp6B,mBAAS,MAJG,mBAInCq6B,EAJmC,KAI1BC,EAJ0B,OAKdt6B,mBAAS,MALK,mBAKnCg4B,EALmC,KAK3BuC,EAL2B,KAiC1C,OA3BA30B,qBAAU,WACR,IAAIu0B,EAAUK,YAAaL,EAAUM,QAArC,CAEA,IAAMC,EAAiB,kB,2CACrBC,CAAgCR,EAAUS,QAElC,uCAAG,8BAAA15B,EAAA,sEACmBw5B,IADnB,gBACHzf,EADG,EACHA,YACRqf,EAAWrf,GACXA,EAAY4f,aAAaC,GAAG,iBAA5B,sBAA8C,4BAAA55B,EAAA,sEACvB+Z,EAAY0P,aADW,OACtCqN,EADsC,OAE5CuC,EAAUvC,GAFkC,4CAHnC,2CAAH,qDAQV3N,MACC,CAAC8P,EAAUK,UAAWL,EAAUM,UAEnC70B,qBAAU,WACJy0B,GACQ,uCAAG,4BAAAn5B,EAAA,sEACUm5B,EAAQ1P,aADlB,OACLqN,EADK,OAEXuC,EAAUvC,GAFC,2CAAH,oDAIV3N,KAED,CAACgQ,IAECrC,EAKH,kBAAC,IAAD,CACE/c,YAAaof,EACbU,kBAAmBV,EAAQQ,aAC3BZ,mBAAoBA,EACpBC,sBAAuBA,GAEvB,kBAAC,IAAD,CACE/8B,oBAAqB66B,EACrB/6B,MAAM,YACNI,SAAS,mCAET,kBAAC,IAAD,CAAU4d,YAAaof,GAAUr9B,EAAMW,YAfpC,kBAACygB,EAAA,EAAD,MAqBJ,SAAS4c,EAA0Bh+B,GAAQ,IACxCi9B,EAA8Cj9B,EAA9Ci9B,mBAAoBC,EAA0Bl9B,EAA1Bk9B,sBADmB,EAEnBl6B,mBAAS,MAFU,mBAExCg4B,EAFwC,KAEhCuC,EAFgC,KAGvCtf,EAAgBje,EAAhBie,YAqBR,OApBArV,qBAAU,YACE,uCAAG,sBAAA1E,EAAA,sDACX+Z,EAAY4f,aAAaC,GAAG,iBAA5B,sBAA8C,4BAAA55B,EAAA,sEACvB+Z,EAAY0P,aADW,OACtCqN,EADsC,OAE5CuC,EAAUvC,GAFkC,4CADnC,2CAAH,qDAMV3N,MAGFzkB,qBAAU,WACJqV,GACQ,uCAAG,4BAAA/Z,EAAA,sEACU+Z,EAAY0P,aADtB,OACLqN,EADK,OAEXuC,EAAUvC,GAFC,2CAAH,oDAIV3N,KAED,CAACpP,IAEC+c,EAKH,kBAAC,IAAD,CACE/c,YAAaA,EACb8f,kBAAmB9f,EAAY4f,aAC/BZ,mBAAoBA,EACpBC,sBAAuBA,GAEvB,kBAAC,IAAD,CACE/8B,oBAAqB66B,EACrB/6B,MAAM,YACNI,SAAS,wCAET,kBAAC,IAAD,CAAe4d,YAAaA,GACzBje,EAAMW,YAhBN,kBAACygB,EAAA,EAAD,M,4CAwBX,WAA+Cwc,GAA/C,qBAAA15B,EAAA,6DACM82B,EAAS9O,KAAKC,UAAUyR,EAAK5C,QAE3BI,EAAWwC,EAAKxC,UAAY,GAC5ByC,EAAe,IAAI1I,IAEnBlX,EAAc,CAClB4f,eACAI,WAAW,WAAD,4BAAE,sBAAA/5B,EAAA,+EACHI,QAAQ6vB,QAAQ,CACrB+J,OAAQ,CACNC,QAAS,cACTC,eAAgB,OAJV,2CAAF,kDAAC,GAQXnD,oBAAoB,WAAD,4BAAE,WAAO34B,GAAP,SAAA4B,EAAA,+EACZI,QAAQ6vB,QAAQyJ,EAAKjX,UADT,2CAAF,mDAAC,GAGpBgH,WAbkB,WAchB,OAAOrpB,QAAQ6vB,QAAQ6G,IAEzBqD,iBAhBkB,WAiBhB,OAAO/5B,QAAQ6vB,QAAQ,CACrBmK,OAAQ,eAGZnR,aArBkB,WAsBhB,OAAO7oB,QAAQ6vB,QAAQ,CACrBtH,SAAU,CACR,CAAEvqB,UA/Ba,kBA+BF4tB,YAAY,IAAIqM,MAAOgC,cAAepO,SAAS,OAIlEpQ,WAAY,SAACsB,EAAYphB,GACvB,IAAMu+B,EAAmBnd,EAAW4K,gBAAgBhsB,GAGpD,OAFA+6B,EAASwD,EACTX,EAAaxI,KAAK,kBACX/wB,QAAQ6vB,WAEjBsK,aAAc,SAACvI,GACb,OAAO5xB,QAAQ6vB,QAAQ,CAAEiH,SAAUA,EAASlF,IAAc,MAE5DwI,YAAa,SAACh6B,EAAawxB,GACzB,IAAMyI,EAAkBvD,EAASlF,IAAc,GAC/CyI,EAAgBv+B,KAAKsE,GACrB02B,EAASlF,GAAayI,GAGxBC,mBA3CkB,WA4ChB,MAAO,CACLC,mBAAmB,KAnD3B,kBAwDS,CAAE5gB,gBAxDX,4C,6IC1GO,SAAS6gB,EAAT,GAAyG,IAAlFr4B,EAAiF,EAAjFA,MAAO0L,EAA0E,EAA1EA,YAAa/B,EAA6D,EAA7DA,SAAoB2uB,GAAyC,EAAnDp+B,SAAmD,EAAzCo+B,SAAyC,IAAhCC,0BAAgC,MAAX,aAAW,EAC7G,OACE,6BACE,yBAAK34B,MAAO,CAACkF,WAAY,EAAGE,cAAe,EAAGP,YAAa,IACzD,6BACE,kBAACkJ,EAAA,EAAD,CAAY7N,QAAQ,YAAY6G,UAAU,OAAO/G,MAAO2H,KAAmBvH,GAC3E,kBAAC2N,EAAA,EAAD,CAAYhH,UAAU,OAAO/G,MAAO,CAACuF,WAAY,EAAGnK,SAAU,KAAM2O,GAAY,WAElF,kBAAC,IAAD,CAAsB1P,MAAOyR,EACPhL,MAAM,cACNtD,SAAU,SAACnD,GACTs+B,EAAmBD,EAAS1sB,IAAa3R,Q,4FCYnE+B,GAAYoI,aAAW,SAAC9J,GAAD,MAAY,CACvCS,SAAU,CACRiJ,MAAO,OACPc,WAAY,GACZ/J,SAAU,IACVy9B,UAAW,UAEbnrB,MAAO,CACLlN,UAAW,GACXa,aAAc,IAEhBtB,OAAQ,CACNO,QAAS,OACTC,cAAe,SAEfgE,WAAY,aACZY,WAAY,GACZjF,KAAM,EACNmF,cAAe,GAEjB2G,cAAe,CACb1L,QAAS,OACTC,cAAe,SACf+D,aAAc,GACdD,MAAO,OAETy0B,gBAAiB,CACf3zB,WAAY,GACZE,cAAe,IAEjB0zB,OAAQ,CACNz4B,QAAS,OACTyE,eAAgB,aAChBR,WAAY,SACZD,aAAc,GACd9D,UAAW,GACX3F,gBAAiB,0BAEnBm+B,YAAa,CACX94B,KAAM,EACNI,QAAS,OACTC,cAAe,cAIN04B,GAAW,SAAC,GAA2B,EAAzBnX,MAAyB,EAAlBjK,YAAmB,IAC7C8P,EAAcC,cACpB,OACE,kBAACsR,EAAA,EAAD,CAAM74B,MAAM,gBAAgB84B,aAAa,GACvC,kBAACD,EAAA,EAAKrR,OAAN,CAAaC,MAAM,IACnB,kBAACoR,EAAA,EAAKnR,KAAN,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CACEI,OAAK,EACL7K,KAAMqK,EAAYyR,SAClBpyB,UAAWqyB,KAEb,kBAAC,IAAD,CACE/b,KAAMqK,EAAY2R,gBAClBtyB,UAAWuyB,SAQVF,GAAmB,WAC9B,IAAMj9B,EAAUC,KAER+1B,EADuB71B,qBAAWqP,KAAlCC,mBACAumB,UAER,OACE,yBAAKtyB,UAAW1D,EAAQhB,UACA,IAArBg3B,EAAUj4B,QACT,kBAACyT,EAAA,EAAD,CACEvN,MAAM,+BACNwN,QAAS,qDACwBsc,KADxB,oGAGmBqP,KAHnB,OAIjBpP,SAGKgI,EAAUj4B,OAAS,GAClB,oCACE,kBAAC6T,EAAA,EAAD,CAAY7N,QAAQ,KAAKlF,MAAM,WAA/B,iBAGA,kBAAC,IAAD,OAGJ,6BACGm3B,EAAUn0B,KAAI,SAACX,GACd,OACE,kBAAC,IAAD,CAAuBke,OAAQle,EAAEke,OAAQC,OAAQne,EAAEme,QACjD,kBAAC,IAAiB0F,SAAlB,MACG,YAKM,IAJLtF,EAII,EAJJA,mBACA+c,EAGI,EAHJA,mBACAa,EAEI,EAFJA,gBACAt9B,EACI,EADJA,WAEMu9B,EAAiBrwB,QACrBwS,EAAmBgV,cAAcxzB,MAC/B,SAACC,GAAD,OAAOA,EAAEwzB,YAAY6I,oBAIzB,OACE,yBAAK75B,UAAW1D,EAAQsR,OACtB,6BACE,yBAAK5N,UAAW1D,EAAQ2D,QACtB,kBAAC,IAAD,CACEzF,MAAOm/B,EAAgBt9B,EAAYo1B,KACnCxwB,MAAM,8BACNtD,SAAU,SAACnD,GACTs+B,EAAmBz8B,EAAYo1B,IAASj3B,MAI5C,yBAAK2F,MAAO,CAAEC,KAAM,KAEpB,kBAACkd,EAAA,EAAD,CACEE,KAAMzB,EAAmB0B,SACzB/B,OAAQK,EAAmBL,UAI/B,yBAAK1b,UAAW1D,EAAQ4P,eACtB,kBAAC,IAAD,CACE1R,MAAOm/B,EAAgBt9B,EAAY8P,KACnClL,MAAM,uBACNtD,SAAU,SAACnD,GACTs+B,EACEz8B,EACA8P,IACA3R,OAMR,yBAAKwF,UAAW1D,EAAQ48B,aACtB,yBAAK/4B,MAAO,CAAEC,KAAM,KAEpB,kBAAC4N,EAAA,EAAD,CAAOhO,UAAW1D,EAAQ28B,OAAQ/4B,UAAW,GAC3C,kBAACuN,EAAA,EAAD,CACEvG,UAAWyjB,IACXvI,GAAE,8BAAyBrG,EAAmBJ,OAA5C,oBAA8DI,EAAmBL,QACnF5a,KAAK,SACL3F,MAAM,UACN2+B,QAAS,kBAAC,IAAD,OALX,sBASA,yBAAK35B,MAAO,CAAEC,KAAM,KAEnBw5B,GACC,kBAAC1rB,EAAA,EAAD,CACE7N,QAAQ,WACRlF,MAAM,gBACNgF,MAAO,CAAES,YAAa,KAHxB,oBASF,kBAACsN,EAAA,EAAD,CACE7N,QAAQ,WACRlF,MAAM,gBACNgF,MAAO,CAAES,YAAa,IAHxB,aAKa,KAEb,yBACET,MAAO,CACLO,UAAW,EACXF,QAAS,OACTiE,WAAY,WAGbsX,EAAmByV,UAAUrzB,KAAI,SAAC47B,GACjC,OACE,kBAAC,IAAD,CACE94B,MAAO84B,EAAIl2B,WACXm2B,QAAS,UACT7+B,MAAM,QACNgF,MAAO,CAAES,YAAa,wBAoB7C64B,GAA+B,SAAC3/B,GAAW,IAAD,EAC1BmgC,cAAnBte,EAD6C,EAC7CA,OAAQD,EADqC,EACrCA,OAEhB,OACE,kBAAC,IAAD,CAAuBA,OAAQA,EAAQC,OAAQA,GAC7C,kBAAC,IAAiB0F,SAAlB,MACG,gBAAGtF,EAAH,EAAGA,mBAAH,OACC,kBAAC,GAAD,CAAcA,mBAAoBA,SAO/Bme,GAAe,SAACpgC,GAAW,IAC9BiiB,EAAuBjiB,EAAvBiiB,mBACFzf,EAAUC,KACV49B,EAAUpe,EAAmBsB,gBAC7B+c,EAAW,UAAMre,EAAmBwB,WAAzB,YAAuCxB,EAAmB0B,UAC3E4c,YAAa,GAAD,OAAIF,GAAWC,EAAf,yBALyB,MAOa39B,qBAAWqP,KAArD8P,EAP6B,EAO7BA,WAAY7hB,EAPiB,EAOjBA,MACZy4B,EAR6B,EAOVzmB,mBACnBymB,gBACF8H,EAAkB1e,EAAWE,aAAa/hB,GAC1CwgC,EAAgB,IAAIC,gBAAchI,EAAiB8H,GACzD,OACE,kBAAC,IAAD,KACE,yBAAKt6B,UAAW1D,EAAQhB,SAAU6E,MAAO,CAAEkF,WAAY,KACrD,kBAAC,IAAiBgc,SAAlB,MACG,YAA0D,IAAvDyX,EAAsD,EAAtDA,mBAAoBa,EAAkC,EAAlCA,gBAAiBt9B,EAAiB,EAAjBA,WAC/B00B,EAA6BhV,EAA7BgV,cAAeS,EAAczV,EAAdyV,UAEjBiJ,EAA+BC,IACnClJ,GACA,SAACh0B,GAAD,OAAOA,EAAEqG,cAGL82B,EAAej/B,OAAOk/B,KAAKH,GAC9BI,OACA18B,KAAI,SAACX,GACJ,MAAO,CACLqG,WAAYrG,EACZmmB,aAAc8W,EAA6Bj9B,EAAEkB,YAC1CP,KAAI,SAAC47B,GAAD,OAASA,EAAIzI,aAAauI,iBAAmB,aACjDgB,WAIT,OACE,6BACE,kBAAC,IAAD,CACErgC,MAAOm/B,EAAgBt9B,EAAYo1B,KACnCxwB,MAAM,8BACNtD,SAAU,SAACnD,GACTs+B,EAAmBz8B,EAAYo1B,IAASj3B,MAG5C,kBAAC,IAAD,CACEA,MAAOm/B,EAAgBt9B,EAAY8P,KACnClL,MAAM,uBACNtD,SAAU,SAACnD,GACTs+B,EAAmBz8B,EAAY8P,IAAa3R,MAIhD,kBAAC,IAAD,CAAY2F,MAAO,CAAEO,UAAW,GAAIa,aAAc,MAElD,yBAAKvB,UAAW1D,EAAQ08B,iBACtB,kBAAC1b,EAAA,EAAD,CACEE,KAAMzB,EAAmB0B,SACzB/B,OAAQK,EAAmBL,SAG7B,yBAAKvb,MAAO,CAAEO,UAAW,IACtBqb,EAAmBqU,eAAejyB,KAAI,SAACX,GAAD,OACrC,kBAACo7B,EAAD,CACEr4B,MAAO/C,EAAE2M,KACT0uB,QAASr7B,EAAEme,OACXmd,mBAAoBA,EACpB7sB,YAAazO,EAAEyO,mBAMvB,kBAAC,IAAD,CAAY9L,MAAO,CAAEO,UAAW,GAAIa,aAAc,MAElD,kBAAC,IAAD,KACE,kBAACkiB,EAAA,EAAD,CACEnkB,WAAS,EACTokB,QAAS,CACPC,aAAcoN,EACX5yB,KAAI,SAACX,GAAD,OAAOA,EAAEwzB,YAAY6I,mBACzB/7B,QAAO,SAACN,GAAD,QAASA,MAErBomB,kBAAmB,SAAChgB,GAClB,IAAMqO,EAAE,UAAM5V,EAAN,iBACR,OACE,kBAAC,IAAD,CACE7B,MAAOm/B,EAAgB1nB,EAAI9F,KAC3BlL,MAAM,2BACNtD,SAAU,SAACnD,GACTs+B,EAAmB7mB,EAAI9F,IAAa3R,OAK5CspB,cAAe,SAAClgB,GACd,IAAMk3B,EAAI/J,EAAcxzB,MACtB,SAACC,GAAD,OAAOA,EAAEwzB,YAAY6I,kBAAoBj2B,KAErCm3B,EACJD,GACA57B,yBACEq7B,EAAcS,aACZC,mBAASH,EAAE9J,YAAYkK,WAI7B,OACEH,GACE,kBAAC,IAAD,CACE96B,OACE,kBAAC,IAAD,CACEgC,WAAY,CAAE1G,SAAU,GAAIJ,MAAO,SACnC6G,SAAU,CAAC,eAAgB4B,MAI/B,kBAAC,IAAD,CAAiBR,QAAS23B,QAOpC,kBAACtX,EAAA,EAAD,CACEC,QAASiX,EACT/W,kBAAmB,SAAC/f,EAAYD,GAC9B,IAAMqO,EAAE,UAAM5V,EAAN,YAAoBwH,EAApB,aACR,OACE,kBAAC,IAAD,CACErJ,MAAOm/B,EAAgB1nB,EAAI9F,KAC3BlL,MAAK,UAAK4C,EAAL,yBACLlG,SAAU,SAACnD,GACTs+B,EAAmB7mB,EAAI9F,IAAa3R,OAK5CqpB,eAAgB,SAAChgB,EAAYD,GAC3B,IAAMwqB,EAAWoD,EAAUj0B,MACzB,SAACC,GAAD,OACEA,EAAEqG,YAAcA,GAChBrG,EAAE8zB,aAAauI,kBAAoBj2B,KAGjCm3B,EACJ3M,GACAlvB,yBACEq7B,EAAcS,aACZC,mBAAS7M,EAASkD,aAAa4J,WAIrC,OACEH,GACE,kBAAC,IAAD,CACE96B,OACE,kBAAC,IAAD,CACEgC,WAAY,CAAE1G,SAAU,GAAIJ,MAAO,SACnC6G,SAAU,CAAC,GAAD,OACL6B,EADK,kBAERD,MAKN,kBAAC,IAAD,CAAiBR,QAAS23B,SAStC,yBAAK56B,MAAO,CAAEgG,OAAQ,kB,UCjahCg1B,GAAyBzgC,IAAM0gC,MAAK,kBACxC,uDAGiC1gC,IAAM0gC,MAAK,kBAC5C,iCAGK,SAASC,GAAUvhC,GACxB,IAAM+tB,EAAcC,cACpB,OACE,kBAAC,WAAD,CAAUwT,SAAU,kBAAC/G,GAAA,EAAD,OAClB,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOgH,QAAM,EAAC/d,KAAMqK,EAAYyR,SAAUpyB,UAAWiyB,KACrD,kBAAC,IAAD,CACEoC,QAAM,EACN/d,KAAMqK,EAAYM,UAClBjhB,UAAW0gB,MAGX,kBAAC,IAAD,CACE2T,QAAM,EACN/d,KAAMqK,EAAY2T,iBAClBt0B,UAAWi0B,MAIdM,EASD,kBAAC,IAAD,CAAUrZ,GAAItoB,EAAM4hC,KAAO7T,EAAYM,UAAYN,EAAYyR,a,iCClB1DqC,GAAb,WACE,WAAoB5jB,GAA4B,yBAA5BA,cADtB,+FAII+c,EACAoD,EACA0D,EACAC,GAPJ,0FASW,CACLjb,OAAQvH,OACRyiB,iBAAkB,KAXxB,uLAgBIC,GAhBJ,yFAkB0BliC,KAAKke,YAAYgd,oBJoElB,mBItFzB,cAkBUlL,EAlBV,OAmBUrrB,EAAcqrB,EAAQkM,QAAQx4B,MAClC,SAACqR,GAAD,OAAyBA,EAAEotB,OAASD,KApB1C,kBAsBW,CACLv9B,gBAvBN,8GA4Bay9B,GAAb,WACE,WACUlkB,EACAlb,EACAq/B,EACAxqB,EACAmK,GACP,yBALO9D,cAKR,KAJQlb,iBAIR,KAHQq/B,aAGR,KAFQxqB,QAER,KADQmK,WANZ,qDAUI,OAAOhiB,KAAKqiC,WAAWtb,SAV3B,yJAcUF,EAAgByb,iBAAeC,UACnC7f,mBAAiBmE,cAAc7mB,KAAK6X,MAAO7X,KAAKgiB,WAftD,kBAkBWzd,QAAQ6vB,QAAQ,CAAEvc,MAAOgP,KAlBpC,6RAsB0B7mB,KAAKke,YAAYgd,oBJoClB,mBI1DzB,cAsBUlL,EAtBV,OAuBUwS,EAAat9B,aAAW+hB,aAC5B+I,EAAQkM,QAAQ53B,KAAI,SAACyQ,GAAD,OAAO7P,aAAWC,gBAAgB4P,OAElD0tB,EAAyB,IAAI1jB,cAAYC,IAAIC,SAASxb,KAAKi/B,QAAQC,uBACnEC,EAAUH,EAAuBI,sBACrC7iC,KAAKgiB,SACLwgB,GAEItR,EAAOnS,cAAY+jB,yBAAyBC,aAAaH,GAEzDnR,EAASuR,mBAAiBC,cAAc/R,EAAMlxB,KAAKgiB,UAjC7D,kBAmCWzd,QAAQ6vB,QAAQ3C,IAnC3B,wQAuC0BzxB,KAAKke,YAAYgd,oBJmBlB,mBI1DzB,cAuCUlL,EAvCV,yBAyCWzrB,QAAQ6vB,QAAQ,CACrB8O,0BAA2BlT,EAAQkM,QAAQ17B,OAAOqE,WAClDs+B,2BAA4B,OA3ClC,qLA+CwB1/B,GA/CxB,uFAgD8BzD,KAAKgD,eAAeyB,gBAC5ChB,EAAKiB,yBAjDX,YAgDUC,EAhDV,QAmDoBA,YAnDpB,yCAoDaU,yBACLqd,mBAAiB0gB,oBACf3/B,EACAzD,KAAKgiB,SACL9c,aAAWC,gBAAgBR,EAAYA,gBAxDjD,gCA4Da,MA5Db,sLAiEIlB,EACAkB,GAlEJ,0FAoEW29B,iBAAeC,UACpB7f,mBAAiB2gB,mBAAmB5/B,EAAMkB,EAAa3E,KAAKgiB,YArElE,2LA0EIve,EACAyF,EACA5F,GA5EJ,qFA8EUmG,EAAchG,EAAK6/B,kBAAkBp6B,GAEvCq6B,EAAe,IACfjgC,EAjFR,gCAkF2BiB,QAAQC,IAC3B89B,iBAAeC,UAAU9+B,EAAKwF,qBAAqB3E,IAAnD,uCAAuD,WAAOX,GAAP,iBAAAQ,EAAA,sEACvB,EAAKnB,eAAeyB,gBAAgBd,GADb,uBAC7CgB,EAD6C,EAC7CA,YAD6C,kBAE9CO,aAAWC,gBAAgBR,IAFmB,2CAAvD,wDAnFR,OAkFM4+B,EAlFN,6BAyFMA,EAAe,CAACr6B,GAzFtB,cA4FUQ,EAAejG,EAAK+/B,mBACxBxjC,KAAKgiB,SACL9c,aAAW0a,gBAAgB2jB,GAC3BjgC,GA/FN,kBAkGW,CACLmG,cACAC,aAAcA,EAAauF,MAC3B7J,WAAYsE,EAAatE,aArG/B,mH,UClCe,SAASq+B,GAAgBxjC,GACtC,IAAMkoB,EAAQub,cACNC,EAAcvD,cAAduD,UAEF/c,EAAUgd,YAAe,CAC7BD,UAAWA,EACXE,yBAA0B,qBAGtB1G,EAAqB,uCAAG,WAAOjf,EAAa3b,GAApB,SAAA4B,EAAA,+EACrB,IAAI29B,GAAsB5jB,IADL,2CAAH,wDAIrBgf,EAAkB,uCAAG,WACzBhf,EACAlb,EACA8gC,EACAC,EACAhC,EACA5D,EACA57B,GAPyB,IASVyhC,EATU,iBAAA7/B,EAAA,iGAAAA,EAAA,MASzB,4CAAAA,EAAA,sEAEwB+Z,EAAYgd,oBAAoB34B,GAFxD,OAEQytB,EAFR,OAGQzO,EAAiB,IAAIC,oBACzB,YACA,YACA,aANJ,EAYMyiB,sEACAH,EACFviB,EACAwgB,GALAmC,EAVJ,EAUIA,UACAliB,EAXJ,EAWIA,SAMEnK,EAAQssB,cAAYC,wCAjB1B,cAkB4BpU,EAAQkM,SAlBpC,IAkBE,2BAAWv3B,EAAgC,QACvCkT,EAAQssB,cAAYE,+BACpBH,EACAliB,EACA9c,aAAWC,gBAAgBR,GAC3BA,EAAYw9B,KACZtqB,GAxBN,uDA2BS,CACLA,QACAmK,WACAkiB,cA9BJ,4CATyB,uBASVF,EATU,oDA2CSA,IA3CT,uBA2CjBnsB,EA3CiB,EA2CjBA,MAAOmK,EA3CU,EA2CVA,SA3CU,kBA6ClB,IAAIogB,GACTlkB,EACAlb,EACAm7B,EACAtmB,EACAmK,IAlDuB,2CAAH,kEAsDxB,OACE,kBAACga,GAAA,EAAD,CAAgBr7B,MAAO,CAAEgjB,KAAMwE,EAAMxE,KAAMkO,IAAK1J,EAAM0J,MACpD,kBAAC,IAAD,CAA6BlxB,MAAOimB,GAClC,kBAACqW,EAAD,CACEE,sBAAuBA,EACvBD,mBAAoBA,GAEpB,kBAACsE,GAAD,S,wBCvEG8C,GAAb,WACE,WACUthC,EACAqb,EACA8f,EACAnc,GACP,yBAJOhf,iBAIR,KAHQqb,UAGR,KAFQ8f,SAER,KADQnc,WALZ,qDAQI,OAAOhiB,KAAKm+B,OAAOpX,SARvB,6JAYU8K,EAZV,UAYmB7xB,KAAKqe,QAZxB,mBAa4Brc,kBAAegV,QAAQ6a,GAbnD,cAaU0S,EAbV,OAcU1sB,EAAQkH,cAAYylB,iCAAiCC,OACzDF,GAfN,kBAiBW,CACL1sB,MAAOyqB,iBAAeC,UACpB7f,mBAAiBmE,cAAchP,EAAO7X,KAAKgiB,aAnBnD,8QAyBU6P,EAzBV,UAyBmB7xB,KAAKqe,QAzBxB,+BA0BwBrc,kBAAegV,QAAQ6a,GA1B/C,cA0BU4C,EA1BV,OA0BqDvD,KAC3CO,EAASuR,mBAAiBC,cAAcxO,EAAMz0B,KAAKgiB,UA3B7D,kBA4BWyP,GA5BX,+PAgCUI,EAhCV,UAgCmB7xB,KAAKqe,QAhCxB,4BAiCWrc,kBAAegV,QAAQ6a,IAjClC,qLAoCwBpuB,GApCxB,uFAqC8BzD,KAAKgD,eAAeyB,gBAC5ChB,EAAKiB,yBAtCX,YAqCUC,EArCV,QAwCoBA,YAxCpB,yCAyCaU,yBACLqd,mBAAiB0gB,oBACf3/B,EACAzD,KAAKgiB,SACL9c,aAAWC,gBAAgBR,EAAYA,gBA7CjD,gCAiDa,MAjDb,sLAsDIlB,EACAkB,GAvDJ,0FAyDW29B,iBAAeC,UACpB7f,mBAAiB2gB,mBAAmB5/B,EAAMkB,EAAa3E,KAAKgiB,YA1DlE,2LA+DIve,EACAyF,EACA5F,GAjEJ,qFAmEUmG,EAAchG,EAAK6/B,kBAAkBp6B,GAEvCq6B,EAAe,IACfjgC,EAtER,gCAuE2BiB,QAAQC,IAC3B89B,iBAAeC,UAAU9+B,EAAKihC,gBAAgBpgC,IAA9C,uCAAkD,WAAOX,GAAP,iBAAAQ,EAAA,sEAClB,EAAKnB,eAAeyB,gBAAgBd,GADlB,uBACxCgB,EADwC,EACxCA,YADwC,kBAEzCO,aAAWC,gBAAgBR,IAFc,2CAAlD,wDAxER,OAuEM4+B,EAvEN,6BA8EMA,EAAe,CAACr6B,GA9EtB,cAiFUQ,EAAejG,EAAK+/B,mBACxBxjC,KAAKgiB,SACL9c,aAAW0a,gBAAgB2jB,GAC3BjgC,GApFN,kBAuFW,CACLmG,cACAC,aAAcA,EAAauF,MAC3B7J,WAAYsE,EAAatE,aA1F/B,mHA+Fau/B,GAAb,WACE,WAAoBtmB,GAAkB,yBAAlBA,UADtB,+FAII4c,EACAoD,EACA0D,EACAC,GAPJ,8EASUnQ,EATV,UASmB7xB,KAAKqe,QATxB,4BAUWrc,kBAAe4iC,SAAS/S,EAAK,CAClCwM,iBACA0D,qBACA9G,SACA+G,aAdN,mJAmBIE,GAEA,IAAMrQ,EAAG,UAAM7xB,KAAKqe,QAAX,yBAAmC6jB,GAC5C,OAAOlgC,kBAAegV,QAAQ6a,OAtBlC,KCzGe,SAASgT,GAAS5kC,GAC/B,IAAMkoB,EAAQub,cACNoB,EAAU1E,cAAV0E,MAEFhH,EAAe,IAAI1I,IACnBlX,EAAc,IAAI6T,qBAAkB+S,EAAOhH,GAE3CX,EAAqB,uCAAG,WAAgBjf,EAAa3b,GAA7B,eAAA4B,EAAA,6DACtBka,EADsB,qBACEymB,EADF,qBACoBviC,GADpB,kBAErB,IAAIoiC,GAAuBtmB,IAFN,2CAAH,wDAIrB6e,EAAkB,uCAAG,WACzBhf,EACAlb,EACAi4B,EACAjZ,EACA+f,EACA5D,EACA57B,GAPyB,eAAA4B,EAAA,6DASnBka,EATmB,qBASKymB,EATL,qBASuBviC,EATvB,kBAS0C47B,EAAOpX,QATjD,kBAUlB,IAAIud,GAAoBthC,EAAgBqb,EAAS8f,EAAQnc,IAVvC,2CAAH,kEAaxB,OACE,kBAACga,GAAA,EAAD,CAAgBr7B,MAAO,CAAEgjB,KAAMwE,EAAMxE,KAAMkO,IAAK1J,EAAM0J,MACpD,kBAACoM,EAAD,CACE/f,YAAaA,EACbgf,mBAAoBA,EACpBC,sBAAuBA,GAEvB,kBAACqE,GAAD,QCtCR,IAAM9+B,GAAYoI,aAAW,SAAC9J,GAAD,MAAY,CACvCm7B,KAAM,CACJx1B,QAAS,OACTiE,WAAY,SACZQ,eAAgB,SAChBkB,OAAQ,aAIG,SAASy4B,GAAY9kC,GAClC,IAAMwC,EAAUC,KACWzC,EAAnByG,MAAmBzG,EAAZiU,QAEf,OACE,yBAAK/N,UAAW1D,EAAQ05B,MACtB,yBAAK71B,MAAO,CAAEO,WAAY,MACxB,kBAACoN,EAAA,EAAD,CACEvN,MAAO,gCACPwN,QAAS,mEAEiBsc,KAFjB,+CAGgBqP,KAHhB,sDAIuBmF,KAJvB,OAKjBvU,WClBa,SAASwU,GAAgBhlC,GACtC,IAAMkoB,EAAQub,cACNC,EAAcvD,cAAduD,UAEF/c,EAAUgd,YAAe,CAC7BD,UAAWA,EACXE,yBAA0B,qBAG5B,OACE,kBAAC7H,GAAA,EAAD,CAAgBr7B,MAAO,CAAEgjB,KAAMwE,EAAMxE,KAAMkO,IAAK1J,EAAM0J,MACpD,kBAAC,IAAD,CAA6BlxB,MAAOimB,GAClC,kBAACqW,EAAD,KACE,kBAACuE,GAAD,S,oFCbG0D,GAAY,SAACjlC,GAAW,IAAD,EACVY,IAAMoC,UAAS,GADL,mBAC3Bsa,EAD2B,KACrB4nB,EADqB,KAG5BC,EAAc,WAClBD,GAAQ,IAIV,OADAp9B,QAAQC,IAAI,UAEV,6BACI,kBAACyY,GAAA,EAAD,CACElD,KAAMA,EACNqD,QAASwkB,EACTnyB,WAAS,EACTxR,SAAS,KACT4jC,kBAAgB,qBAEhB,8BACE,kBAACxkB,GAAA,EAAD,wBACA,kBAACC,GAAA,EAAD,CAAexa,MAAO,CAAEO,WAAY,KAClC,kBAACka,GAAA,EAAD,CAAmBza,MAAO,CAAEO,UAAW,KAAvC,mDAIF,kBAACua,GAAA,EAAD,KACE,kBAACxN,EAAA,EAAD,CAAQvM,QAAS+9B,GAAjB,wCACA,kBAACxxB,EAAA,EAAD,CACEZ,WAAW,EACXwoB,KAAK,SACLn0B,QAAS,WAAOtC,OAAOwY,KAAK,oCAC5Bjc,MAAM,YACN2+B,QAAS,kBAAC,KAAD,OALX,gBCdC,SAASqF,GAAarlC,GACnC,IAAMkoB,EAAQub,cACNC,EAAcvD,cAAduD,UAFkC,EAGJ1gC,oBAAS,GAHL,mBAGnCsiC,EAHmC,KAGxBC,EAHwB,OAIHviC,mBAAS,GAJN,mBAInCwiC,EAJmC,KAIjBC,EAJiB,KAKpCnnB,EAAUC,cAEVoI,EAAUgd,YAAe,CAC7BD,UAAWA,EACXE,yBAA0B,UAGtB1G,EAAqB,uCAAG,WAAOjf,EAAa3b,GAApB,SAAA4B,EAAA,+EACrB,IAAI29B,GAAsB5jB,IADL,2CAAH,wDAIrBgf,EAAkB,uCAAG,WACzBhf,EACAlb,EACA8gC,EACAC,EACAhC,EACA5D,EACA57B,GAPyB,IASVyhC,EATU,iBAAA7/B,EAAA,iGAAAA,EAAA,MASzB,4CAAAA,EAAA,sEACwB+Z,EAAYgd,oBAAoB34B,GADxD,OACQytB,EADR,OAEQzO,EAAiB,IAAIC,oBACzB,YACA,YACA,aALJ,EAWMyiB,sEACAH,EACFviB,EACAwgB,GALAmC,EATJ,EASIA,UACAliB,EAVJ,EAUIA,SAMEnK,EAAQssB,cAAYC,wCAhB1B,cAiB4BpU,EAAQkM,SAjBpC,IAiBE,2BAAWv3B,EAAgC,QACvCkT,EAAQssB,cAAYE,+BACpBH,EACAliB,EACA9c,aAAWC,gBAAgBR,GAC3BA,EAAYw9B,KACZtqB,GAvBN,uDA0BS,CACLA,QACAmK,WACAkiB,cA7BJ,4CATyB,uBASVF,EATU,oDA0CSA,IA1CT,uBA0CjBnsB,EA1CiB,EA0CjBA,MAAOmK,EA1CU,EA0CVA,SA1CU,kBA4ClB,IAAIogB,GACTlkB,EACAlb,EACAm7B,EACAtmB,EACAmK,IAjDuB,2CAAH,kEAsDxB2jB,aAAY,WACVH,GAAiB,KAChB,MAxEuC,IA2ElC5L,EAAoBC,wBAApBD,gBA3EkC,EA4EZ32B,mBAAS,WA5EG,mBA4EnCid,EA5EmC,KA4E1B0lB,EA5E0B,OA6Ed3iC,mBAAS,MA7EK,mBA6EnCokB,EA7EmC,KA6E3Bwe,EA7E2B,OA8EJ5iC,oBAAS,GA9EL,mBA8EnC6iC,EA9EmC,KA8EtBC,EA9EsB,KA2M1C,OA1HAl9B,qBAAU,WAIK5I,EAAMkI,SAAS69B,SAASztB,SAAS,wBAC5CstB,EAAU,MACVD,EAAW,qLACF3lC,EAAMkI,SAAS69B,SAASztB,SAAS,kBAC1CstB,EAAU,MACVD,EAAW,mHACF3lC,EAAMkI,SAAS69B,SAASztB,SAAS,qBAAuBtY,EAAMkI,SAAS69B,SAASztB,SAAS,cAClGstB,EAAU,MACVD,EAAW,mDACF3lC,EAAMkI,SAAS69B,SAASztB,SAAS,sBAC1CstB,EAAU,MACVD,EAAW,+DAEZ,CAAC3lC,EAAMkI,SAAS69B,WAGnB7Q,KAAa4I,GAAG,SAAS,SAACjO,EAAOmW,GAE/B,OADAl+B,QAAQC,IAAI8nB,GACJA,GACN,IAAK,kCACH+V,EAAU,MACVD,EAAW,oPACX,MAEF,IAAK,qBACL,IAAK,8BACH,IAAKE,GAAe7lC,EAAMkI,SAAS69B,SAASztB,SAAS,UACxB0tB,EAAWxW,sBAAwB,GAErC,GACvBoW,EAAU,MACVD,EAAW,iHAEXC,EAAU,CACRx+B,QAAS,WACPw+B,EAAU,MACVtnB,EAAQle,KAAK,8BAEfqG,MAAO,sBAETk/B,EAAW,+DAGf,MAEF,IAAK,4BACL,IAAK,2BACH,IAAKE,GAAe7lC,EAAMkI,SAAS69B,SAASztB,SAAS,SAAU,CAC7DstB,EAAU,MACV,IAAMK,EAAaD,EAAW9pB,UAG5BypB,EADEM,EAAa,EACJ,uJAEA,6JAGf,MAEF,IAAK,sBACL,IAAK,2BACHL,EAAU,MACVD,EAAW,kKAEX,MAEF,IAAK,kBACH,IAAMO,EAA4C,QAAtBF,EAAWpkB,OAAmB,yBAA2B,4BACrFgkB,EAAU,MACVD,EAAW,uEAAD,OAAuEO,EAAvE,MACV,MAEF,IAAK,yBACHN,EAAU,MACVD,EAAW,gMACX,MAEF,IAAK,gCACHG,GAAe,GACfF,EAAU,CACRx+B,QAAS,WACPw+B,EAAU,MACVtnB,EAAQle,KAAK,8BAEfqG,MAAO,sBAETk/B,EAAW,uFACX,MAEF,IAAK,wBACHC,EAAU,MACVD,EAAW,wNASjB/8B,qBAAU,WACR,GAAgB,YAAZqX,EACF,GAAImH,EAAQ,CAEVuS,EAAgB1Z,EAAS,CAAE1Z,QAAS,OAAQ4/B,kBAAkB,EAAMC,iBAAkB,KAAMC,aAAc,CACxGC,WAAY,SACZC,SAAU,UACTnf,OAJY,kBAAM,kBAACzT,EAAA,EAAD,CAAQvM,QAASggB,EAAOhgB,SAAUggB,EAAO3gB,eAM9DkzB,EAAgB1Z,EAAS,CAAE1Z,QAAS,OAAQ4/B,kBAAkB,EAAMC,iBAAkB,KAAMC,aAAc,CACxGC,WAAY,SACZC,SAAU,cAIf,CAACtmB,EAASmH,EAAQuS,IAInB,oCACE,kBAACoC,GAAA,EAAD,CAAgBr7B,MAAO,CAAEgjB,KAAMwE,EAAMxE,KAAMkO,IAAK1J,EAAM0J,MACpD,kBAAC,IAAD,CAA6BlxB,MAAOimB,GAClC,kBAACqW,EAAD,CACEE,sBAAuBA,EACvBD,mBAAoBA,GAEpB,kBAACsE,GAAD,CAAWK,MAAM,KACd4D,GAAoB,GAAKF,IAAc,kBAAC,GAAD,CAAWkB,SAAU,WAAOf,EAAW,GAAIF,GAAiB,UClOnG,SAASkB,KACtB,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CACEhF,QAAM,EACN/d,KAAK,2CACLtW,UAAW43B,KAEb,kBAAC,IAAD,CACEvD,QAAM,EACN/d,KAAK,0BACLtW,UAAWo2B,KAEb,kBAAC,IAAD,CACE/B,QAAM,EACN/d,KAAK,oBACLtW,UAAWi4B,KAEb,kBAAC,IAAD,CAAO5D,QAAM,EAAC/d,KAAK,eAAetW,UAAWw3B,KAC7C,kBAAC,IAAD,CAAOnD,QAAM,EAAC/d,KAAM,IAAKtW,UAAW03B,M,IChBpC4B,G,4MACJvrB,MAAQ,CAAEwrB,UAAU,G,uDAEV,IAAD,EACqB5mC,KAAKob,MAAzBwrB,EADD,EACCA,SAAUjlB,EADX,EACWA,MAElB,OAAIilB,EAAiB,kBAACC,GAAD,CAAUllB,MAAOA,IAGpC,kBAAC,IAAMmlB,SAAP,KACE,kBAACC,EAAA,EAAD,MACA,kBAACC,EAAA,EAAD,CAAehmC,MAAOqyB,KACpB,kBAAC,mBAAD,CAAkB4T,SAAU,GAC1B,kBAAC,IAAD,KACE,oCACE,kBAAC,IAAD,CAAOtjB,KAAK,IAAItW,UAAWq5B,Y,0CAgBvCxR,kB,gDAN8BvT,GAE9B,MAAO,CAAEilB,UAAU,EAAMjlB,MAAOA,O,GA3BlB9gB,IAAMoH,WAmCxB,SAAS4+B,GAAS5mC,GAChB,IAAMinC,EAAiB7xB,uBAAY,SAAC9U,GAClCA,EAAEgW,iBACFxR,QAAUA,OAAOoD,UAAYpD,OAAOoD,SAAS4nB,QAAO,MAWtD,OARAlnB,qBAAU,WACRtD,aAAM,eAAgB,CACpB2a,QAASjgB,EAAM0hB,MAAMzB,QACrBinB,MAAOlnC,EAAM0hB,MAAMwlB,WAMrB,yBAAKhhC,UAAU,uBACb,yBAAKA,UAAU,aACb,gFAEA,yHAKA,kDACsB,IACpB,uBAAG01B,KAAMuL,KAAqB,2BAA9B,yBAKF,sEAEA,4BACE,sDAC0B,IACxB,uBAAGvL,KAAMuL,KAAqB,2BAC3B,IADH,wBAGK,IALP,MAMK,uBAAGvL,KAAMuL,MAAT,wBACF,KACD,4BACE,oDACA,oCACO,8CADP,qBAKJ,4BACE,uBAAGvL,KAAK,IAAIx0B,QAAS6/B,GAArB,oBAEK,IAHP,oBAMA,mCACM,uBAAGrL,KAAK,4BAAR,uBADN,oBAUK8K,Q,0PC5Ff,IAAMjkC,EAAYoI,aAAW,SAAC9J,GAAD,OAC3BqmC,YAAa,CACXC,KAAM,CACJ17B,WAAY,KAEdyB,UAAW,CACT,UAAW,CACT/L,MAAO,WAET,UAAW,CACTA,MAAO,YAGXimC,MAAO,CACL37B,WAAY,UAKlB,SAAS47B,EAAkBvnC,GACzB,IAAMwC,EAAUC,IACR8V,EAAqBvY,EAArBuY,KAAMivB,EAAexnC,EAAfwnC,WACd,OAAIjvB,EAAKkvB,YAEL,kBAACC,EAAA,EAAD,CACExhC,UAAW1D,EAAQ4K,UACnBhG,QAAS,kBACPogC,EAAW,2BAAKjvB,GAAN,IAAYlI,KAAMkI,EAAKovB,aAAcF,aAAa,OAG9D,kBAACrzB,EAAA,EAAD,CAAYlO,UAAW1D,EAAQ8kC,OAA/B,WAA2C/uB,EAAKlI,KAAhD,OAKJ,kBAACq3B,EAAA,EAAD,CACExhC,UAAW1D,EAAQ4K,UACnBhG,QAAS,kBAAMogC,EAAW,2BAAKjvB,GAAN,IAAYkvB,aAAa,OAElD,kBAACrzB,EAAA,EAAD,CAAYlO,UAAW1D,EAAQ6kC,MAAO9uB,EAAKlI,OA+FlCu3B,MA1Ff,SAAmB5nC,GAAQ,IACjB4xB,EAAkB5xB,EAAlB4xB,IAAKiW,EAAa7nC,EAAb6nC,SADW,EAE4B7kC,mBA1D/C,SAAmC4uB,GACxC,IAAMrF,EAAaqF,EAAIkW,MAAM,KAAKzjC,KAAI,SAACgM,EAAMmI,GAC3C,IAAMivB,EAAiC,MAAnBp3B,EAAK03B,OAAO,IAAiC,MAAnB13B,EAAK03B,OAAO,GAC1D,MAAO,CAAEvvB,QAAOnI,OAAMs3B,aAAct3B,EAAMo3B,kBAHC,cAKrBlb,GAAjBzhB,EALsC,KAK7Bk9B,EAL6B,WAM7C,MAAkB,KAAdl9B,EAAKuF,KACA23B,EAEFzb,EAkDL0b,CAA0BrW,IAHJ,mBAEjBqG,EAFiB,KAEDiQ,EAFC,OAK8BllC,mBAAS,MALvC,mBAKjBmlC,EALiB,KAKIC,EALJ,KAgBxB,SAASC,EAAU7vB,GACjB,OAAO,SAAU8vB,GACfF,EAAuB5vB,GAX3B,SAA2Byf,GACzBiQ,EAA0BjQ,GAC1B4P,EAAS5P,GAUPsQ,CACEtQ,EAAe5zB,KAAI,SAACkU,GAClB,OAAIA,EAAKC,QAAUA,EACV8vB,EAEF/vB,OAZf3P,qBAAU,WACRi/B,EAAS5P,KACR,IAgBH,IAAMuQ,EAAavQ,EAAej0B,QAAO,SAAC8Q,GAAD,OAAOA,EAAE2yB,eAClD,OACE,6BACE,yBAAKphC,MAAO,CAAEoB,aAAc,IAC1B,kBAAC2M,EAAA,EAAD,CAAY7N,QAAQ,WAApB,qDAIF,yBAAKF,MAAO,CAAEK,QAAS,OAAQiE,WAAY,WACxCstB,EAAewQ,SAAQ,SAAClwB,GAAD,MAAU,CAChC,kBAACmvB,EAAA,EAAD,CAAYhiC,IAAG,UAAK6S,EAAKC,MAAV,MAAqBvR,UAAQ,GAC1C,kBAACmN,EAAA,EAAD,CACE/N,MAAO,CAAES,YAAa,EAAG8E,WAAY,EAAGD,WAAY,MADtD,MAMF,kBAAC47B,EAAD,CACE7hC,IAAG,UAAK6S,EAAKC,MAAV,MACHD,KAAMA,EACNivB,WAAYa,EAAU9vB,EAAKC,cAIhCgwB,EAAWjoC,OAAS,EACnB,6BACE,6BACA,6BACE,kBAAC6T,EAAA,EAAD,CAAY7N,QAAQ,YAApB,qBAEDiiC,EAAWnkC,KAAI,SAACkU,GACf,IAAMmwB,EAAUL,EAAU9vB,EAAKC,OAC/B,OACE,yBAAKnS,MAAO,CAAEoB,aAAc,KAC1B,kBAACsZ,EAAA,EAAD,CACErb,IAAK6S,EAAKC,MACVzF,UAAWwF,EAAKC,QAAU2vB,EAC1Bn1B,WAAS,EACTtS,MAAO6X,EAAKlI,KACZlJ,MAAK,WAAMoR,EAAKovB,aAAX,2BACL9jC,SAAU,SAACvD,GAAD,OACRooC,EAAQ,2BAAKnwB,GAAN,IAAYlI,KAAM/P,EAAEwD,OAAOpD,MAAM8vB,YAGzCjY,EAAKlI,WAMd,OClIJs4B,E,4MAEJC,2BAA6B,SAAC3Q,GAC5B,IAAM4Q,EAAiBC,EAAuB7Q,GAC9C,EAAKj4B,MAAM6D,SAAS,CAClBglC,oB,uDAIM,IAAD,SACgB9oC,KAAKC,MAArBwC,EADA,EACAA,QAASovB,EADT,EACSA,IAEhB,OACE,6BACE,yBAAK1rB,UAAW1D,EAAQumC,aACtB,kBAAC,EAAD,CAAWnX,IAAKA,EAAKiW,SAAU,SAAC5P,GAC9B,EAAK2Q,2BAA2B3Q,Y,GAhBlBr3B,IAAMoH,WAwBjBlH,OAhCA,SAAAC,GAAK,MAAK,CACvBgoC,YAAa,CACXrnC,QAAS,EACTiK,WAAY,IACZ1K,gBAAiB,cA4BNH,CAAmB6nC,G,sKCNlC,IAAMlmC,EAAYoI,aAAW,SAAC9J,GAAD,MAAY,CACvCqiB,UAAW,CACT1c,QAAS,OACTC,cAAe,SACf0F,OAAQ,SAEV4kB,KAAM,CACJ+X,UAAW,IACX98B,SAAU,cAIdpH,OAAOmkC,SAAWA,WAEX,IAAMC,EAAcphB,aAAe,SAAC9nB,GAAW,IAElDW,EAMEX,EANFW,SACA2wB,EAKEtxB,EALFsxB,OACAF,EAIEpxB,EAJFoxB,YACAzQ,EAGE3gB,EAHF2gB,QACAoQ,EAEE/wB,EAFF+wB,kBACAQ,EACEvxB,EADFuxB,MAGI/uB,EAAUC,IAVmC,EAWJE,qBAAWqP,KAAlDC,EAX2C,EAW3CA,mBAAoBC,EAXuB,EAWvBA,eACpB5P,EAAcK,qBAAWglB,KAAzBrlB,UACF6mC,EAAc/jC,yBAAeksB,EAAOzP,QAbS,EAcvBjhB,IAAMoC,SAASyM,QAAQ05B,IAdA,mBAc5CC,EAd4C,KAcpCC,EAdoC,OAePzoC,IAAMoC,SAASsuB,EAAO5N,MAff,mBAe5CmlB,EAf4C,KAe5BS,EAf4B,KA0BnD1gC,qBAAU,WACJwgC,EACF9jC,YAAM,uBAAwB,CAAEoe,KAAM4N,EAAO5N,KAAM9B,OAAQ0P,EAAO1P,SAElEtc,YAAM,sBAAuB,CAAEoe,KAAM4N,EAAO5N,KAAM9B,OAAQ0P,EAAO1P,YAIrE,IAAMujB,EAAc,WAClB7/B,YAAM,sBACNgkC,EAAkBhY,EAAO5N,MACzB/C,KAOI4oB,EAAe,SAAClJ,GACpB/6B,YAAM,qBAAsB,CAC1B+6B,UACA/9B,YACAsf,OAAQ0P,EAAO1P,OACfinB,mBAGF,IAAIW,EAAmBL,EACjBrpB,EAAW,GAEjB,IAAK0pB,EAAkB,CAAC,IACd1T,EAAc7jB,EAAd6jB,UACFmC,EAAiBwR,EAA2BZ,GAF7B,EAGQa,YAAYzR,EAAgBnC,GAAjD6T,EAHa,EAGbA,MAAOC,EAHM,EAGNA,UACfJ,EAAmBI,EAAU/nB,OAC7B8nB,EAAM/pB,SAAQ,SAACiqB,GACb,IAAMhoB,EAASonB,WAASa,YAClBC,GAAWF,EAASpC,YACtBuC,mBAAiBC,iBACjBD,mBAAiBE,kBACnBroB,EACA2nB,EACyBK,EAASx5B,KA+M9Bc,QAAQ,UAAW,KA7MzB2O,EAAS1f,KAAK2pC,GACdP,EAAmB3nB,KAKvB/B,EAAS1f,KACP8xB,cAAYC,gBACVwD,YAAqB6T,EAAkBlY,EAAO1P,QAC9C+V,IACA0I,IAKJnuB,EAAc,WAAd,EAAkB4N,GAElByR,EAAM,CACJ1P,OAAQ2nB,EACR5nB,OAAQ0P,EAAO1P,SAEjBjB,KAGIwpB,EAoIR,SAAkClS,GAChC,IAAMmS,EAAatB,EAAuB7Q,GAE1C,OADcoS,IAAaD,EAAY,GAAI,CAAEE,OAAO,EAAMC,KAAK,IAtIjDC,CACZf,EAA2BZ,IAEvB4B,EAAsC,OAA5BN,EAAMO,KAAKpZ,EAAO5N,MAC5BinB,EAAevQ,MAAMC,KACzBtJ,EAAkB/sB,QAAO,SAAC4tB,GAAD,OAASuY,EAAMO,KAAK9Y,IAAQA,IAAQN,EAAO5N,SAGtE,SAASknB,IAAgB,IAAD,EACQhqC,IAAMoC,SAAS,IADvB,mBACfq9B,EADe,KACNwK,EADM,KAGtB,OADAvlC,YAAM,kBAAmB,CAAEoe,KAAM4N,EAAO5N,KAAM9B,OAAQ0P,EAAO1P,SAE3D,kBAACpB,EAAA,EAAD,CACElD,MAAM,EACNqD,QAASwkB,EACTnyB,WAAS,EACTxR,SAAS,KACTspC,mBAAoB,EACpBplC,IAAK,SAAW4rB,EAAO1sB,YAEvB,8BACE,kBAACgc,EAAA,EAAD,yBACA,kBAACC,EAAA,EAAD,CAAexa,MAAO,CAAEO,WAAY,KAClC,kBAAC4c,EAAA,EAAD,CACE5B,OAAQ0P,EAAO1P,OACf8B,KAAM0N,GAAeyX,IAEvB,kBAAC/nB,EAAA,EAAD,CAAmBza,MAAO,CAAEO,UAAW,KAAvC,+BAGA,kBAACma,EAAA,EAAD,CACErgB,MAAO2/B,EACPx8B,SAAU,SAACvD,GAAD,OAAOuqC,EAAWvqC,EAAEwD,OAAOpD,QACrCqS,WAAS,EACTg4B,WAAY,SAACzqC,GACG,UAAVA,EAAEoF,KACJ6jC,EAAalJ,IAGjBrtB,WAAS,KAGb,kBAACmO,EAAA,EAAD,KACE,kBAACxN,EAAA,EAAD,CAAQvM,QAAS,kBAAMiiC,GAAU,KAAjC,QACA,kBAAC11B,EAAA,EAAD,CACE4nB,KAAK,SACLn0B,QAAS,kBAAMmiC,EAAalJ,IAC5Bh/B,MAAM,YACN4F,UAAWwjC,IAAYtB,GAA2B,KAAZ9I,EACtCL,QAAS,kBAAC,IAAD,OALX,aAeV,OACE,yBAAKt6B,IAAK4rB,EAAO1sB,YAEf,yBAAKwC,QA1Ie,WACtB9B,YAAM,2BAA4B,CAChChD,UAAWA,EACXsf,OAAQ0P,EAAO1P,OACf8B,KAAM4N,EAAO5N,KACbylB,kBAqIgCxoC,GAC/ByoC,EACC,kBAACwB,EAAD,CAAcllC,IAAK,aAAe4rB,EAAO1sB,aAEzC,kBAAC4b,EAAA,EAAD,CACElD,MAAM,EACNqD,QAASwkB,EACTz/B,IAAK,UAAY4rB,EAAO1sB,WACxBoO,WAAS,EACTxR,SAAS,KACT4jC,kBAAgB,qBAEhB,8BACE,kBAACxkB,EAAA,EAAD,yBACA,kBAACC,EAAA,EAAD,CAAexa,MAAO,CAAEO,WAAY,KAClC,kBAAC4c,EAAA,EAAD,CAAe5B,OAAQ0P,EAAO1P,OAAQ8B,KAAM4N,EAAO5N,OACnD,kBAAC5C,EAAA,EAAD,CAAmBza,MAAO,CAAEO,UAAW,KAAvC,8CAIA,yBAAKP,MAAO,CAAEK,QAAS,OAAQC,cAAe,QAC5C,yBAAKN,MAAO,CAAEC,KAAM,MAClB,kBAAC,EAAD,CACE0kC,kBAAmB1Z,EAAO5N,KAC1BkO,IAAKN,EAAO5N,KACZ7f,SA5IG,SAAC,GAAwB,IAAtBglC,EAAqB,EAArBA,eACtBS,EAAkBT,QAgJR,yBAAK3iC,UAAW1D,EAAQyuB,MACtB,kBAACga,EAAA,EAAD,CAAMzjC,KAAMmjC,EAAapqC,QACvB,kBAAC+0B,EAAA,EAAD,CACE7uB,MAAM,uBACN8uB,WAAY,CAAErqB,YAAa,IAE1By/B,EAAatmC,KAAI,SAACX,GACjB,OACE,kBAAC0Q,EAAA,EAAD,CACE7N,QAAQ,YACRF,MAAO,CAAE5E,SAAU,GAAIgG,aAAc,KAEpC/D,UAQf,kBAACyd,EAAA,EAAD,KACE,kBAACxN,EAAA,EAAD,CAAQvM,QAAS+9B,GAAjB,UACA,kBAACxxB,EAAA,EAAD,CACEZ,WAAW,EACXwoB,KAAK,SACLn0B,QAAS,kBAAMiiC,GAAU,IACzBhoC,MAAM,YACN4F,UAAWwjC,EACXzK,QAAS,kBAAC,IAAD,OANX,eA4CP,SAAS8I,EAAuB7Q,GACrC,OAA8B,IAA1BA,EAAe13B,OACV,IAGP,IACA03B,EACG5zB,KAAI,YAA4B,IAAzBgM,EAAwB,EAAxBA,KACN,GAD8B,EAAlBo3B,YACK,CACf,IAAMyD,EAAW76B,EACdc,QAAQ,IAAK,IACbA,QAAQ,IAAK,IACbA,QAAQ,IAAK,IAChB,MAAM,IAAN,OAAW+5B,GAEX,OAAO76B,KAGVwH,KAAK,KAQL,SAASszB,EAAsB5e,GACpC,OAAIA,EAAWhsB,OAAS,GACyB,KAA3CgsB,EAAWA,EAAWhsB,OAAS,GAAG8P,KAC7Bkc,EAAW6e,MAAM,GAAI,GAGzB7e,EAGF,SAASkd,EAA2BW,GACzC,IAAM7d,EAAa6d,EAAWtC,MAAM,KAAKzjC,KAAI,SAACgM,GAC5C,IAAMo3B,EAAiC,MAAnBp3B,EAAK03B,OAAO,IAAiC,MAAnB13B,EAAK03B,OAAO,GAC1D,MAAO,CAAE13B,OAAMo3B,kBAHoC,cAK7Blb,GAAjBzhB,EAL8C,KAKrCk9B,EALqC,WAMrD,MAAkB,KAAdl9B,EAAKuF,KACA86B,EAAsBnD,GAExBmD,EAAsB5e,K,uECpV/B,mFAMA3sB,EAAOyrC,WAAa,GAEpBC,IAASrvB,OAAO,kBAAC,IAAD,MAASyf,SAAS6P,eAAe,SAKjD3O,O,sUCCajV,EAAiB/mB,gBAAoB,MAE3C,SAASiC,IACd,OAAOF,qBAAWglB,GAGpB,IAAM6jB,EAAe,WAAuB,IAAtBC,EAAqB,uDAAT,KAChC,MAAO,CACL3oC,YAAa,KACbC,eAAgB,KAChB2oC,oBAAqB,KACrBxN,OAAQ,KACR4D,mBAAoB,GACpB5R,WAAY,KACZyb,gBAAgB,EAChBvpB,WAAW,EACX4M,QAAS,IACTC,UAAW,IAEX2c,eAAgBH,EAChB1c,iBAAkB,GAClBnI,cAAe,KAIbilB,E,4MACJ1wB,MAAQqwB,I,EAERM,kB,sBAAoB,sBAAA5nC,EAAA,sDAClB,EAAKqX,SACH,CACEqwB,eAAgB/R,IAAS,EAAK/J,OAAQ,IAAM,CAC1CgK,SAAS,EACTiS,QAAS,QAJf,sBAOE,sBAAA7nC,EAAA,sEAAkB,EAAK8nC,YAAvB,oFARgB,2C,EAkBpBlc,O,uCAAS,WAAOmc,GAAP,yBAAA/nC,EAAA,yDACDgoC,EAAoB,WACxB,GAAID,GAAaA,EAAUE,eAAe,uBAAwB,CAC3DF,EAAUG,sBACbtkC,QAAQC,IAAI,kBACZzC,YAAM,iBAAkB,CACtBhD,UAAW,EAAKtC,MAAMsC,aAG1B,IAAMgjB,EAAQ,CACZlD,WAAY6pB,EAAUG,oBACtBpd,QAASid,EAAU/I,2BACnBjU,UAAWgd,EAAUhJ,2BAQvB,OALA39B,YAAM,gBAAD,aACHhD,UAAW,EAAKtC,MAAMsC,WACnBgjB,IAGEA,EAEP,MAAO,GArBe,KAyBlBxiB,EAAgB,EAAKqY,MAArBrY,aA1BD,iCA6BuCwB,QAAQC,IAAI,CACtDzB,EAAYupC,YACZvpC,EAAYwpC,yBA/BT,mCA6BEC,EA7BF,KA6BiBC,EA7BjB,KAkCL1kC,QAAQC,IAAI,UAAW,CAACwkC,EAAc30B,MAAMrX,OAAQisC,EAAajsC,SAEjE+E,YAAM,2BAA4B,CAChChD,UAAW,EAAKtC,MAAMsC,UACtBsV,MAAO20B,EAAc30B,MAAMrX,OAC3BksC,QAASD,EAAajsC,SAGxB,EAAKgb,SAAL,aACEqL,cAAe2lB,EAAc30B,MAC7BmX,iBAAkByd,EAClBb,gBAAgB,EAChBzb,WAAY,IAAIqM,MACb2P,IA/CA,4C,wDAoDTQ,Y,sBAAc,sBAAAxoC,EAAA,6DACR,EAAKiX,MAAMuwB,qBACb,EAAKvwB,MAAMuwB,oBAAoBnuB,QAFrB,SAIC,IAAIjZ,SAAQ,SAAC6vB,GACxB,EAAK5Y,SACH,CACEwT,iBAAkB,GAClBnI,cAAe,GACfsJ,WAAY,KACZyb,gBAAgB,EAChBzN,OAAQ,KACR9b,WAAW,EACX4M,QAAS,IACTC,UAAW,KAEbkF,MAhBQ,mF,EAqBd6X,U,sBAAY,oEAAA9nC,EAAA,+DAWN,EAAKlE,MATPie,EAFQ,EAERA,YACAif,EAHQ,EAGRA,sBACAD,EAJQ,EAIRA,mBACA36B,EALQ,EAKRA,UACA+e,EANQ,EAMRA,WACAphB,EAPQ,EAORA,MACA6hB,EARQ,EAQRA,WACAF,EATQ,EASRA,OACAC,EAVQ,EAURA,OAGI8qB,EAAI,EAAKxxB,MACfrT,QAAQC,IAAI,aAAc4kC,GAdhB,SAiBJ,EAAKD,cAjBD,uBAmBmBxP,EAAsBjf,EAAa3b,GAnBtD,cAmBJS,EAnBI,iBAqBckb,EAAYggB,aArB1B,eAqBJ2O,EArBI,OAsBJ5R,EAAS3Z,EAAWsM,WAAW1tB,GAErCqF,YAAM,gBAAiB,CACrBunC,aAAc7R,EAAOz6B,OACrBusC,yBAA0B,EAAK3xB,MAAM2mB,mBAAmBvhC,OACxD+B,cAEIyqC,EAAgB1K,iBAAe2K,cAAchS,GA7BzC,UA+BWj4B,EAAeipC,UAClCe,EACAH,EAAU1O,OAAOE,gBAAkB,GACnChS,yBAAe,EAAKjR,MAAM2mB,oBAC1BjgB,GAAUD,EAAS,CAAC,CAAEC,SAAQD,WAAY,IAnClC,eA+BJsc,EA/BI,OAsCJnc,EAAWD,EAAWE,aAAa/hB,GAtC/B,UAwCgBg9B,EACxBhf,EACAlb,EACAgqC,EACAhrB,EACA,EAAK5G,MAAM2mB,mBACX5D,EACA57B,GA/CQ,WAwCJQ,EAxCI,OAkDN4oC,EAAsB,KACtBuB,OAAkBpkC,GAClBq1B,EAAO8D,iBApDD,kBAqDR0J,EAAsB,IAAIwB,YAAYhP,EAAO8D,mBACzBmL,UAAY,SAACtd,GAAW,IAAD,EAClB3D,KAAKiP,MAAMtL,EAAM+N,MAAhCrC,EADiC,EACjCA,KAAMqC,EAD2B,EAC3BA,KACD,YAATrC,EACF,EAAKpgB,MAAMywB,eAAehO,GACR,UAATrC,GACTzzB,QAAQ4Z,MAAMkc,IAIlB8N,EAAoB0B,QAAU,SAAC9sC,GAC7BwH,QAAQ4Z,MAAMphB,IAEhBorC,EAAoB2B,OAAS,SAAC/sC,GAC5BwH,QAAQC,IAAIzH,IAnEN,yCAsEYwC,EAAYwqC,YAtExB,QAsEFhoB,EAtEE,OAuER2nB,EAAe,aAAKb,qBAAqB,GAAU9mB,GAvE3C,QA0EV,EAAK/J,SACH,CACE2iB,SACAp7B,cACAC,iBACA2oC,sBACAC,gBAAgB,IAElB,kBAAM,EAAK7b,OAAOmd,MAlFV,4C,EAsFZpmB,0BAA4B,SAACib,GAC3B,EAAKvmB,SAAS,CAAEumB,uBAAsB,WACpC,EAAKkK,gB,EAIT/vB,OAAS,WAAO,IAAD,EAYT,EAAKd,MAVPwwB,EAFW,EAEXA,eACA5c,EAHW,EAGXA,iBACAnI,EAJW,EAIXA,cACAsJ,EALW,EAKXA,WACAgO,EANW,EAMXA,OACAp7B,EAPW,EAOXA,YACAC,EARW,EAQXA,eACAqf,EATW,EASXA,UACA4M,EAVW,EAUXA,QACAC,EAXW,EAWXA,UAGIse,EAA8B5pC,kBAAgB6pC,cAClD5mB,EACA,EAAK5mB,MAAM+d,cAGPrd,EAAQ,CACZirC,iBACArpC,UAAW,EAAKtC,MAAMsC,UACtB47B,SACAhO,aACAtJ,cAAe2mB,EACfxe,mBACAjsB,cACAC,iBACAqf,YACA4M,UACAC,YACApI,0BAA2B,EAAKA,2BAGlC,OACE,gBAACc,EAAelnB,SAAhB,CAAyBC,MAAOA,GAC7B,EAAKV,MAAMW,W,qEA9MZZ,KAAKob,MAAMuwB,qBACb3rC,KAAKob,MAAMuwB,oBAAoBnuB,Y,GAjBF3c,aAoOtB6sC,EAAsB3lB,YAAe+jB,I,iCCzQlD,IAAI6B,EAAkB,EAAQ,IAE1BC,EAAe,EAAQ,IAE3B/rC,OAAOC,eAAeC,EAAS,aAAc,CAC3CpB,OAAO,IAEToB,EAAQiwB,YAAS,EAEjB,IAAI6b,EAAqB,EAAQ,KAE7B7b,EAAsB,WACxB,SAASA,EAAO3T,GACdsvB,EAAgB3tC,KAAMgyB,GAEtBhyB,KAAKqe,QAAUA,EA+CjB,OA5CAuvB,EAAa5b,EAAQ,CAAC,CACpBrsB,IAAK,cACLhF,MAAO,WACL,IAAIkxB,EAAM,GAAGic,OAAO9tC,KAAKqe,QAAS,aAClC,OAAOwvB,EAAmB7rC,eAAe+rC,+BAA+Blc,KAEzE,CACDlsB,IAAK,cACLhF,MAAO,SAAqB+zB,GAC1B,GAAIA,EAAM,CACR,IAAI7C,EAAM,GAAGic,OAAO9tC,KAAKqe,QAAS,aAClC,OAAOwvB,EAAmB7rC,eAAegsC,QAAQnc,EAAK,CACpD6C,KAAMA,OAIX,CACD/uB,IAAK,cACLhF,MAAO,SAAqBgjB,EAAMsqB,EAAY1rC,GAC5C,IAAIsvB,EAAM,GAAGic,OAAO9tC,KAAKqe,QAAS,aAClC,OAAOwvB,EAAmB7rC,eAAe4iC,SAAS/S,EAAK,CACrDlO,KAAMA,EACNsqB,WAAYA,EACZ1rC,UAAWA,MAGd,CACDoD,IAAK,yBACLhF,MAAO,SAAgCutC,EAAQ3rC,GAC7C,IAAIsvB,EAAM,GAAGic,OAAO9tC,KAAKqe,QAAS,WAAWyvB,OAAOI,EAAQ,cAAcJ,OAAOvrC,EAAW,WAC5F,OAAOsrC,EAAmB7rC,eAAegsC,QAAQnc,EAAK,CACpD0M,OAAQ,gBAGX,CACD54B,IAAK,aACLhF,MAAO,WACL,IAAIkxB,EAAM,GAAGic,OAAO9tC,KAAKqe,QAAS,aAClC,OAAOwvB,EAAmB7rC,eAAe4iC,SAAS/S,EAAK,CACrD2J,KAAM,iBAKLxJ,EAnDiB,GAsD1BjwB,EAAQiwB,OAASA,G,iCCjEjB,IAAImc,EAAsB,EAAQ,GAE9BC,EAAoB,EAAQ,KAE5BT,EAAkB,EAAQ,IAE1BC,EAAe,EAAQ,IAEvBS,EAAkBruC,MAAQA,KAAKquC,iBAAmB,SAAUC,GAC9D,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CACnC,QAAWA,IAIfzsC,OAAOC,eAAeC,EAAS,aAAc,CAC3CpB,OAAO,IAEToB,EAAQC,oBAAiB,EAEzB,IAAIwsC,EAAgBH,EAAgB,EAAQ,MAExCrsC,EAA8B,WAChC,SAASA,IACP2rC,EAAgB3tC,KAAMgC,GA0LxB,OAvLA4rC,EAAa5rC,EAAgB,KAAM,CAAC,CAClC2D,IAAK,mBACLhF,MAAO,WACL,IAAI8tC,EAAoBL,EAAgCD,EAAoBO,MAAK,SAASC,EAAQpa,GAChG,IAAIhnB,EACJ,OAAO4gC,EAAoBS,MAAK,SAAkBC,GAChD,OACE,OAAQA,EAASC,KAAOD,EAASE,MAC/B,KAAK,EAEH,OADAF,EAASE,KAAO,EACTxa,EAAShnB,OAElB,KAAK,EAGH,GAFAA,EAAOshC,EAASG,KAEZza,EAASC,GAAI,CACfqa,EAASE,KAAO,EAChB,MAGF,MAAM,IAAI5/B,MAAM,uCAAuC2+B,OAAOvZ,EAASgK,OAAQ,KAAKuP,OAAOvZ,EAAS0a,WAAY,OAAOnB,OAAOvgC,IAEhI,KAAK,EACH,OAAOshC,EAASK,OAAO,SAAU3hC,GAEnC,KAAK,EACL,IAAK,MACH,OAAOshC,EAASM,UAGrBR,OAOL,OAJA,SAA0BS,GACxB,OAAOX,EAAkBY,MAAMrvC,KAAMsvC,YAhClC,IAqCN,CACD3pC,IAAK,qBACLhF,MAAO,WACL,IAAI4uC,EAAsBnB,EAAgCD,EAAoBO,MAAK,SAASc,EAASjb,GACnG,IAAIE,EAAMlnB,EACV,OAAO4gC,EAAoBS,MAAK,SAAmBa,GACjD,OACE,OAAQA,EAAUX,KAAOW,EAAUV,MACjC,KAAK,EACH,IAAKxa,EAASC,GAAI,CAChBib,EAAUV,KAAO,EACjB,MAGF,GAA0B,MAApBxa,EAASgK,OAAiB,CAC9BkR,EAAUV,KAAO,EACjB,MAGF,OAAOU,EAAUP,OAAO,UAE1B,KAAK,EAEH,OADAO,EAAUV,KAAO,EACVxa,EAASE,OAElB,KAAK,EAEH,OADAA,EAAOgb,EAAUT,KACVS,EAAUP,OAAO,SAAUza,GAEpC,KAAK,EAEH,OADAgb,EAAUV,KAAO,GACVxa,EAAShnB,OAElB,KAAK,GAEH,MADAA,EAAOkiC,EAAUT,KACX,IAAI7/B,MAAM,GAAG2+B,OAAOvZ,EAASgK,OAAQ,KAAKuP,OAAOvZ,EAAS0a,WAAY,OAAOnB,OAAOvgC,IAE5F,KAAK,GACL,IAAK,MACH,OAAOkiC,EAAUN,UAGtBK,OAOL,OAJA,SAA4BE,GAC1B,OAAOH,EAAoBF,MAAMrvC,KAAMsvC,YA5CpC,IAiDN,CACD3pC,IAAK,UACLhF,MAAO,SAAiBkxB,GACtB,IAAI8d,EAAoBL,UAAU9uC,OAAS,QAAsBsI,IAAjBwmC,UAAU,GAAmBA,UAAU,GAAK,GAC5F,OAAOd,EAAcoB,QAAQ/d,EAAK,CAChChQ,OAAQ,MACRguB,QAAShuC,OAAOiuC,OAAO,CACrBC,OAAQ,oBACPJ,KACF5S,KAAK/6B,EAAeguC,sBAExB,CACDrqC,IAAK,iCACLhF,MAAO,SAAwCkxB,GAC7C,OAAO2c,EAAcoB,QAAQ/d,EAAK,CAChChQ,OAAQ,MACRguB,QAAS,CACPI,OAAQ,wBAIb,CACDtqC,IAAK,iBACLhF,MAAO,SAAwBkxB,EAAKsK,GAClC,IAAIwT,EAAoBL,UAAU9uC,OAAS,QAAsBsI,IAAjBwmC,UAAU,GAAmBA,UAAU,GAAK,GAC5F,OAAOd,EAAcoB,QAAQ/d,EAAK,CAChChQ,OAAQ,OACRsa,KAAMA,EACN0T,QAAShuC,OAAOiuC,OAAO,CACrBC,OAAQ,mBACR,eAAgB,oBACfJ,KACF5S,KAAK/6B,EAAeguC,sBAExB,CACDrqC,IAAK,WACLhF,MAAO,SAAkBkxB,EAAKsK,GAC5B,IAAIwT,EAAoBL,UAAU9uC,OAAS,QAAsBsI,IAAjBwmC,UAAU,GAAmBA,UAAU,GAAK,GAC5F,OAAOttC,EAAekuC,eAAere,EAAK1F,KAAKC,UAAU+P,GAAOwT,KAEjE,CACDhqC,IAAK,sBACLhF,MAAO,SAA6BkxB,GAClC,IAAI8d,EAAoBL,UAAU9uC,OAAS,QAAsBsI,IAAjBwmC,UAAU,GAAmBA,UAAU,GAAK,GAC5F,OAAOd,EAAcoB,QAAQ/d,EAAK,CAChChQ,OAAQ,OACRguB,QAAShuC,OAAOiuC,OAAO,CACrBC,OAAQ,oBACPJ,KACF5S,KAAK/6B,EAAeguC,sBAExB,CACDrqC,IAAK,gBACLhF,MAAO,SAAuBkxB,GAC5B,OAAO2c,EAAcoB,QAAQ/d,EAAK,CAChCge,QAAS,CACPE,OAAQ,sBAEThT,KAAK/6B,EAAemuC,oBAExB,CACDxqC,IAAK,UACLhF,MAAO,SAAiBkxB,EAAKsK,GAC3B,IAAIwT,EAAoBL,UAAU9uC,OAAS,QAAsBsI,IAAjBwmC,UAAU,GAAmBA,UAAU,GAAK,GAC5F,OAAOttC,EAAeouC,cAAcve,EAAK1F,KAAKC,UAAU+P,GAAOwT,KAEhE,CACDhqC,IAAK,gBACLhF,MAAO,SAAuBkxB,EAAKsK,GACjC,IAAIwT,EAAoBL,UAAU9uC,OAAS,QAAsBsI,IAAjBwmC,UAAU,GAAmBA,UAAU,GAAK,GAC5F,OAAOd,EAAcoB,QAAQ/d,EAAK,CAChChQ,OAAQ,MACRsa,KAAMA,EACN0T,QAAShuC,OAAOiuC,OAAO,CACrBC,OAAQ,mBACR,eAAgB,oBACfJ,KACF5S,KAAK/6B,EAAeguC,sBAExB,CACDrqC,IAAK,WACLhF,MAAO,SAAkBkxB,EAAKsK,GAC5B,IAAIwT,EAAoBL,UAAU9uC,OAAS,QAAsBsI,IAAjBwmC,UAAU,GAAmBA,UAAU,GAAK,GAC5F,OAAOd,EAAcoB,QAAQ/d,EAAK,CAChChQ,OAAQ,MACRsa,KAAMA,EACN0T,QAAShuC,OAAOiuC,OAAO,CACrB,iBAAkB3T,EAAK37B,OAAOqE,YAC7B8qC,KACF5S,KAAK/6B,EAAemuC,sBAIpBnuC,EA5LyB,GA+LlCD,EAAQC,eAAiBA,G,kKCpNZquC,EAAexvC,IAAMklB,cAAc,CAAC1W,MAAO,IAE3C2I,EAAS,SAAC,GAAgC,IAA/BpX,EAA8B,EAA9BA,SAA8B,IAApB6P,WAAoB,MAAd,EAAc,EAAXnK,EAAW,EAAXA,MACzC,OACE,kBAAC+pC,EAAa7oB,SAAd,MACG,gBAAEnY,EAAF,EAAEA,MAAF,OACC,yBAAK/I,MAAK,aAAG6E,YAA6B,IAAfkE,EAAQoB,IAAcnK,IAC/C,kBAAC+pC,EAAa3vC,SAAd,CAAuBC,MAAO,CAAC0O,MAAOA,EAAQoB,IAC3C7P,QAQA0vC,EAAkB,SAAC,GAAyB,IAAxB1vC,EAAuB,EAAvBA,SAAuB,IAAb6P,WAAa,MAAP,EAAO,EACtD,OACE,kBAAC4/B,EAAa7oB,SAAd,MACG,gBAAEnY,EAAF,EAAEA,MAAF,OACC,kBAACghC,EAAa3vC,SAAd,CAAuBC,MAAO,CAAC0O,MAAOA,EAAQoB,IAC3C7P,Q,iCCrBX,IAAIutC,EAAsB,EAAQ,GAE9BC,EAAoB,EAAQ,KAE5BT,EAAkB,EAAQ,IAE1BC,EAAe,EAAQ,IAEvBS,EAAkBruC,MAAQA,KAAKquC,iBAAmB,SAAUC,GAC9D,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CACnC,QAAWA,IAIfzsC,OAAOC,eAAeC,EAAS,aAAc,CAC3CpB,OAAO,IAEToB,EAAQiwB,YAAS,EAEjB,IAAIue,EAAelC,EAAgB,EAAQ,MAEvCR,EAAqB,EAAQ,KAE7B2C,EAAe,IAAID,EAAaX,QAAQ,CAC1Ca,cAAe,EACfC,QAAS,MAGP1e,EAAsB,WACxB,SAASA,EAAOkc,EAAQpQ,GACtB,IAAIzf,EAAUixB,UAAU9uC,OAAS,QAAsBsI,IAAjBwmC,UAAU,GAAmBA,UAAU,GAAK,OAElF3B,EAAgB3tC,KAAMgyB,GAEtBhyB,KAAKkuC,OAASA,EACdluC,KAAK89B,aAAeA,EACpB99B,KAAKqe,QAAUA,EAwFjB,OArFAuvB,EAAa5b,EAAQ,CAAC,CACpBrsB,IAAK,aACLhF,MAAO,WACL,OAAOktC,EAAmB7rC,eAAegV,QAAQ,GAAG82B,OAAO9tC,KAAKqe,QAAS,WAAWyvB,OAAO9tC,KAAKkuC,OAAQ,cAEzG,CACDvoC,IAAK,aACLhF,MAAO,WACL,OAAOktC,EAAmB7rC,eAAe2uC,cAAc,GAAG7C,OAAO9tC,KAAKqe,QAAS,WAAWyvB,OAAO9tC,KAAKkuC,OAAQ,cAE/G,CACDvoC,IAAK,eACLhF,MAAO,WACL,OAAOktC,EAAmB7rC,eAAegV,QAAQ,GAAG82B,OAAO9tC,KAAKqe,QAAS,WAAWyvB,OAAO9tC,KAAKkuC,OAAQ,gBAEzG,CACDvoC,IAAK,aACLhF,MAAO,SAAoB2gB,EAAYphB,GACrC,IAAI0wC,EAAQ5wC,KAERy+B,EAAmBnd,EAAW4K,gBAAgBhsB,GAClD,OAAO2tC,EAAmB7rC,eAAeouC,cAAc,GAAGtC,OAAO9tC,KAAKqe,QAAS,WAAWyvB,OAAO9tC,KAAKkuC,OAAQ,WAAYzP,GAAkB1B,MAAK,SAAUhoB,GAGzJ,OAFA67B,EAAM9S,aAAaxI,KAAK,kBAEjBvgB,OAGV,CACDpP,IAAK,sBACLhF,MAAO,SAA6B4B,GAClC,IAAIsuC,EAAS7wC,KAEb,OAAOwwC,EAAaM,UAAS,WAC3B,OAAOjD,EAAmB7rC,eAAegV,QAAQ,GAAG82B,OAAO+C,EAAOxyB,QAAS,WAAWyvB,OAAO+C,EAAO3C,OAAQ,cAAcJ,OAAOvrC,EAAW,aAAaw6B,MAAK,SAAUZ,GACtK,MAAO,CACLD,QAASC,EAAKD,QACd6U,SAAU5U,EAAK4U,kBAKtB,CACDprC,IAAK,mBACLhF,MAAO,SAA0B4B,GAC/B,OAAOsrC,EAAmB7rC,eAAegV,QAAQ,GAAG82B,OAAO9tC,KAAKqe,QAAS,WAAWyvB,OAAO9tC,KAAKkuC,OAAQ,cAAcJ,OAAOvrC,EAAW,cAEzI,CACDoD,IAAK,wBACLhF,MAAO,WACL,OAAOktC,EAAmB7rC,eAAe+rC,+BAA+B,GAAGD,OAAO9tC,KAAKqe,QAAS,WAAWyvB,OAAO9tC,KAAKkuC,OAAQ,2BAEhI,CACDvoC,IAAK,qBACLhF,MAAO,WACL,IAAIqwC,EAAsB5C,EAAgCD,EAAoBO,MAAK,SAASC,IAC1F,IAAIpa,EACJ,OAAO4Z,EAAoBS,MAAK,SAAkBC,GAChD,OACE,OAAQA,EAASC,KAAOD,EAASE,MAC/B,KAAK,EAEH,OADAF,EAASE,KAAO,EACT/uC,KAAKixC,wBAEd,KAAK,EAEH,OADA1c,EAAWsa,EAASG,KACbH,EAASK,OAAO,SAAU,CAC/BpQ,kBAAmBvK,EAASgK,QAAU,KAAOhK,EAASgK,QAAU,MAGpE,KAAK,EACL,IAAK,MACH,OAAOsQ,EAASM,UAGrBR,EAAS3uC,UAOd,OAJA,WACE,OAAOgxC,EAAoB3B,MAAMrvC,KAAMsvC,YAzBpC,MAgCFtd,EAhGiB,GAmG1BjwB,EAAQiwB,OAASA,G,wECjIjB,6CAEO,SAASvyB,EAAsByxC,GAClC,IAAMvxC,EAAUkB,gBAAoBqwC,GAiBpC,MAAO,CACHvxC,UACAC,YAhBgB,SAAUuxC,GAC1B,OAAO,SAAUlxC,GACb,OACI,gBAACN,EAAQ6nB,SAAT,MACK,SAACtB,GACE,OACI,gBAACirB,EAAD,iBAAalxC,EAAWimB,Y,yWCNhDzmB,YAAsB,MAFfyoB,E,EAATvoB,QACaqoB,E,EAAbpoB,YAGIwxC,E,4MACJh2B,MAAQ,CAAEi2B,gBAAiB,M,kEAEN,IAAD,SACyBrxC,KAAKC,MAAxCie,EADU,EACVA,YAAa8f,EADH,EACGA,kBAChBA,EAIHA,EAAkBD,GAAG,kBAAkB,WACrC,EAAKuT,iBAJPvpC,QAAQitB,KAAK,4BAQe,uCAAG,4BAAA7wB,EAAA,sEACD+Z,EAAY2gB,qBADX,OACzBwS,EADyB,OAG/B,EAAK71B,SAAS,CAAE61B,oBAHe,2CAAH,oDAM9BE,K,+BAGQ,IAAD,EAKHvxC,KAAKC,MAEHU,EAAQ,CACZud,YARK,EAELA,YAOAif,sBATK,EAGLA,sBAOAD,mBAVK,EAILA,mBAOAmU,gBAL0BrxC,KAAKob,MAAzBi2B,iBAOR,OACE,kBAACnpB,EAAmBxnB,SAApB,CAA6BC,MAAOA,GACjCX,KAAKC,MAAMW,c,GAtCWC,IAAMoH,WA4CrC,SAASilB,IAEP,OADwBtqB,qBAAWslB,GAA3BhK,YAIV,SAASC,IAAe,IAAD,EAC8Cvb,qBACjEslB,GAGF,MAAO,CACLhK,YANmB,EACbA,YAMNgf,mBAPmB,EACAA,mBAOnBC,sBARmB,EACoBA,uBAW3C,SAASqU,IACP,IAAM/xB,EAAc7c,qBAAWslB,GAE/B,IAAKzI,EACH,MAAMtQ,MACJ,iEAGJ,OAAOsQ,EAAY4xB,kB,iTCtEjB5xC,cAFOoD,E,EAATlD,QACasa,E,EAAbra,YAGI6xC,E,4MACJr2B,MAAQ,CACNs2B,aAAa,G,uDAGL,IAAD,SAMH1xC,KAAKC,MAJP0C,EAFK,EAELA,iBACAmb,EAHK,EAGLA,oBAOIoI,EAAU,CACd9D,qBAXK,EAILA,qBAQAC,UAZK,EAKLA,UAQAqvB,YAAa1xC,KAAKob,MAAMs2B,YAExB9e,aAAc,WACZ,EAAKpX,SAAS,CACZm2B,oBAAqB,GACrBD,aAAa,KAGjBtzB,MAAO,WACL,EAAKne,MAAMme,QACX,EAAK5C,SAAS,CACZm2B,oBAAqB,GACrBD,aAAa,KAIjB/uC,mBACAmb,uBAGF,OACE,kBAACjb,EAAYnC,SAAb,CAAsBC,MAAOulB,GAC1BlmB,KAAKC,MAAMW,c,GAxCYC,IAAMoH,WA8ChC2pC,EAAmB7oB,YAAuB0oB,I,6NClDnChuB,EAAgB,SAAC,GAAsB,IAApBE,EAAmB,EAAnBA,KAAM9B,EAAa,EAAbA,OAC9BgwB,EACJ,kBAAC,IAAD,CACErrC,QAAQ,QACR6G,UAAU,OACV/G,MAAO,CACLsF,WAAY,IACZtK,MAAO,UACPK,QAAS,EACTD,SAAU,GACVipB,aAAc,EACd9jB,WAAY,EACZ3F,gBAAiBoN,IAAiBuT,EAAOyU,iBAG1CzU,EAAOyU,eAGNwb,EACJ,kBAAC,IAAD,CACEtrC,QAAQ,YACR6G,UAAU,OACV/G,MAAO,CAAE5E,SAAU,GAAImK,WAAY,IAElC8X,GAIL,OACE,8BACG,IACAkuB,EAFH,IAEkBC,EAAY,MAKrBC,EAAgC,SAAC,GAAsB,IAApBpuB,EAAmB,EAAnBA,KAAM9B,EAAa,EAAbA,OAC9CgwB,EACJ,kBAAC,IAAD,CACErrC,QAAQ,QACR6G,UAAU,MACV/G,MAAO,CACLsF,WAAY,IACZtK,MAAO,UACPI,SAAU,EACVipB,aAAc,EACdhpB,QAAS,EACT6J,WAAY,EACZtK,gBAAiBoN,IAAiBuT,EAAOyU,iBAG1CzU,EAAOyU,eAGNwb,EACJ,kBAAC,IAAD,CACEtrC,QAAQ,YACR6G,UAAU,MACV/G,MAAO,CACL5E,SAAU,GACVmK,WAAY,EACZpK,SAAU,IACV0K,SAAU,SACVU,aAAc,WACdwM,UAAW,YACXvM,WAAY,WAGb6W,GAIL,OACE,kBAAC,IAAD,CAAcjd,MAAO,kBAAC+c,EAAD,CAAe5B,OAAQA,EAAQ8B,KAAMA,KACxD,yBACErd,MAAO,CACLK,QAAS,OACTC,cAAe,MACfuE,YAAa,EACbR,aAAc,IAGf,IACAknC,EATH,IASkBC,EAAY,OAMvBE,EAAqB,SAAC,GAAsB,IAApBruB,EAAmB,EAAnBA,KAAM9B,EAAa,EAAbA,OACnCgwB,EACJ,kBAAC,IAAD,CACErrC,QAAQ,QACR6G,UAAU,OACV/G,MAAO,CACLsF,WAAY,IACZtK,MAAO,UACPK,QAAS,EACTD,SAAU,GACVipB,aAAc,EACd9jB,WAAY,EACZ3F,gBAAiBoN,IAAiBuT,EAAOyU,iBAG1CzU,EAAOyU,eAGNwb,EACJ,kBAAC,IAAD,CACEtrC,QAAQ,YACR6G,UAAU,OACV/G,MAAO,CAAE5E,SAAU,GAAImK,WAAY,EAAGD,WAAY,MAEjD+X,GAIL,OACE,8BACG,IACAkuB,EAFH,IAEkBC,EAAY,MAKrBG,EAAa,SAAC,GAAsC,IAApC7qC,EAAmC,EAAnCA,MAAO9F,EAA4B,EAA5BA,MAAO6+B,EAAqB,EAArBA,QAAS75B,EAAY,EAAZA,MAClD,OACE,kBAAC,IAAD,CACEE,QAAQ,QACR6G,UAAU,OACV/G,MAAK,aACHsF,WAAY,IACZtK,QACAK,QAAS,EACTD,SAAU,EACVipB,aAAc,EACd9jB,WAAY,EACZ3F,gBAAiBi/B,GACd75B,IAGJc,K,iCClJP,sFAWmBvG,IAAMsc,YAAW,SAAoBld,EAAO6V,GAC7D,OAAO,kBAAC,IAAD,eAAOuH,UAAU,KAAKvH,IAAKA,GAAS7V,Q,iCCZ7C,qEAyBec,KAnBA,SAAAC,GAAK,MAAK,CACvB+J,KAAM,MAkBOhK,EAff,YAAuC,IAAnBJ,EAAkB,EAAlBA,MAAOmD,EAAW,EAAXA,SACzB,OACE,kBAAC,IAAD,CACEouC,KAAK,OACLlxC,MAAM,SACNmxC,QAAS,EACTC,iBAAiB,EACjB1nC,MAAO,MACP5G,SAAUA,EACVnD,MAAOA,EACP0xC,YAAa,CAACC,iBAAiB,S,8OCHjC7yC,YAAsB,MAFf0iB,E,EAATxiB,QAII4yC,G,EAHJ3yC,Y,uKAIU,IAAD,SAE8BI,KAAKC,MAAlC6hB,EAFD,EAECA,OAAQD,EAFT,EAESA,OAAQyG,EAFjB,EAEiBA,SAFjB,EAQiDtoB,KAAKC,MAArDiS,EARD,EAQCA,mBAA6BC,GAR9B,EAQqB6lB,QARrB,EAQ8B7lB,gBAC7BE,EAAkBH,EAAlBG,cAEF7P,EAAamzB,YAAc,CAAE7T,SAAQD,WACrCK,EAAqB2T,YACzB,CAAE/T,SAAQD,UACV3P,GAGF,GAAIgQ,EAAoB,CACtB,IAAMgE,EAAU,CACd1jB,aACA0f,qBACA4d,gBAAiB,SAAC1nB,EAAIzS,GAAL,OAAa0M,EAAchN,eAAe+S,EAAIzS,IAC/D6sC,wBAnB4B,SAACrc,GAAD,OAC9B,EAAKl2B,MAAMuyC,wBAAwB1wB,EAAQD,EAAQsU,IAmBjDsc,yBAlB6B,SAACjb,GAAD,OAC/B,EAAKv3B,MAAMwyC,yBAAyB3wB,EAAQD,EAAQ2V,IAkBlDyH,mBAAoB,SAAC7mB,EAAIzS,EAAKhF,GAC5BwR,EAAc,WAAd,cAAkBU,YAAgCuF,EAAIzS,EAAKhF,OAI/D,OACE,kBAACwhB,EAAiBzhB,SAAlB,CAA2BC,MAAOulB,GAC/BlmB,KAAKC,MAAMW,UAIhB,OACE0nB,GACE,mDACsBzG,EADtB,IAC+BC,O,GAvCSjhB,IAAMoH,YA+ClDyqC,EAAwB3qB,YAC5BwqB,GAKK,SAASI,EAAT,GAAqC,IAAX7wB,EAAU,EAAVA,OAGvBiU,EAFuBnzB,qBAAWqP,KAAlCC,mBAEA6jB,UAER,IAAKjU,EACH,OAAO,KAGT,IAeM8B,EAZY6S,YAAY3U,EAAQiU,GACAzxB,KAAI,SAACwd,GAAD,OAAYiU,EAAUjU,MAEjBxd,KAAI,SAACoyB,GAGlD,MAAO,CACLC,kBAHwBC,YAA+BF,GAIvDG,gBAHsBH,EAAc5U,WAQrCxd,KAAI,qBAAGqyB,qBACP7e,KAAK,KAER,OAAO,oCAAG8L,GAAY,O,gCCpGxB,8KAAMgvB,EAAe,4BAER5N,EAAY4N,EAAe,IAC3BpiB,EAAeoiB,EAAe,SAC9B/S,EAAqB+S,EAAe,wBAEpCC,EAAU,SAACC,GAAD,kDACgBA,IAC1BC,EAAe,4C,gICNrB,SAAS7H,EAAT,GAA0C,IAA1BzjC,EAAyB,EAAzBA,KAAM7G,EAAmB,EAAnBA,SAAU0F,EAAS,EAATA,MACrC,OACE,yBAAKA,MAAK,aAAIK,SAAUc,GAAQ,QAAWnB,IAAUmB,GAAQ7G,GAI1D,SAASoyC,EAAT,GAA8C,IAA1BvrC,EAAyB,EAAzBA,KAAM7G,EAAmB,EAAnBA,SAAU0F,EAAS,EAATA,MACzC,OACE,0BAAMA,MAAK,aAAIK,SAAUc,GAAQ,QAAWnB,IACzCmB,GAAQ7G,K,qQCXR,SAASm2B,EAAgBpT,GAC9B,QAAIA,EAAKqT,WAAWC,qCAMf,SAASgc,EAAyBC,GACvC,OAAmC,IAA/BA,EAAoB1yC,OACf,IAEF0yC,EAAoB5uC,KAAI,SAAC6uC,GAAD,OA8B1B,SAA2BxvB,GAChC,GAAIA,EAAKqT,WAAWC,qCAClB,MAAM,KAER,GAAItT,EAAKqT,WAAWoc,6BAClB,OAAOzvB,EAAKqT,WAAWoc,6BAA6B9iC,KAEtD,OAAO,KArCgD+iC,CAAkBF,MAAqBr7B,KAAK,KAG9F,SAASw7B,EAAeJ,GAC7B,OAAmC,IAA/BA,EAAoB1yC,OACf,IAEF0yC,EAAoB5uC,KAAI,SAAC6uC,GAAD,OAAwBvc,EAA+Buc,MAAqBr7B,KAAK,KAa3G,SAAS8e,EAA+BjT,GAC7C,OAAIA,EAAKqT,WAAWC,qCACZ,IAAN,OAAWtT,EAAKqT,WAAWC,qCAAqC3mB,KAAhE,KAEEqT,EAAKqT,WAAWoc,6BACXzvB,EAAKqT,WAAWoc,6BAA6B9iC,KAE/C,KA0BF,SAASmmB,EAAY3U,EAAQiU,GAClC,IAd8BpS,EAc1B4vB,EAAazxB,EACb0U,EAAY,GAChB,EAAG,CACDA,EAAUn2B,KAAKkzC,GACf,IAAMC,EAAWzd,EAAUwd,GAC3BA,GAnB4B5vB,EAmBC6vB,IAlBjB7vB,EAAKqT,WAGfrT,EAAKqT,WAAWC,qCACXtT,EAAKqT,WAAWC,qCAAqCwc,aAE1D9vB,EAAKqT,WAAWoc,6BACXzvB,EAAKqT,WAAWoc,6BAA6BK,aAE/C,KARE,WAkBAF,GACT,OAAO/c,EAAUkd,UAGZ,SAASC,EAAsB7xB,EAAQiU,GAC5C,OAAOU,EAAY3U,EAAQiU,GAAWzxB,KAAI,SAAA8T,GAAE,OAAI2d,EAAU3d,MAcrD,SAASw7B,EAAc1b,GAC5B,MAAO,IAAMA,EAAe5zB,KAAI,SAAAyQ,GAAC,OAAIA,EAAE2yB,YAAc,KAAO3yB,EAAEzE,QAAMwH,KAAK,KAO3E,SAAS+7B,EAAWptB,EAAOyqB,GACzB,IAAM1wC,EAASimB,EAAMjmB,OACrB,OAAkB,IAAXA,EAAe0wC,EAAezqB,EAAMjmB,EAAS,GAGtD,IAAMszC,EAAoB,GAYnB,SAASnK,EAAYzR,EAAgBnC,GAC1C,IAAMge,EAAoBlyC,OAAO+2B,QAAQ7C,GACtC3O,QAAO,SAACZ,EAAD,GAAmC,IAAD,mBAA3B1E,EAA2B,KAAnB4U,EAAmB,KAGxC,OADAlQ,EAD+BysB,EAAyBU,EAAsB7xB,EAAQiU,KACxDW,EACvBlQ,IACN,IAGCwtB,EAnBD,SAAkB9b,GACvB,OAAOA,EACJ9Q,QAAO,SAACZ,EAAKkQ,GACZ,MAAM,GAAN,mBACKlQ,GADL,uBAEOqtB,EAAWrtB,EAAK,KAFvB,CAE6BkQ,QAE5B,CAACod,IAUeG,CAAS/b,GAAgBwb,UAG3ChwC,MAAK,SAACwwC,GACL,IAAMC,EAAaP,EAAcM,GAEjC,QADcH,EAAkBI,MAK9BA,EAAaP,EAAcI,GAC3BnK,EAAYkK,EAAkBI,GAE9BC,EAAmBlc,EAAe13B,OAASwzC,EAAoBxzC,OAErE,MAAO,CACLqpC,YACAD,MAHYwK,GAAoB,EAAI,GAAKlc,EAAemT,OAAO,EAAI+I,M,+KCtIjEC,E,OAAkBxzC,EAAMklB,cAAc,MAC5CsuB,EAAgB18B,YAAc,kB,IAGfjX,EAAa2zC,EAAb3zC,SA6BR,SAASkjC,EAAT,GAAkE,IAAxCD,EAAuC,EAAvCA,UAAWE,EAA4B,EAA5BA,yBAK1C,OAJyByQ,mBACvB,kBA7BJ,YAAsE,IAAxCzQ,EAAuC,EAAvCA,yBAA0BF,EAAa,EAAbA,UAClD4Q,EAAc,KADiD,4CAEnE,wCAAApwC,EAAA,6DAAuBqwC,EAAvB,gCACOD,IAAeC,IAElBD,EAAcE,MAAM,IAAD,OAAK5Q,EAAL,YAAiCF,EAAjC,SAAmD,CACpEkM,QAAS,CAAEE,OAAQ,sBAClBhT,MAAK,SAACxI,GACP,GAAIA,EAASC,GACX,OAAOD,EAASE,OAGlB,MAAM,IAAItlB,UAVhB,SAaeolC,EAbf,oFAFmE,sBAkBnE,MAAO,CACL5Q,YACA+Q,QApBiE,4CA6B3DC,CAAmB,CAAEhR,YAAWE,+BACtC,CAACF,IAKE,SAAStG,EAAYuX,GAC1B,IAAMC,EAAejyC,qBAAWyxC,GADA,EAGRpxC,mBAAS,MAHD,mBAGzB46B,EAHyB,KAGnBiX,EAHmB,OAIF7xC,oBAAS,GAJP,mBAIzBy6B,EAJyB,KAIhBqX,EAJgB,OAKN9xC,mBAAS,MALH,mBAKzB0e,EALyB,KAKlBsX,EALkB,OAMEh2B,oBAAS,GANX,mBAMzBw6B,EANyB,KAMduX,EANc,KA4BhC,OApBAnsC,qBAAU,WACHgsC,GAKHG,GAAa,GACbH,EACGH,UACA3X,MAAK,SAACtL,GAGL,OAFAqjB,EAAQrjB,GACRsjB,GAAW,GACJtjB,KAERwjB,OAAM,SAACC,GACNjc,EAASic,QAbbF,GAAa,GACbF,EAAQ,MACRC,GAAW,MAcZH,GAEI,CAAEnX,YAAWI,OAAMH,UAAS/b,W,sQChE9B,SAASwzB,EAAT,GAAwD,IAA9B9hC,EAA6B,EAA7BA,OAAQ/M,EAAqB,EAArBA,MAAOgN,EAAc,EAAdA,WAC9C,OACE,yBAAKhN,MAAOA,GACV,kBAAC,IAAD,CACE+M,OAAQA,EACRkB,UAAW,CACTxI,QAAS,gBAAGqpC,EAAH,EAAGA,MAAOx0C,EAAV,EAAUA,SAAV,OACN0S,EAQG,KAPF,kBAAC,IAAD,CACEhS,MAAM,UACNkF,QAAO,WAAM4uC,GACb9uC,MAAO,CAAEsF,WAAY,IAAKlE,aAAc,IAEvC9G,IAGP4T,UAAW,gBAAG5T,EAAH,EAAGA,SAAH,OACT,kBAAC,IAAD,CACE4F,QAAQ,QACRF,MAAO,CAAEsF,WAAY,IAAK/E,UAAW,GAAIiG,WAAY,aAEpDlM,IAGLy0C,KAAM,YAAmB,IAAhBz0C,EAAe,EAAfA,SACP,OAAO,wBAAI0F,MAAO,CAAE6E,YAAa,KAAOvK,IAE1C00C,SAAU,gBAAG10C,EAAH,EAAGA,SAAH,OACR,wBAAI0F,MAAO,CAAE6E,YAAa,IACxB,kBAAC,IAAD,CACE3E,QAAQ,QACRF,MAAO,CACL6E,YAAa,EACbR,aAAc,EACd9D,UAAW,GACX+E,WAAY,MAGbhL,SAUV,SAAS20C,EAAT,GAA4D,IAAlBliC,EAAiB,EAAjBA,OAAQ/M,EAAS,EAATA,MACvD,OACE,yBAAKA,MAAOA,GACV,kBAAC,IAAD,CACE+M,OAAQA,EACRkB,UAAW,CACTC,UAAW,gBAAG5T,EAAH,EAAGA,SAAH,OACT,kBAAC,IAAD,CACE4F,QAAQ,QACRF,MAAO,CACLsF,WAAY,IACZtK,MAAO8R,IACPtG,WAAY,aAGblM,IAGLy0C,KAAM,YAAmB,IAAhBz0C,EAAe,EAAfA,SACP,OACE,wBAAI0F,MAAO,CAAE6E,YAAa,GAAI7J,MAAO8R,MAClCxS,IAIP00C,SAAU,gBAAG10C,EAAH,EAAGA,SAAH,OACR,wBAAI0F,MAAO,CAAE6E,YAAa,IACxB,kBAAC,IAAD,CACE3E,QAAQ,QACRF,MAAO,CACL6E,YAAa,EACbR,aAAc,EACdrJ,MAAO8R,IACPxH,WAAY,MAGbhL,SAUjB,IAAM40C,EAAS,SAACx0C,GAAD,MAAY,CACzB+J,KAAM,CACJlE,UAAW,EACX0M,OAAQ,UAINkiC,E,4MACJr6B,MAAQ,CACNs6B,WAAY,EAAKz1C,MAAMU,OAAS,GAChC4R,QAAS,EAAKtS,MAAM+S,W,EAGtB2iC,aAAe,SAACp1C,GAAD,OAAO,EAAKib,SAAS,CAAEk6B,WAAYn1C,EAAEwD,OAAOpD,S,EAC3D6R,WAAa,SAACojC,GAAD,OAAO,WAClB,EAAKp6B,SAAS,CAAEjJ,QAASqjC,KACpBA,GAAK,EAAK31C,MAAM6D,UACf,EAAKsX,MAAMs6B,cAAgB,EAAKz1C,MAAMU,OAAS,KACjD,EAAKV,MAAM6D,SAAS,EAAKsX,MAAMs6B,c,uDAK3B,IAAD,EACoB11C,KAAKC,MAAxBwC,EADD,EACCA,QAAS2E,EADV,EACUA,MADV,EAEyBpH,KAAKob,MAA7Bs6B,EAFD,EAECA,WACR,OAHO,EAEanjC,QAGhB,kBAAC,IAAD,CACEnL,MAAOA,EACP6L,WAAW,EACXC,WAAW,EACX5M,MAAO,CAAE5E,SAAU,IACnBf,MAAO+0C,EACPp0C,MAAM,UACN0R,WAAW,EACXlP,SAAU9D,KAAK21C,aACf5iC,OAAQ/S,KAAKwS,YAAW,GACxB1E,OAAO,UAIN4nC,EAeH,yBAAKvvC,UAAW1D,EAAQsI,KAAM1D,QAASrH,KAAKwS,YAAW,IACrD,kBAAC2iC,EAAD,CAAgB9hC,OAAQqiC,EAAYpiC,YAAY,KAdhD,yBAAKnN,UAAW1D,EAAQsI,KAAM1D,QAASrH,KAAKwS,YAAW,IACrD,kBAAC,IAAD,CACEhM,QAAQ,UACRF,MAAO,CAAEhF,MAAOwF,IAAagF,cAAe,cAE3C,IAJH,KAKK1E,Q,GA3CmBvG,IAAMoH,WA0D7B4tC,EAAuB90C,IAAWy0C,EAAXz0C,CAAmB00C,GAEjDK,E,4MACJ16B,MAAQ,CACNs6B,WAAY,EAAKz1C,MAAMU,OAAS,GAChC4R,QAAS,EAAKtS,MAAM+S,W,EAGtB2iC,aAAe,SAACp1C,GAAD,OAAO,EAAKib,SAAS,CAAEk6B,WAAYn1C,EAAEwD,OAAOpD,S,EAC3D6R,WAAa,SAACojC,GAAD,OAAO,WAClB,EAAKp6B,SAAS,CAAEjJ,QAASqjC,KACpBA,GAAK,EAAK31C,MAAM6D,UACf,EAAKsX,MAAMs6B,cAAgB,EAAKz1C,MAAMU,OAAS,KACjD,EAAKV,MAAM6D,SAAS,EAAKsX,MAAMs6B,c,uDAK3B,IAAD,EACoB11C,KAAKC,MAAxBwC,EADD,EACCA,QAAS2E,EADV,EACUA,MADV,EAEyBpH,KAAKob,MAA7Bs6B,EAFD,EAECA,WAER,OAJO,EAEanjC,QAIhB,kBAAC,IAAD,CACEnL,MAAOA,EACP6L,WAAW,EACXtS,MAAO+0C,EACPp0C,MAAM,UACN0R,WAAW,EACXlP,SAAU9D,KAAK21C,aACf5iC,OAAQ/S,KAAKwS,YAAW,GACxB1E,OAAO,WAIN4nC,EAmBH,kBAAC,IAAD,CAAehvC,MAAOgvC,EAAYruC,QAASrH,KAAKwS,YAAW,KAjBzD,yBAAKrM,UAAW1D,EAAQsI,KAAM1D,QAASrH,KAAKwS,YAAW,IACrD,kBAAC,IAAD,CACEhM,QAAQ,KACRF,MAAK,2BACA4H,KADA,IAEH5M,MAAOwF,IACPgF,cAAe,eAGhB,IARH,KASK1E,Q,GA9CkBvG,IAAMoH,WA2D5B8tC,EAAsBh1C,IAAWy0C,EAAXz0C,CAAmB+0C,I,wOC9N/C,SAASj5B,EAAmBpZ,GAAO,IAChCV,EAAgBD,cAAhBC,YAD+B,EAEDE,mBAAS,MAFR,mBAEhCmP,EAFgC,KAEnB4jC,EAFmB,KAWvC,OAPAntC,qBAAU,YACY,uCAAG,sBAAA1E,EAAA,kEACrB6xC,EADqB,SACCjzC,EAAYkzC,gBAAgBxyC,GAD7B,gDACuC,KADvC,2EAAH,qDAGpByyC,KACC,CAACzyC,EAAKA,KAAKoB,aAEPuN,EAGF,SAASjJ,EAA0BgtC,GAAU,IAC1CnzC,EAAmBF,cAAnBE,eADyC,EAEXC,mBAAS,MAFE,mBAE1C0B,EAF0C,KAE7ByxC,EAF6B,KA6BjD,OAzBAvtC,qBAAU,WACR,IAAIwtC,GAAU,EAqBd,OApBoB,uCAAG,4BAAAlyC,EAAA,0DACjBgyC,EADiB,wBAEnBC,EAAe,MAFI,SAIVpzC,EAAeyB,gBAAgB0xC,GAJrB,sBAI+BxxC,YAJ/B,0BAI8C,KAJ9C,OAGbA,EAHa,KAKf0xC,GACFD,EAAe,CACbzxC,cACA0E,iBAAkBnE,aAAWC,gBAAgBR,KAR9B,wBAYf0xC,GACFD,EAAe,MAbE,4CAAH,oDAkBpBE,GAEO,kBAAOD,GAAU,KACvB,CAACF,IAEGxxC,EAGF,SAASkuB,EAAsBpvB,EAAMyF,GAAqB,IACvDnG,EAAgBD,cAAhBC,YADsD,EAExBE,mBAAS,IAFe,mBAEvDkd,EAFuD,KAE1Co2B,EAF0C,KAgC9D,OA5BA1tC,qBAAU,WACR,IAAIwtC,GAAU,EAwBd,OAvBAtuC,QAAQC,IAAI,aAAcquC,GACN,uCAAG,4BAAAlyC,EAAA,0DACjBV,EADiB,gCAEEV,EAAYyzC,gBAC/B/yC,EACAyF,GAJiB,OAEbuoB,EAFa,OAMf4kB,IACFE,EAAe9kB,GACO,IAAlBA,EAAOjxB,QACT+E,YAAM,qBAAsB,CAC1BkxC,YAAa,oCACbhzC,KAAMA,EAAKoB,cAXE,sBAgBfwxC,GACFE,EAAe,IAjBE,2CAAH,oDAqBpBG,GACO,kBAAOL,GAAU,KACvB,CAAC5yC,GAAQA,EAAKA,KAAKoB,aAEfsb,EAKF,SAAS/W,EACd3F,EACAyF,GAGC,IAFD5F,EAEA,wDADAd,EACA,yCACwBM,cAAhBC,EADR,EACQA,YADR,EAG8BE,mBAAS,MAHvC,mBAGOsG,EAHP,KAGgBotC,EAHhB,OAIgD1zC,oBAAS,GAJzD,mBAIOuG,EAJP,KAIyBotC,EAJzB,KAgDA,OA1CA/tC,qBAAU,WACR9D,OAAOC,WAAa,KACnB,CAACxC,IAEJqG,qBAAU,WACR,IAAIwtC,GAAU,EACRzxC,EAAWnB,EAAKoB,WAAavB,EAAkBuB,WA6BrD,OA5BAkD,QAAQC,IAAI,aAAepD,GACJ,uCAAG,4BAAAT,EAAA,0DACpBV,IAAQyF,EADY,oBAElB5F,GACFszC,GAAoB,IAGP7xC,OAAOC,WAAWJ,GANX,gCAOZL,QAAQ6vB,QAAQrvB,OAAOC,WAAWJ,IAPtB,2DAQZ7B,EAAYkC,mBAChBxB,EACAyF,EACA5F,GAXgB,4BAMhBmuB,EANgB,KAclB4kB,IACFO,GAAoB,GACpBD,EAAWllB,GACX1sB,OAAOC,WAAWJ,GAAY6sB,GAjBV,wBAoBlB4kB,IACFO,GAAoB,GACpBD,EAAW,OAtBS,4CAAH,oDA0BvBE,GACO,kBAAOR,GAAU,KACvB,CACD5yC,EAAKA,KAAKoB,WACVqE,GAAsBA,EAAmBrE,WACzCvB,IAGK,CAAEiG,UAASC,oBAvDpBzE,OAAOC,WAAa,I,qFCpFdgpB,EAAc,CAClB2T,iBAAkB,eAACmV,EAAD,uDAAQ,GAAR,gBAAkBA,EAAlB,aAClBC,eAAgB,eAACD,EAAD,uDAAQ,GAAR,gBAAkBA,EAAlB,iCAChBE,uBAAwB,eAACF,EAAD,uDAAQ,GAAR,gBAAkBA,EAAlB,uDACxBrX,SAAU,eAACqX,EAAD,uDAAQ,GAAR,gBAAkBA,EAAlB,mBACVnX,gBAAiB,eAACmX,EAAD,uDAAQ,GAAR,gBAAkB9oB,EAAYyR,SAASqX,GAAvC,mCACjBxoB,UAAW,eAACwoB,EAAD,uDAAQ,GAAR,gBAAkBA,EAAlB,WACXroB,YAAa,eAACqoB,EAAD,uDAAQ,GAAR,gBAAkB9oB,EAAYM,UAAUwoB,GAAxC,gBACbnoB,wBAAyB,eAACmoB,EAAD,uDAAQ,GAAR,gBAAkB9oB,EAAYS,YAAYqoB,GAA1C,oCAGpB,SAAS7oB,IACd,IAAM5P,EAAUC,cAEhB,OAAOzc,OACJ+2B,QAAQ5K,GACR5G,QACC,SAAC6vB,EAAcpe,GAAW,IAAD,cACIA,EADJ,GAChBqe,EADgB,KACLC,EADK,KAMvB,MAJqB,oBAAVA,IACTF,EAAaC,GAAaC,EAAM94B,IAG3B44B,IAET,M,4LCZAv0C,EAAYoI,YAAW,CAC3BssC,OAAQ,CACN1sC,MAJgB,IAKhB0a,WAAY,GAEdiyB,WAAY,CACV3sC,MAAO,GACP0a,WAAY,GAEdkyB,YAAa,CACX5sC,MAZgB,IAahBxJ,gBAAiB,UACjByF,QAAS,OACTC,cAAe,OAEjB2wC,gBAAiB,CACfr2C,gBAAiB,UACjByF,QAAS,OACTC,cAAe,OAEjB4wC,SAAU,CACR9sC,MAAO,GAEPyB,SAAU,SACVwY,YAAa,oBACbhe,QAAS,OACTiE,WAAY,SACZhE,cAAe,UAEjB6wC,UAAW,CACT5wC,UAAW,GAEb6wC,UAAW,CACT7wC,UAAW,GAEb8wC,YAAa,CACXpxC,KAAM,K,gFC9CV,IAAMqxC,EAAc/2C,IAAMklB,cAAc,MAElCrjB,EAAYoI,aAAW,SAAC9J,GAAD,MAAY,CACvC+J,KAAM,CACJpE,QAAS,OACT8d,SAAU,GAEZvQ,QAAS,oBAAGma,cAAH,eAAwB,CAC/B1nB,QAAS,OACTC,cAAe,SAEf6d,SAAU,EACVtZ,YAAakjB,EAASrtB,EAAM+L,QAAQ,GAAK,EACzCpC,aAAc0jB,EAASrtB,EAAM+L,QAAQ,GAAK,QAI/B,SAASwyB,EAAKt/B,GAC3B,IAAMwC,EAAUC,IACVm1C,EAAc50C,mBAAS,IAC7Bu9B,EAAavgC,EAAMyG,MAAOmxC,GAHQ,IAM5BC,EAN4B,YAKbD,EALa,MAMR5zC,QAAO,SAACyC,GAAD,QAAaA,KACxCA,EAAQoxC,EAAOA,EAAOt3C,OAAS,IAAM,GAE3CqI,qBAAU,WACH8yB,UAAaj1B,IAClBi1B,SAASj1B,MAAT,UAAoBA,EAApB,eACC,CAACA,IAZ8B,IAc1Bs/B,EAAa+R,cAAb/R,SAQR,OANAn9B,qBAAU,WACJ5I,EAAMu/B,aACRz6B,OAAOizC,SAAS,EAAG,KAEpB,CAAChS,IAGF,kBAAC4R,EAAYl3C,SAAb,CAAsBC,MAAOk3C,GAC3B,yBAAK1xC,UAAW1D,EAAQsI,MAAO9K,EAAMW,UADvC,KAYG,SAAS4/B,EAAa95B,EAAOuxC,GAClC,IAAM/xB,EAAUtjB,qBAAWg1C,IAAgBK,EAa3C,OAXApvC,qBAAU,WACR,IAAKqd,EAAS,MAAM/W,MAAM,kDADZ,kBAEc+W,EAFd,GAEP4xB,EAFO,KAECI,EAFD,KAKd,OAFAA,EAAU,GAAD,mBAAKJ,GAAL,CAAapxC,KAEf,WACL,IAAM+R,EAAQq/B,EAAOK,QAAQzxC,GAC7BwxC,EAAUJ,EAAOzM,MAAM5yB,EAAO,OAE/B,CAAC/R,IAEGA,EAKT64B,EAAKrR,ODrBU,SAAgBjuB,GAC7B,IAAMwC,EAAUC,IACVsrB,EAAcC,cAEdojB,EAAkBG,cAElB4G,EAAY9D,mBAChB,kBACE,CACEhkC,KAAM,cACNiiB,KAAM,kBAAC,IAAD,CAAmBjsB,MAAO,CAAEhF,MAAO,aACzC2O,KAAM+d,EAAYM,WAEpB,CACEhe,KAAM,gBACNiiB,KAAM,kBAAC,IAAD,CAAiBjsB,MAAO,CAAEhF,MAAO,aACvC2O,KAAM+d,EAAYyR,WATtB,mBAWM4R,GAAmBA,EAAgBvS,kBACnC,CACE,CACExuB,KAAM,wBACNiiB,KAAM,kBAAC,IAAD,CAAYjsB,MAAO,CAAEhF,MAAO,aAClC2O,KAAM+d,EAAY2T,mBAGtB,OAEN,CAAC3T,IAGH,OACE,kBAACqqB,EAAA,EAAD,CACEjgC,GAAG,SACH/R,UAAW,EACXF,UAAWlG,EAAMkuB,KAAO1rB,EAAQ40C,WAAa50C,EAAQ20C,OACrD5wC,QAAS,YACT/D,QAAS,CACPsR,MAAO9T,EAAMkuB,KAAO1rB,EAAQ80C,gBAAkB90C,EAAQ60C,aAExDgB,OAAO,QAEP,yBACEnyC,UAAW1D,EAAQ+0C,SACnBlxC,MAAOrG,EAAMkuB,MAAQ,CAAExJ,YAAa,SAEpC,yBAAKvQ,IAAI,kBAAkB1J,MAAO,GAAIvE,UAAW1D,EAAQi1C,YACxDU,EAAU9zC,KAAI,SAACX,GAAD,OACb,kBAAC7C,EAAA,EAAD,CACE6E,IAAKhC,EAAEsM,KACPvJ,MAAO/C,EAAE2M,KACTjD,UAAWyjB,IACXvI,GAAI5kB,EAAEsM,KACNub,UAAU,QACVnkB,QAAS,kBAAM9B,YAAM,iBAAD,OAAkB5B,EAAE2M,MAAQ3M,KAEhD,kBAACgZ,EAAA,EAAD,CAAYxW,UAAW1D,EAAQg1C,WAAY9zC,EAAE4uB,WAIlDtyB,EAAMkuB,KAAO,KACZ,yBAAKhoB,UAAW1D,EAAQk1C,aAAc13C,EAAMW,YCvCpD2+B,EAAKnR,KA1BL,SAAkBnuB,GAChB,IAAMwC,EAAUC,EAAUzC,GAE1B,OAAO,yBAAKkG,UAAW1D,EAAQyR,SAAUjU,EAAMW,Y,wOC3C3C23C,E,oLACkB3wC,EAAWC,EAAWC,GAgB1C,OAdGlE,kBAAgB40C,gBACf5wC,EAAUnE,WAAQqF,EAClB9I,KAAKC,MAAMwD,WAAQqF,KAEpBlF,kBAAgB60C,mBACf7wC,EAAU8qB,6BAA0B5pB,EACpC9I,KAAKC,MAAMyyB,6BAA0B5pB,KAEtClF,kBAAgB80C,oBACf9wC,EAAUyB,uBAAoBP,EAC9B9I,KAAKC,MAAMoJ,uBAAoBP,KAEhClB,EAAU+wC,aAAe34C,KAAKC,MAAM04C,a,+BAK/B,IAAD,EAWH34C,KAAKC,MATP24C,EAFK,EAELA,cACAD,EAHK,EAGLA,WACAl1C,EAJK,EAILA,KACA2O,EALK,EAKLA,YACA/I,EANK,EAMLA,iBACA8yB,EAPK,EAOLA,KACAzJ,EARK,EAQLA,uBACAxyB,EATK,EASLA,MACAohB,EAVK,EAULA,WAGIu3B,EAAY,UAAYp1C,EAAKA,KAAKoB,WAAawE,EAAiB84B,KAEtE,GAAIwW,EAAY,CACd,IAAMxxB,EAAoBuL,EACtBxtB,aAAWqf,aAAamO,EAAuB3S,UAC/C,GAEJ,OACE,yBAAKpa,IAAKkzC,GACR,kBAACnxB,EAAA,EAAD,CACExnB,MAAOA,EACPohB,WAAYA,EAAWxC,QAAQ5e,GAC/B6f,SAAUoH,EACVQ,gBAAgB,GAEhB,kBAAC1V,EAAA,EAAWuV,SAAZ,MACG,YAA4B,IAAzBzF,EAAwB,EAAxBA,WAAY7hB,EAAY,EAAZA,MACRugC,EAAkB1e,EAAWE,aAAa/hB,GAEhD6H,QAAQkoB,KAAK,kBAAoB4oB,GACjC,IAAMtvC,EAAUmZ,mBAAiBo2B,YAC/Br1C,EACA4F,EACAo3B,GAIF,OAFA14B,QAAQgxC,QAAQ,kBAAoBF,GAGlC,kBAACj+B,EAAA,EAAD,CACExV,WAAYstB,EACZjvB,KAAMA,EACN8F,QAASlE,yBAAekE,GACxB2M,gBAAiB9D,SAS/B,OACE,yBAAKzM,IAAKkzC,GACR,kBAACj+B,EAAA,EAAD,CACE/P,aAAW,EACXtB,QAASlE,yBACPqd,mBAAiBs2B,YAAY7c,EAAMyc,W,GA/Ef/3C,IAAMoH,WAwF3BgxC,EAAqBlxB,YAAewwB,G,4ECpEjD,IAAM71C,EAAYoI,aAAW,SAAC9J,GAAD,MAAY,CACvC+J,KAAM,CACJ+C,OAAQ,EACRnM,QAASX,EAAM+L,QAAQ,IAEzBrG,MAAO,CACLC,QAAS,OACTC,cAAe,MACfgE,WAAY,SACZY,WAAY,IAGd0I,QAAS,CACPvN,QAAS,OACTC,cAAe,SACf4E,WAAY,IAEd0tC,YAAa,CACX3yC,KAAM,EACN5E,QAAS,IAEXw3C,YAAa,CACXzuC,MAAO,IACP/I,QAAS,GACTmZ,WAAY,YACZs+B,gBAAiB,WAEnBC,SAAU,CACR1yC,QAAS,OACTC,cAAe,OAEjB0yC,SAAU,CACRp4C,gBAAiB4I,IACjB6gB,aAAc,EACdxe,SAAU,UAEZotC,UAAW,CACT53C,QAAS,EACTwJ,YAAa,OAIJquC,EAAb,oLACwB5xC,EAAWC,EAAWC,GAC1C,OAAQlE,kBAAgB40C,gBACtB5wC,EAAU0T,mBAAgBxS,EAC1B9I,KAAKC,MAAMqb,mBAAgBxS,KAJjC,+BAQY,IAAD,EAC8C9I,KAAKC,MAAlDqb,EADD,EACCA,aAAc/Y,EADf,EACeA,UAAWgZ,EAD1B,EAC0BA,gBACjC,OACE,kBAAC,EAAD,eACE9X,KAAM6X,EACN/Y,UAAWA,GACP,CAAE+Y,eAAcC,yBAd5B,GAA8C1a,IAAMoH,WAoBvCmU,EAAqB,SAACnc,GACjC,IAAMwC,EAAUC,IACRe,EAA+DxD,EAA/DwD,KAAM6X,EAAyDrb,EAAzDqb,aAAcC,EAA2Ctb,EAA3Csb,gBAA6BhZ,GAActC,EAA1Bw5C,WAA0Bx5C,EAAdsC,WAEnD6P,EAAcyK,YAAmBpZ,GAJI,EAMsBR,mBAC/D,MAPyC,mBAMpCyvB,EANoC,KAMZgnB,EANY,KAUrC/mB,EAA4B,SAACia,GAC7Bx6B,GAAew6B,GACjBrnC,YAAM,wBAAyB,CAC7BhD,YACAkB,KAAM2O,EAAY1L,MAClBwT,cAAe9H,EAAY+H,UAC3B/U,WAAYwnC,EAAEvlB,SAGlBqyB,EAA+B9M,IAEjC/jC,qBAAU,WAER8pB,EAA0B,QACzB,CAAClvB,GAAQA,EAAKA,KAAKoB,aAxBqB,MA0BmBjC,qBAC5DqP,KADM/R,EA1BmC,EA0BnCA,MAAO6hB,EA1B4B,EA0B5BA,WAAY7P,EA1BgB,EA0BhBA,mBAIrB1R,GA9BqC,EA0BI8gB,WAIhC7d,EAAKiF,mBA9BuB,EAgCK7H,IAAMoC,SAAS,GAhCpB,mBAgCpC0F,EAhCoC,KAgClBC,EAhCkB,KAkC3CC,qBAAU,WAERD,EAAoB,KACnB,CAACnF,GAAQA,EAAKA,KAAKoB,aAEtB,IAAM+zC,EAAgB72B,EAAWE,aAAa/hB,GAGxC6I,GAFsBmJ,EAApBymB,gBAE0B3vB,mBAASvF,EAAKwF,oBAAdD,CAChCL,EAAmB,IAGfO,EAAqBC,YACzBJ,GAGF,IAAKG,IAAuBkJ,EAC1B,OAAO,kBAAC,IAAD,CAAmBjF,MAAM,IAGQjE,EAAlCvE,YAtDmC,IAsDtB0E,EAAqBH,EAArBG,iBAtDsB,EAwDlBA,EAAiB+sB,QAAlCvU,EAxDmC,EAwDnCA,OAAQ8B,EAxD2B,EAwD3BA,KAEhB,OADApe,YAAM,gCAAiCtF,GAErC,kBAAC,IAAD,KACE,6BACE,yBAAKkG,UAAW1D,EAAQiE,OACtB,kBAAC2N,EAAA,EAAD,CAAY7N,QAAQ,KAAKlF,MAAM,WAA/B,eAGA,yBAAKgF,MAAO,CAAEC,KAAM,KACpB,kBAAC8N,EAAA,EAAD,CAAY7N,QAAQ,WAAWF,MAAO,CAAEhF,MAAOwF,MAA/C,YAGA,kBAAC6yC,EAAA,EAAD,CACEr4C,MAAM,UACN+I,MAAO7J,EACP8J,KAAM3B,EACN4B,eAAgB/J,EAAS,EACzByG,KAAK,QACLnD,SAAU,SAACvD,EAAGiK,GAAJ,OAAmB5B,EAAoB4B,OAGrD,kBAAC,IAAD,CAAYlE,MAAO,CAAEO,UAAW,GAAIa,aAAc,MAElD,kBAAC+b,EAAA,EAAD,CAAeE,KAAMA,EAAM9B,OAAQA,IAEnC,yBAAK1b,UAAW1D,EAAQyR,SACtB,kBAACg3B,EAAA,EAAD,CAAMzjC,KAAM4B,EAAiB+sB,QAAQ+F,KAAKyd,UACxC,kBAAC,EAAD,CACEzpC,KACE,kBAAC,EAAD,CACE/J,OACE,kBAAC,IAAD,CACEgC,WAAY,CAAE1G,SAAU,GAAIJ,MAAO,SACnC6G,SAAU,CAAC,eAET9C,yBACEgE,EAAiB+sB,QAAQ+F,KAAKpyB,iBAMtC,kBAACkvC,EAAD,CACEN,WAAYl1C,EAAKgC,UACjBhC,KAAMA,EACN4F,iBAAkBA,EAClB+I,YAAaA,EACb+pB,KAAM9yB,EAAiBkrB,SAAS4H,KAChCyc,cAAeA,EACflmB,uBAAwBA,KAI9BrhB,MACE,kBAACohB,EAAA,EAAD,eACEhtB,WAAS,EACT2M,YAAaA,EACblJ,mBAAoBG,GAChB,CACFiS,eACAC,kBACAmX,yBACAC,iCAMR,yBAAKrsB,MAAO,CAAEO,UAAW,GAAIa,aAAc,KACzC,kBAAC,IAAD,QAIJ,kBAACwjC,EAAA,EAAD,CAAMzjC,KAAM4B,EAAiBkrB,SAAS4H,KAAKyd,UACzC,kBAAC,EAAD,CACEzpC,KACE,kBAAC,EAAD,CACE/J,OACE,kBAAC,IAAD,CACEgC,WAAY,CAAE1G,SAAU,GAAIJ,MAAO,SACnC6G,SAAU,CAAC,GAAD,OACLkB,EAAiBkrB,SAASvqB,WADrB,kBAER3E,yBACEgE,EAAiBkrB,SAAS4H,KAAKpyB,iBAMvC,kBAACkvC,EAAD,CACEN,WAAYl1C,EAAKoC,WACjBpC,KAAMA,EACN4F,iBAAkBA,EAClB+I,YAAaA,EACb+pB,KAAM9yB,EAAiBkrB,SAAS4H,KAChCyc,cAAeA,EACflmB,uBAAwBA,KAI9BrhB,MACE,kBAACohB,EAAA,EAAD,eACE5sB,YAAU,EACVuM,YAAaA,EACblJ,mBAAoBG,GAChB,CACFiS,eACAC,kBACAmX,yBACAC,sCAYdknB,EAAW,SAAC,GAAqB,IAAnB1pC,EAAkB,EAAlBA,KAAMkB,EAAY,EAAZA,MAClB5O,EAAUC,IAEhB,OACE,yBAAKyD,UAAW1D,EAAQ42C,UACtB,yBAAK/yC,MAAO,CAAEC,KAAM,EAAGoE,aAAc,KAAOwF,GAC5C,yBAAK7J,MAAO,CAAEoE,MAAO,MAAQ2G,KAKtByoC,EAAW,SAAC,GAA0B,IAAxB1zC,EAAuB,EAAvBA,OAAQxF,EAAe,EAAfA,SAC3B6B,EAAUC,IAEhB,OACE,yBAAKyD,UAAW1D,EAAQ62C,UACtB,yBAAKnzC,UAAW1D,EAAQ82C,WAAYnzC,GACpC,6BAAMxF,O","file":"static/js/main.d87b5d88.chunk.js","sourcesContent":["import * as React from 'react';\nimport {GenericContextFactory} from './GenericContextFactory.js';\n\nconst {\n  Context: InitialRfcCommandsContext,\n  withContext: withInitialRfcCommandsContext\n} = GenericContextFactory(null);\nglobal.devlog2 = []\nclass InitialRfcCommandsStore extends React.Component {\n  render() {\n    const {rfcId, initialCommandsString, initialEventsString} = this.props;\n    global.devlog2.push({\n      instance: this.props.instance,\n      e: initialEventsString && initialEventsString.length,\n      c: initialCommandsString && initialCommandsString.length,\n      initialEventsString,\n      initialCommandsString\n    })\n    return (\n      <InitialRfcCommandsContext.Provider value={{rfcId, initialCommandsString, initialEventsString}}>\n        {this.props.children}\n      </InitialRfcCommandsContext.Provider>\n    );\n  }\n}\n\nexport {\n  InitialRfcCommandsStore,\n  InitialRfcCommandsContext,\n  withInitialRfcCommandsContext\n};\n","import React from 'react'\nimport {withStyles} from '@material-ui/styles';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nexport const LightTooltip = withStyles(theme => ({\n  tooltip: {\n    backgroundColor: theme.palette.common.white,\n    color: 'rgba(0, 0, 0, 0.87)',\n    boxShadow: theme.shadows[1],\n    maxWidth: 600,\n    fontSize: 13,\n    padding: 8,\n  },\n}))(Tooltip);\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.JsonHttpClient = void 0;\n\nvar json_http_client_1 = require(\"./json-http-client\");\n\nObject.defineProperty(exports, \"JsonHttpClient\", {\n  enumerable: true,\n  get: function get() {\n    return json_http_client_1.JsonHttpClient;\n  }\n});","import React, { useContext, useEffect, useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport { DocDarkGrey, DocDivider } from '../../docs/DocConstants';\nimport {\n  Button,\n  CardActions,\n  Checkbox,\n  Collapse,\n  ListItemAvatar,\n} from '@material-ui/core';\nimport Paper from '@material-ui/core/Paper';\nimport MenuOpenIcon from '@material-ui/icons/MenuOpen';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport classNames from 'classnames';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport FiberManualRecordIcon from '@material-ui/icons/FiberManualRecord';\nimport {\n  CompareEquality,\n  filterScala,\n  getIndex,\n  getOrUndefined,\n  getOrUndefinedJson,\n  headOrUndefined,\n  JsonHelper,\n  lengthScala,\n  mapScala,\n  toOption,\n} from '@useoptic/domain';\nimport { DiffContext, withDiffContext } from './DiffContext';\nimport {\n  AddedGreenBackground,\n  ChangedYellowBackground,\n  RemovedRedBackground,\n  UpdatedBlue,\n} from '../../../theme';\nimport Breadcrumbs from '@material-ui/core/Breadcrumbs';\nimport Card from '@material-ui/core/Card';\nimport IconButton from '@material-ui/core/IconButton';\nimport { PulsingOptic } from './DiffHelperCard';\nimport { DiffToolTip } from './shape_viewers/styles';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { RfcContext } from '../../../contexts/RfcContext';\nimport DiffHunkViewer from './DiffHunkViewer';\nimport { ShapeExpandedStore } from './shape_viewers/ShapeRenderContext';\nimport { ShapeBox } from './DiffReviewExpanded';\nimport { ShapeOnlyViewer } from './shape_viewers/ShapeOnlyShapeRows';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Switch from '@material-ui/core/Switch';\nimport { LightTooltip } from '../../tooltips/LightTooltip';\nimport { useCaptureContext } from '../../../contexts/CaptureContext';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport {\n  useDiffDescription,\n  useInitialBodyPreview,\n  useInteractionWithPointer,\n} from './DiffHooks';\nimport { Show } from '../../shared/Show';\nimport { track } from '../../../Analytics';\n\nfunction _NewRegions(props) {\n  const { newRegions, ignoreDiff, captureId, endpointId } = props;\n\n  const classes = useStyles();\n\n  const { acceptSuggestion } = useContext(DiffContext);\n  const { diffService, captureService } = useCaptureContext();\n\n  const [deselected, setDeselected] = useState([]);\n  const [finished, setFinished] = useState(false);\n  const [showExpanded, setShowExpanded] = useState(false);\n  const [inferPolymorphism, setInferPolymorphism] = React.useState(false);\n\n  if (newRegions.length === 0) {\n    return null;\n  }\n\n  const isDeselected = (diff) =>\n    !!deselected.find((i) => CompareEquality.between(i, diff.diff));\n  const onChange = (diff) => (e) => {\n    if (!e.target.checked) {\n      setDeselected([...deselected, diff.diff]);\n    } else {\n      setDeselected(\n        deselected.filter((i) => !CompareEquality.between(i, diff.diff))\n      );\n    }\n  };\n\n  const onApply = async () => {\n    setFinished(true);\n    const allIgnored = newRegions\n      .filter((diffBlock) => isDeselected(diffBlock))\n      .map((i) => i.diff);\n\n    ignoreDiff(...allIgnored);\n\n    const allApproved = await Promise.all(\n      newRegions\n        .filter((diffBlock) => !isDeselected(diffBlock))\n        .map(async (i) => {\n          //@todo this is messy and doubles the compute\n          const { interaction } = await captureService.loadInteraction(\n            i.firstInteractionPointer\n          );\n\n          const cacheKey = i.toString() + inferPolymorphism.toString();\n          const cached = window.naiveCache && window.naiveCache[cacheKey];\n          //@todo this dups something large. @dev good spot for the state chart\n          const { suggestion } = cached\n            ? cached\n            : await diffService.loadInitialPreview(\n                i,\n                JsonHelper.fromInteraction(interaction),\n                inferPolymorphism\n              );\n\n          debugger;\n\n          return getOrUndefined(suggestion);\n        })\n    );\n    track(\"Documented Changes\")\n\n    acceptSuggestion(...allApproved);\n  };\n\n  const ignoreAll = () => {\n    const allIgnored = newRegions.map((i) => i.diff);\n    ignoreDiff(...allIgnored);\n  };\n\n  const newRequests =\n    !finished &&\n    newRegions\n      .map((diff) => {\n        if (diff.inRequest) {\n          return (\n            <PreviewNewBodyRegion\n              diff={diff}\n              key={diff.diff.toString()}\n              isDeselected={isDeselected}\n              onChange={onChange}\n              inferPolymorphism={inferPolymorphism}\n              endpointId={endpointId}\n            />\n          );\n        }\n      })\n      .filter((i) => !!i);\n\n  const newResponses =\n    !finished &&\n    newRegions\n      .map((diff) => {\n        if (diff.inResponse) {\n          return (\n            <PreviewNewBodyRegion\n              diff={diff}\n              isDeselected={isDeselected}\n              onChange={onChange}\n              key={diff.diff.toString()}\n              inferPolymorphism={inferPolymorphism}\n              endpointId={endpointId}\n            />\n          );\n        }\n      })\n      .filter((i) => !!i);\n\n  if (newRequests.length || newResponses.length) {\n    track('Diff New Bodies', {\n      requestCount: newRequests.length,\n      responseCount: newResponses.length,\n      regions: [\n        newRequests.map((i) => i.locationString),\n        newResponses.map((i) => i.locationString),\n      ],\n    });\n  }\n\n  track(\"Show Initial Documentation Page\", props)\n\n  const approveCount =\n    newResponses.length + newRequests.length - deselected.length;\n\n  return (\n    <>\n      <Card className={classes.header} elevation={2}>\n        <div style={{ flex: 1 }}>\n          <Typography variant=\"h5\" color=\"primary\" style={{ fontSize: 22 }}>\n            Generate Initial Documentation\n          </Typography>\n        </div>\n        <div className={classes.approveNewRegions}>\n          <LightTooltip\n            title={\n              <div style={{ display: 'flex', flexDirection: 'column' }}>\n                When you turn this option on, Optic will try to infer which\n                fields are Optional, Nullable or OneOfs in your bodies. This can\n                save you a lot of time when documenting large APIs. Leave this\n                option disabled to review the polymorphism in your API manually.\n                <Typography\n                  variant=\"caption\"\n                  style={{ marginTop: 12, color: DocDarkGrey }}\n                >\n                  A random 20 examples from this capture will be used for the\n                  inference, it may not catch everything.{' '}\n                </Typography>\n              </div>\n            }\n          >\n            <FormControlLabel\n              style={{ marginRight: 12 }}\n              control={\n                <Switch\n                  size=\"medium\"\n                  checked={inferPolymorphism}\n                  disabled={finished}\n                  onChange={(e) => {\n                    setInferPolymorphism(e.target.checked);\n                    if (e.target.checked) {\n                      track('Infer polymorhpism', { captureId });\n                    }\n                  }}\n                  color=\"primary\"\n                />\n              }\n              labelPlacement=\"start\"\n              label={\n                <Typography\n                  variant=\"body1\"\n                  color=\"textSecondary\"\n                  style={{ fontSize: 12 }}\n                >\n                  Infer Polymorphism\n                </Typography>\n              }\n            />\n          </LightTooltip>\n          <Button\n            size=\"small\"\n            color=\"default\"\n            onClick={ignoreAll}\n            disabled={finished}\n            style={{ marginRight: 10 }}\n          >\n            Ignore All\n          </Button>\n          <Button\n            size=\"small\"\n            color=\"primary\"\n            variant=\"contained\"\n            disabled={approveCount === 0 || finished}\n            onClick={onApply}\n          >\n            Document ({approveCount || ''}) bodies\n          </Button>\n        </div>\n        {finished && <LinearProgress />}\n      </Card>\n\n      {!finished && (\n        <div className={classes.wrapper}>\n          <div className={classes.diffsNewRegion}>\n            {newRequests.length > 0 && (\n              <div className={classes.region}>\n                <Typography variant=\"h6\" color=\"primary\">\n                  Requests\n                </Typography>\n                {newRequests}\n              </div>\n            )}\n\n            <Show when={newRequests.length}>\n              <DocDivider style={{ marginTop: 30, marginBottom: 20 }} />\n            </Show>\n\n            {newResponses.length > 0 && (\n              <div className={classes.region}>\n                <Typography variant=\"h6\" color=\"primary\">\n                  Responses\n                </Typography>\n                {newResponses}\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n    </>\n  );\n}\n\nexport class NewRegions extends React.Component {\n  shouldComponentUpdate(nextProps, nextState, nextContext) {\n    const result = CompareEquality.between(\n      nextProps.newRegions,\n      this.props.newRegions\n    );\n\n    //@todo add ignore here\n    return !result;\n  }\n\n  render() {\n    console.log('rendering all over again');\n    return <_NewRegions {...this.props} />;\n  }\n}\n\nexport const BreadcumbX = (props) => {\n  const classes = useStyles();\n  const { location, itemStyles } = props;\n  return (\n    <Breadcrumbs\n      className={classes.location}\n      separator={<span style={{ fontSize: 13, ...itemStyles }}>{'›'}</span>}\n      aria-label=\"breadcrumb\"\n    >\n      {location\n        .filter((i) => !!i)\n        .map((n) => (\n          <Typography\n            key={n}\n            style={itemStyles}\n            className={classes.crumb}\n            color=\"primary\"\n          >\n            {n}\n          </Typography>\n        ))}\n    </Breadcrumbs>\n  );\n};\n\nconst PreviewNewBodyRegion = ({\n  diff,\n  inferPolymorphism,\n  isDeselected,\n  onChange,\n  endpointId,\n}) => {\n  const isChecked = !isDeselected(diff);\n  const classes = useStyles();\n  const length = diff.interactionsCount;\n\n  const [interactionIndex, setInteractionIndex] = React.useState(1);\n\n  useEffect(() => {\n    setInteractionIndex(1);\n  }, [diff.diff ? diff.diff.toString() : undefined]);\n\n  const currentInteractionPointer = getIndex(diff.interactionPointers)(\n    interactionIndex - 1\n  );\n\n  const currentInteraction = useInteractionWithPointer(\n    currentInteractionPointer\n  );\n\n  const { preview: initialBody, loadingInferPoly } = useInitialBodyPreview(\n    diff,\n    currentInteraction && currentInteraction.interactionScala,\n    inferPolymorphism,\n    endpointId\n  );\n\n  if (!currentInteraction || !initialBody || loadingInferPoly) {\n    return <LinearProgress />;\n  }\n\n  const bodyPreview = getOrUndefined(initialBody.bodyPreview);\n  const shapePreview = getOrUndefined(initialBody.shapePreview);\n\n  return (\n    <>\n      <Card className={classes.regionHeader} elevation={2}>\n        <Checkbox\n          checked={isChecked}\n          onChange={onChange(diff)}\n          color=\"primary\"\n        />\n        <ListItemText\n          className={classNames({\n            [classes.uncheckedText]: !isChecked,\n          })}\n          primary={\n            diff.inRequest\n              ? getOrUndefined(diff.contentType) || 'No Body'\n              : `${getOrUndefined(diff.statusCode)} Response ${\n                  getOrUndefined(diff.contentType) || 'No Body'\n                }`\n          }\n          secondary={`Observed ${diff.interactionsCount} times`}\n          primaryTypographyProps={{ style: { fontSize: 14 } }}\n          secondaryTypographyProps={{ style: { fontSize: 12 } }}\n        />\n\n        <div style={{ flex: 1 }} />\n        {length > 1 && getOrUndefined(diff.contentType) && (\n          <Pagination\n            color=\"primary\"\n            className={classNames({ [classes.unchecked]: !isChecked })}\n            style={{ display: 'flex' }}\n            count={length}\n            page={interactionIndex}\n            showLastButton={length > 5}\n            size=\"small\"\n            onChange={(e, pageNumber) => setInteractionIndex(pageNumber)}\n          />\n        )}\n      </Card>\n\n      <div\n        className={classNames(classes.newContentPreview, {\n          [classes.unchecked]: !isChecked,\n        })}\n      >\n        <div style={{ width: '55%', paddingRight: 15 }}>\n          {bodyPreview && (\n            <ShapeBox\n              header={\n                <div style={{ display: 'flex', alignItems: 'center' }}>\n                  <BreadcumbX\n                    itemStyles={{ fontSize: 13, color: 'white' }}\n                    location={['Example']}\n                  />\n                  <div style={{ flex: 1 }}></div>\n                  <span style={{ color: 'white' }}>⮕</span>\n                </div>\n              }\n            >\n              <ShapeExpandedStore>\n                <DiffHunkViewer preview={bodyPreview} exampleOnly />\n              </ShapeExpandedStore>\n            </ShapeBox>\n          )}\n        </div>\n        <div style={{ flex: 1 }}>\n          {shapePreview && (\n            <ShapeBox\n              header={\n                <BreadcumbX\n                  itemStyles={{ fontSize: 13, color: 'white' }}\n                  location={['Documented Shape']}\n                />\n              }\n            >\n              <ShapeExpandedStore>\n                <ShapeOnlyViewer preview={shapePreview} exampleOnly />\n              </ShapeExpandedStore>\n            </ShapeBox>\n          )}\n        </div>\n      </div>\n    </>\n  );\n};\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n  },\n  blur: {\n    opacity: 0.3,\n    pointerEvents: 'none',\n  },\n  header: {\n    backgroundColor: 'white',\n    padding: 8,\n    paddingLeft: 12,\n    display: 'flex',\n    justifyContent: 'center',\n    position: 'sticky',\n    top: 0,\n    zIndex: 500,\n    alignItems: 'center',\n  },\n  region: {\n    padding: 5,\n  },\n  regionHeader: {\n    display: 'flex',\n    flexDirection: 'row',\n    marginTop: 16,\n    paddingRight: 12,\n  },\n  approveNewRegions: {\n    paddingRight: 10,\n  },\n  newContentPreview: {\n    paddingTop: 16,\n    paddingRight: 8,\n    display: 'flex',\n    flexDirection: 'row',\n  },\n  unchecked: {\n    pointerEvents: 'none',\n    opacity: 0.38,\n  },\n  uncheckedText: {\n    pointerEvents: 'none',\n    opacity: 0.68,\n  },\n  hunkHeader: {\n    paddingRight: 10,\n    paddingTop: 5,\n    paddingBottom: 5,\n    color: '#25292e',\n    minHeight: 40,\n    fontWeight: 800,\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'start',\n    justifyContent: 'start',\n  },\n  location: {\n    marginLeft: 12,\n  },\n  diff: {\n    fontSize: 12,\n    fontWeight: 600,\n    color: '#f8333c',\n    marginLeft: 11,\n    flex: 1,\n    paddingLeft: 30,\n  },\n  crumb: {\n    fontSize: 12,\n    textTransform: 'uppercase',\n  },\n  heading: {\n    fontSize: theme.typography.pxToRem(17),\n    padding: 0,\n    fontWeight: theme.typography.fontWeightRegular,\n  },\n  wrapper: {\n    overflow: 'hidden',\n    paddingTop: 18,\n  },\n  hunk: {\n    backgroundColor: 'white',\n    minHeight: 300,\n  },\n  subheader: {\n    fontWeight: 100,\n    paddingBottom: 0,\n    marginBottom: 0,\n    height: 33,\n  },\n  diffsNewRegion: {\n    display: 'flex',\n    flexDirection: 'column',\n    paddingLeft: 5,\n    justifyContent: 'center',\n  },\n}));\n\nconst addition = (\n  <FiberManualRecordIcon\n    style={{ width: '.7em', height: '.7em', color: AddedGreenBackground }}\n  />\n);\n\nconst update = (\n  <FiberManualRecordIcon\n    style={{ width: '.7em', height: '.7em', color: ChangedYellowBackground }}\n  />\n);\n\nconst removal = (\n  <FiberManualRecordIcon\n    style={{ width: '.7em', height: '.7em', color: RemovedRedBackground }}\n  />\n);\n","import withStyles from '@material-ui/core/styles/withStyles';\nimport Tab from '@material-ui/core/Tab';\nimport React from 'react';\nimport { primary } from '../../../theme';\n\nexport const CustomNavTab = withStyles((theme) => {\n  return {\n    root: {\n      textTransform: 'none',\n      color: primary,\n      padding: 0,\n      marginTop: 5,\n      height: 35,\n      minHeight: 'inherit',\n      minWidth: 'inherit',\n      fontWeight: 500,\n      textAlign: 'left',\n      fontSize: theme.typography.pxToRem(13),\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap',\n      marginRight: theme.spacing(2),\n      '&:focus': {\n        opacity: 1,\n      },\n    },\n    wrapper: {\n      alignItems: 'flex-start',\n    },\n  };\n})((props) => <Tab disableRipple {...props} />);\n\nexport const CustomNavTabDense = withStyles((theme) => {\n  return {\n    root: {\n      textTransform: 'none',\n      color: primary,\n      padding: 0,\n      marginTop: 5,\n      height: 20,\n      minHeight: 'inherit',\n      minWidth: 'inherit',\n      fontWeight: 500,\n      textAlign: 'left',\n      fontSize: theme.typography.pxToRem(12),\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap',\n      marginRight: theme.spacing(2),\n      '&:focus': {\n        opacity: 1,\n      },\n    },\n    wrapper: {\n      alignItems: 'flex-start',\n    },\n  };\n})((props) => (\n  <Tab\n    disableRipple\n    {...props}\n    label={\n      <div style={{ display: 'flex', width: '100%' }}>\n        <div style={{ flex: 1 }}>{props.label}</div>\n        <div>{props.count}</div>\n      </div>\n    }\n  />\n));\n","import React from 'react';\nimport Skeleton from '@material-ui/lab/Skeleton';\nimport { primary } from '../../../theme';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport { DocDarkGrey } from '../../docs/DocConstants';\n\nexport function DiffLoading({ show }) {\n  const classes = useStyles();\n\n  // if (!show) {\n  //   return null;\n  // }\n\n  return (\n    <div className={classes.root}>\n      <div className={classes.top}>\n        <Skeleton variant=\"rect\" height={80} />\n      </div>\n      <div className={classes.sideBySide}>\n        <Skeleton\n          variant=\"rect\"\n          height={550}\n          component=\"div\"\n          className={classes.textParent}\n        >\n          <Typography\n            component=\"div\"\n            className={classes.text}\n            variant=\"overline\"\n          >\n            Waiting for Next Diff...\n          </Typography>\n        </Skeleton>\n        <div style={{ width: 20 }} />\n        <Skeleton variant=\"rect\" width={250} height={200} />\n      </div>\n    </div>\n  );\n}\n\nexport function DiffLoadingOverview({ show }) {\n  const classes = useStyles();\n\n  if (!show) {\n    return null;\n  }\n\n  return (\n    <div className={classes.rootOverview}>\n      <Skeleton\n        variant=\"rect\"\n        height={60}\n        component=\"div\"\n        style={{ marginTop: 12 }}\n      />\n\n      <Skeleton\n        variant=\"rect\"\n        height={60}\n        component=\"div\"\n        style={{ marginTop: 12 }}\n      />\n      <Skeleton\n        variant=\"rect\"\n        height={60}\n        component=\"div\"\n        style={{ marginTop: 12 }}\n      />\n      <Skeleton\n        variant=\"rect\"\n        height={60}\n        component=\"div\"\n        style={{ marginTop: 12 }}\n      />\n    </div>\n  );\n}\n\nexport function DiffReviewLoading({ show }) {\n  const classes = useStyles();\n\n  if (!show) {\n    return null;\n  }\n\n  return (\n    <div className={classes.rootUnder}>\n      <div className={classes.sideBySide}>\n        <Skeleton\n          variant=\"rect\"\n          height={550}\n          component=\"div\"\n          className={classes.textParent}\n          withChildren={{\n            withChildren: classes.withChildren,\n          }}\n        >\n          <Typography\n            component=\"div\"\n            className={classes.text}\n            variant=\"overline\"\n            style={{ visibility: 'inherit' }}\n          >\n            Loading Example and Diff...\n          </Typography>\n        </Skeleton>\n        <div style={{ width: 20 }} />\n        <Skeleton variant=\"rect\" width={250} height={200} />\n      </div>\n    </div>\n  );\n}\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n  },\n  rootOverview: {\n    paddingLeft: 15,\n    paddingRight: 15,\n  },\n  rootUnder: {\n    width: '100%',\n    marginTop: 70,\n  },\n  text: {\n    margin: '0 auto',\n    fontSize: 20,\n    fontWeight: 400,\n    color: '#959191',\n    visibility: 'inherit !important',\n  },\n  textParent: {\n    display: 'flex',\n    justifyContent: 'center',\n    flex: 1,\n    maxWidth: 'inherit',\n    alignItems: 'center',\n  },\n  top: {\n    paddingBottom: 20,\n  },\n  sideBySide: {\n    display: 'flex',\n    maxWidth: 'inherit',\n    flexDirection: 'row',\n  },\n  withChildren: {\n    visibility: 'inherit',\n  },\n}));\n","import Divider from '@material-ui/core/Divider';\nimport React from 'react';\nimport { Typography } from '@material-ui/core';\nimport { primary } from '../../theme';\n\nexport const SubHeadingTitleColor = primary;\nexport const DocGrey = '#a3acb9';\nexport const DocDarkGrey = '#818892';\nexport const Dark = '#3d4045';\nexport const ParametersStyles = {\n  fontWeight: 600,\n  fontSize: 13,\n};\nexport const SubHeadingStyles = {\n  color: SubHeadingTitleColor,\n  fontWeight: 600,\n  letterSpacing: '.41px',\n  textTransform: 'none',\n};\nexport const DocSubGroupHeadingStyles = {\n  color: DocGrey,\n  fontSize: '12px',\n  fontWeight: 500,\n  letterSpacing: '.41px',\n};\nexport const DocSubGroupHeadingBigStyles = {\n  color: DocDarkGrey,\n  fontSize: '15px',\n  fontWeight: 500,\n  letterSpacing: '.41px',\n};\n\nexport const methodColors = {\n  GET: '#52e2a3',\n  POST: '#5aaad1',\n  PUT: '#ee7517',\n  PATCH: '#c8a5dc',\n  DELETE: '#cd8d8c',\n};\n\nexport const methodColorsDark = {\n  GET: '#276c4e',\n  POST: '#264859',\n  PUT: '#69340a',\n  PATCH: '#796384',\n  DELETE: '#634444',\n};\n\nexport const primitiveDocColors = {\n  $string: '#00f2ff',\n  $number: '#e0ff00',\n  $boolean: '#ff9868',\n  $object: '#00ec57',\n  $list: '#d3c90a',\n  $map: '#7d521f',\n  $unknown: '#027a7d',\n};\n\nexport const DocDivider = ({ style }) => (\n  <Divider style={{ ...style, backgroundColor: '#e3e8ee' }} />\n);\nexport const DocSubHeading = ({ title, onClick }) => (\n  <Typography onClick={onClick} variant=\"h5\" style={SubHeadingStyles}>\n    {' '}\n    {title}{' '}\n  </Typography>\n);\n","import React, { useContext, useEffect, useState } from 'react';\nimport { TextField, Typography } from '@material-ui/core';\nimport DescriptionIcon from '@material-ui/icons/Description';\nimport classNames from 'classnames';\nimport {\n  AddedGreenBackground,\n  ChangedYellowBackground,\n  RemovedRedBackground,\n} from '../../../../theme';\nimport {\n  ShapeExpandedContext,\n  ShapeRenderContext,\n  ShapeRenderStore,\n  withShapeRenderContext,\n} from './ShapeRenderContext';\nimport {\n  getOrUndefined,\n  getOrUndefinedJson,\n  lengthScala,\n  mapScala,\n  toOption,\n} from '@useoptic/domain';\n\nimport {\n  HiddenItemEllipsis,\n  SymbolColor,\n  Symbols,\n  TypeName,\n  useColor,\n  useShapeViewerStyles,\n} from './styles';\nimport { DepthContext, Indent, IndentIncrement } from './Indent';\nimport Paper from '@material-ui/core/Paper';\nimport Collapse from '@material-ui/core/Collapse';\nimport { RfcContext } from '../../../../contexts/RfcContext';\nimport { DESCRIPTION } from '../../../../ContributionKeys';\nimport IconButton from '@material-ui/core/IconButton';\nimport { LightTooltip } from '../../../tooltips/LightTooltip';\nimport {\n  FieldDescriptionMarkdownRender,\n  MarkdownRender,\n} from '../../../docs/DocContribution';\nimport { commandsForUpdatingContribution } from '../../../../engine/routines';\n\nexport function ShapeOnlyViewer(props) {\n  const { preview, exampleOnly } = props;\n  const classes = useShapeViewerStyles();\n\n  if (!preview) {\n    return null;\n  }\n\n  const rootShape = preview.rootId;\n  const shape = getOrUndefined(preview.getRootShape);\n\n  if (!shape) {\n    throw new Error('Could not render root shape');\n  }\n\n  return (\n    <ShapeRenderStore\n      shape={preview}\n      hideDivider={true}\n      exampleOnly={exampleOnly}\n    >\n      <div className={classes.root}>\n        <DepthContext.Provider value={{ depth: 0 }}>\n          {renderShape(shape)}\n        </DepthContext.Provider>\n      </div>\n    </ShapeRenderStore>\n  );\n}\n\nfunction renderShape(shape, nested) {\n  if (!shape) {\n    return null;\n  }\n\n  switch (shape.baseShapeId) {\n    case '$object':\n      return <ObjectRender shape={shape} nested={Boolean(nested)} />;\n      break;\n    default:\n      return <AnyShape shape={shape} />;\n  }\n}\n\nexport const AnyShape = (props) => {\n  const classes = useShapeViewerStyles();\n  const { shapeRender } = useContext(ShapeRenderContext);\n  const { shape } = props;\n\n  const [renderChild, setRenderChild] = useState(null);\n\n  useEffect(() => {\n    setRenderChild(null);\n  }, [shape]);\n\n  const setType = (link) => {\n    if (link === renderChild) {\n      return setRenderChild(null);\n    }\n    setRenderChild(link);\n  };\n\n  return (\n    <>\n      <Row\n        left={(() => {\n          return (\n            <Indent>\n              <div className={classes.rowContents}>\n                <div style={{ flex: 1, paddingLeft: 4 }}>\n                  <TypeName typeName={shape.name} onTypeClick={setType} />\n                </div>\n              </div>\n            </Indent>\n          );\n        })()}\n      />\n      <Collapse in={!!renderChild}>\n        {renderChild && (\n          <Indent add={2}>\n            <Paper className={classes.nested} elevation={6}>\n              <DepthContext.Provider value={{ depth: 0 }}>\n                {renderShape(\n                  getOrUndefined(shapeRender.getSpecShape(renderChild))\n                )}\n              </DepthContext.Provider>\n            </Paper>\n          </Indent>\n        )}\n      </Collapse>\n    </>\n  );\n};\n\nexport const Row = withShapeRenderContext((props) => {\n  const classes = useShapeViewerStyles();\n\n  const { exampleOnly, onLeftClick, stayHighlighted, hideDivider } = props;\n\n  const rowHighlightColor = (() => {\n    if (props.highlight === 'Addition') {\n      return AddedGreenBackground;\n    } else if (props.highlight === 'Update') {\n      return ChangedYellowBackground;\n    } else if (props.highlight === 'Removal') {\n      return RemovedRedBackground;\n    }\n  })();\n\n  return (\n    <div\n      className={classNames(classes.row, {\n        [classes.stayHighlighted]: stayHighlighted,\n        [classes.rowWithHover]: !props.noHover,\n      })}\n      style={{ backgroundColor: rowHighlightColor }}\n    >\n      <div className={classes.left} onClick={onLeftClick}>\n        {props.left}\n      </div>\n      {!exampleOnly && !hideDivider && (\n        <div className={classes.spacerBorder}>\n          {' '.replace(/ /g, '\\u00a0')}\n        </div>\n      )}\n      {!exampleOnly && (\n        <div className={classes.right} style={{ width: '50%' }}>\n          {props.right}\n        </div>\n      )}\n    </div>\n  );\n});\n\nexport const ObjectRender = withShapeRenderContext((props) => {\n  const classes = useShapeViewerStyles();\n  const { shapeRender, shape, nested } = props;\n  const fields = shape.fields;\n  return (\n    <>\n      {!nested && <Row left={<Symbols>{'{'}</Symbols>} noHover />}\n      {mapScala(fields)((field) => (\n        <FieldRow field={field} />\n      ))}\n      <IndentIncrement>\n        <Row left={<Symbols withIndent>{'}'}</Symbols>} noHover />\n      </IndentIncrement>\n    </>\n  );\n});\n\n// export const ListRender = withShapeRenderContext((props) => {\n//   const classes = useShapeViewerStyles();\n//   const {shapeRender, shape, nested} = props;\n//   const listId = shape.shapeId;\n//   const listItem = getOrUndefined(shapeRender.listItemShape(listId));\n//\n//\n//   const {showAllLists} = useContext(ShapeExpandedContext);\n//\n//   const items = shapeRender.resolvedItems(shape.shapeId, !showAllLists.includes(listId));\n//\n//   return (\n//     <>\n//       {!nested && <Row left={<Symbols>{'['}</Symbols>} noHover/>}\n//       {mapScala(items)((item, index) => {\n//         return <ItemRow item={item}\n//                         listItemShape={listItem}\n//                         listId={listId}\n//                         isLast={index - 1 === lengthScala(items)}/>;\n//       })}\n//       <IndentIncrement><Row left={<Symbols withIndent>{']'}</Symbols>} noHover/></IndentIncrement>\n//     </>\n//   );\n// });\n\nfunction FieldName({ children, missing }) {\n  const classes = useShapeViewerStyles();\n  return (\n    <Typography\n      variant=\"caption\"\n      className={classes.fieldName}\n      style={{ opacity: missing ? 0.4 : 1 }}\n    >\n      {children}:\n    </Typography>\n  );\n}\n\nfunction IndexMarker({ children }) {\n  const classes = useShapeViewerStyles();\n  return (\n    <Typography variant=\"caption\" className={classes.indexMarker}>\n      {children}:\n    </Typography>\n  );\n}\n\nfunction ValueRows({ shape }) {\n  const classes = useShapeViewerStyles();\n  return <IndentIncrement add={1}>{renderShape(shape, true)}</IndentIncrement>;\n}\n\nfunction FieldDescription({ fieldId }) {\n  const classes = useShapeViewerStyles();\n  const { cachedQueryResults, handleCommands } = useContext(RfcContext);\n  const { contributions } = cachedQueryResults;\n\n  const description = contributions.getOrUndefined(fieldId, DESCRIPTION);\n\n  const [editing, setEditing] = useState(false);\n  const [stagedContent, setStagedContent] = useState(description || '');\n\n  const handleChange = (e) => setStagedContent(e.target.value);\n  const displayDescription = description || stagedContent;\n  const finalize = () => {\n    if (stagedContent !== description) {\n      handleCommands(\n        ...commandsForUpdatingContribution(fieldId, DESCRIPTION, stagedContent)\n      );\n    }\n    setEditing(false);\n  };\n\n  return (\n    <div\n      className={classes.fieldDescription}\n      style={{ justifyContent: 'flex-end' }}\n    >\n      {editing && (\n        <TextField\n          value={stagedContent}\n          onChange={handleChange}\n          onBlur={finalize}\n          autoFocus\n          fullWidth={true}\n          multiline={true}\n          inputProps={{ onBlur: finalize, style: { color: SymbolColor } }}\n          size=\"small\"\n        />\n      )}\n      {!editing && displayDescription && (\n        <div style={{ flex: 1 }} onClick={() => setEditing(true)}>\n          <FieldDescriptionMarkdownRender\n            source={displayDescription}\n            noHeadings={true}\n          />\n        </div>\n      )}\n      {!description && !editing && (\n        <LightTooltip title=\"Add Field Description\">\n          <DescriptionIcon\n            className={'descriptionButton'}\n            onClick={() => setEditing(true)}\n            style={{\n              width: 15,\n              display: 'none',\n              height: 15,\n              cursor: 'pointer',\n              color: SymbolColor,\n            }}\n            color=\"primary\"\n          />\n        </LightTooltip>\n      )}\n    </div>\n  );\n}\n\nexport const FieldRow = withShapeRenderContext((props) => {\n  const classes = useShapeViewerStyles();\n  const { field, shapeRender } = props;\n  const fieldName = field.fieldName;\n  const fieldShape = field.shape;\n\n  const fieldId = field.specFieldId;\n\n  const [renderChild, setRenderChild] = useState(null);\n\n  useEffect(() => {\n    setRenderChild(null);\n  }, [fieldShape]);\n\n  const setType = (link) => {\n    if (link === renderChild) {\n      return setRenderChild(null);\n    }\n    setRenderChild(link);\n  };\n\n  return (\n    <>\n      <Row\n        stayHighlighted={Boolean(renderChild)}\n        left={\n          <Indent>\n            <div className={classes.rowContents}>\n              <div>\n                <FieldName>{fieldName}</FieldName>\n              </div>\n              <div style={{ flex: 1, paddingLeft: 4 }}>\n                {fieldShape.isObject ? (\n                  <Symbols children={'{'} />\n                ) : (\n                  <TypeName typeName={fieldShape.name} onTypeClick={setType} />\n                )}\n              </div>\n            </div>\n          </Indent>\n        }\n        right={<FieldDescription fieldId={fieldId} />}\n      />\n      {/* this will insert nested rows */}\n      {fieldShape && fieldShape.isObject ? (\n        <ValueRows shape={fieldShape} />\n      ) : (\n        <Collapse in={!!renderChild}>\n          {renderChild && (\n            <Indent add={2}>\n              <Paper className={classes.nested} elevation={6}>\n                <DepthContext.Provider value={{ depth: 0 }}>\n                  {renderShape(\n                    getOrUndefined(shapeRender.getSpecShape(renderChild))\n                  )}\n                </DepthContext.Provider>\n              </Paper>\n            </Indent>\n          )}\n        </Collapse>\n      )}\n    </>\n  );\n});\n\n// export const ItemRow = withShapeRenderContext((props) => {\n//   const classes = useShapeViewerStyles();\n//   const {item, shapeRender, isLast, listId, listItemShape} = props;\n//\n//   const resolvedShape = getOrUndefined(shapeRender.resolveItemShape(toOption(listItemShape))) || getOrUndefined(shapeRender.resolveItemShapeFromShapeId(item.item.shapeId));\n//\n//\n//   return (\n//     <>\n//       <Row\n//         left={(() => {\n//\n//           if (item.display === 'hidden') {\n//             return <Indent><HiddenItemEllipsis expandId={listId}/></Indent>;\n//           }\n//\n//           return (<Indent>\n//               <div className={classes.rowContents}>\n//                 <IndexMarker>{item.index}</IndexMarker>\n//                 <div style={{flex: 1, paddingLeft: 4}}>\n//                   <TypeName typeName={resolvedShape.name} />\n//                 </div>\n//               </div>\n//             </Indent>\n//           );\n//         })()}\n//       />\n//       {item.display !== 'hidden' &&\n//       <ValueRows value={getOrUndefinedJson(item.item.exampleValue)} shape={resolvedShape}/>}\n//     </>\n//   );\n// });\n","import React from 'react';\nimport { Button } from '@material-ui/core';\n\nexport const NeedHelp = () => {\n  const askForHelp = () => {\n    window.Intercom('showNewMessage', 'Hey Optic team, I have a question!');\n    window.Intercom('update', { hide_default_launcher: false });\n  };\n  return (\n    <Button color=\"secondary\" onClick={askForHelp}>\n      Need Help?\n    </Button>\n  );\n};\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ReactMarkdown from 'react-markdown';\nimport { Button, Typography } from '@material-ui/core';\nimport Paper from '@material-ui/core/Paper';\nimport { DocDivider } from '../docs/DocConstants';\nimport { secondary } from '../../theme';\nimport { NeedHelp } from './NeedHelpButton';\n\nconst useStyles = makeStyles((theme) => ({\n  header: {\n    textAlign: 'center',\n    marginBottom: 22,\n  },\n  paper: {\n    padding: 20,\n    width: 400,\n    margin: '0px auto',\n    paddingBottom: 10,\n  },\n  inlineCode: {\n    backgroundColor: '#e2e2e2',\n    padding: 2,\n    fontSize: 12,\n    paddingTop: 1,\n    paddingBottom: 1,\n    display: 'inline-block',\n    color: secondary,\n  },\n}));\n\nexport default function EmptyState(props) {\n  const classes = useStyles();\n  const { title, content } = props;\n\n  return (\n    <Paper className={classes.paper}>\n      <div className={classes.header}>\n        <img src=\"/optic-logo.svg\" />\n        <Typography variant=\"h6\" color=\"primary\">\n          {title}\n        </Typography>\n      </div>\n\n      <DocDivider style={{ marginBottom: 30 }} />\n\n      <EmptyStateMarkdown source={content} />\n\n      <div style={{ display: 'flex', marginTop: 15 }}>\n        <div style={{ flex: 1 }} />\n        <NeedHelp />\n      </div>\n    </Paper>\n  );\n}\n\nfunction EmptyStateMarkdown({ source, style }) {\n  const classes = useStyles();\n\n  return (\n    <div style={style}>\n      <ReactMarkdown\n        source={source}\n        renderers={{\n          paragraph: ({ children }) => (\n            <Typography\n              variant=\"body2\"\n              style={{ fontWeight: 200, marginTop: 11, whiteSpace: 'pre-wrap' }}\n            >\n              {children}\n            </Typography>\n          ),\n          inlineCode: ({ children }) => (\n            <Typography className={classes.inlineCode}>{children}</Typography>\n          ),\n        }}\n      />\n    </div>\n  );\n}\n","import React, {\n  useCallback,\n  useContext,\n  useEffect,\n  useRef,\n  useState,\n} from 'react';\nimport { Typography } from '@material-ui/core';\nimport classNames from 'classnames';\nimport scrollIntoView from 'scroll-into-view-if-needed';\nimport WarningIcon from '@material-ui/icons/Warning';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\nimport {\n  AddedGreenBackground,\n  ChangedYellowBackground,\n  RemovedRedBackground,\n  secondary,\n} from '../../../../theme';\nimport {\n  ShapeExpandedContext,\n  ShapeRenderContext,\n  withShapeRenderContext,\n  useDiff,\n} from './ShapeRenderContext';\nimport CheckIcon from '@material-ui/icons/Check';\nimport {\n  getOrUndefined,\n  getOrUndefinedJson,\n  headOrUndefined,\n  JsonHelper,\n  lengthScala,\n  mapScala,\n  getJson,\n  toOption,\n} from '@useoptic/domain';\nimport { withDiffContext } from '../DiffContext';\nimport { DepthContext, Indent, IndentIncrement } from './Indent';\nimport {\n  HiddenItemEllipsis,\n  Symbols,\n  TypeName,\n  useColor,\n  useShapeViewerStyles,\n} from './styles';\nimport { AnyShape } from './ShapeOnlyShapeRows';\n\nexport const DiffViewer = ({ shape }) => {\n  const classes = useShapeViewerStyles();\n  const containerRef = useRef(null);\n  const { ref: compassTargetRef, compassState } = useCompassTargetTracker(true);\n  const { diff, diffDescription } = useDiff();\n\n  useEffect(() => {\n    const containerEl = containerRef.current;\n    compassTargetRef.current = containerEl.querySelector(\n      `.${classes.isTracked} .${classes.right}`\n    );\n\n    return () => {\n      compassTargetRef.current = null;\n    };\n  }, [diff && diff.toString()]); //may be undefined\n\n  const onClickCompass = useCallback(\n    (e) => {\n      e.preventDefault();\n      if (!compassTargetRef.current) return;\n\n      scrollIntoView(compassTargetRef.current, {\n        scrollMode: 'always',\n        block: 'center',\n      });\n    },\n    [diff && diff.toString()] //may be undefined\n  );\n\n  return (\n    <div ref={containerRef} className={classes.root}>\n      <DepthContext.Provider value={{ depth: 0 }}>\n        {renderShape(shape)}\n      </DepthContext.Provider>\n\n      {diff && (\n        <RowCompass\n          changeType={diffDescription.changeTypeAsString}\n          {...compassState}\n          onClick={onClickCompass}\n        />\n      )}\n    </div>\n  );\n};\n\nfunction renderShape(shape, nested) {\n  if (!shape) {\n    return null;\n  }\n\n  switch (shape.baseShapeId) {\n    case '$object':\n      return <ObjectRender shape={shape} nested={Boolean(nested)} />;\n    case '$list':\n      return <ListRender shape={shape} nested={Boolean(nested)} />;\n    default:\n      return (\n        <Row\n          left={<ValueContents shape={shape} value={getJson(shape.example)} />}\n        />\n      );\n  }\n}\n\nfunction getHighlightColor(changeType) {\n  if (changeType === 'Addition') {\n    return AddedGreenBackground;\n  } else if (changeType === 'Update') {\n    return ChangedYellowBackground;\n  } else if (changeType === 'Removal') {\n    return RemovedRedBackground;\n  }\n}\n\nexport const Row = withShapeRenderContext((props) => {\n  const classes = useShapeViewerStyles();\n  const { exampleOnly, onLeftClick } = props;\n\n  const rowHighlightColor = getHighlightColor(props.changeType);\n\n  return (\n    <div\n      className={classNames(classes.row, {\n        [classes.rowWithHover]: !props.noHover,\n        [classes.isTracked]: !!props.tracked, // important for the compass to work\n      })}\n      style={{ backgroundColor: rowHighlightColor }}\n    >\n      <div className={classes.left} onClick={onLeftClick}>\n        {props.left}\n      </div>\n      {!exampleOnly && (\n        <div className={classes.spacerBorder}>\n          {' '.replace(/ /g, '\\u00a0')}\n        </div>\n      )}\n      {!exampleOnly && <div className={classes.right}>{props.right}</div>}\n    </div>\n  );\n});\nRow.displayName = 'ShapeViewer/Row';\n\nfunction RowCompass(props) {\n  const classes = useShapeViewerStyles();\n  const highlightColor = getHighlightColor(props.changeType);\n  const { x, width, isAbove, isBelow } = props;\n\n  return (\n    <div\n      className={classNames(classes.rowCompass, {\n        [classes.isAbove]: isAbove,\n        [classes.isBelow]: isBelow,\n      })}\n      style={{\n        left: x,\n        width,\n      }}\n      onClick={props.onClick}\n    >\n      <div\n        className={classes.rowCompassBody}\n        style={{ backgroundColor: highlightColor }}\n      >\n        <ArrowDownwardIcon\n          className={classNames(\n            classes.rowCompassDirection,\n            classes.rowCompassDirectionDown\n          )}\n        />\n        <ArrowUpwardIcon\n          className={classNames(\n            classes.rowCompassDirection,\n            classes.rowCompassDirectionUp\n          )}\n        />\n\n        <DiffNotif />\n      </div>\n    </div>\n  );\n}\n\nexport const ObjectRender = withShapeRenderContext((props) => {\n  const { shapeRender, shape, nested } = props;\n  const fields = shape.fields;\n\n  return (\n    <>\n      {!nested && (\n        <Row\n          left={<Symbols>{'{'}</Symbols>}\n          right={<AssertionMetTypeName typeName={shape.name} />}\n          noHover\n        />\n      )}\n      {mapScala(fields)((field) => {\n        const key = [field.fieldName, headOrUndefined(field.diffs)].join('-');\n\n        return <FieldRow key={key} field={field} parent={shape} />;\n      })}\n      <IndentIncrement>\n        <Row left={<Symbols withIndent>{'}'}</Symbols>} noHover />\n      </IndentIncrement>\n    </>\n  );\n});\n\nexport const ListRender = withShapeRenderContext((props) => {\n  const classes = useShapeViewerStyles();\n  const { shapeRender, shape, nested } = props;\n  const { showAllLists } = useContext(ShapeExpandedContext);\n\n  const listId = shape.id;\n\n  const items = shape.itemsWithHidden(showAllLists.includes(listId));\n\n  return (\n    <>\n      {!nested && (\n        <Row\n          left={<Symbols>{'['}</Symbols>}\n          right={<AssertionMetTypeName typeName={shape.name} />}\n          noHover\n        />\n      )}\n      {mapScala(items)((item, index) => {\n        return (\n          <ItemRow\n            key={index}\n            item={item}\n            listId={listId}\n            isLast={index - 1 === lengthScala(items)}\n          />\n        );\n      })}\n      <IndentIncrement>\n        <Row left={<Symbols withIndent>{']'}</Symbols>} noHover />\n      </IndentIncrement>\n    </>\n  );\n});\n\nfunction FieldName({ children, missing }) {\n  const classes = useShapeViewerStyles();\n  return (\n    <Typography\n      variant=\"caption\"\n      className={classes.fieldName}\n      style={{ opacity: missing ? 0.4 : 1 }}\n    >\n      {children}:\n    </Typography>\n  );\n}\n\nfunction IndexMarker({ children }) {\n  const classes = useShapeViewerStyles();\n  return (\n    <Typography variant=\"caption\" className={classes.indexMarker}>\n      {children}:\n    </Typography>\n  );\n}\n\nfunction ValueRows({ value, shape }) {\n  const classes = useShapeViewerStyles();\n  const { shapeRender } = useContext(ShapeRenderContext);\n  const jsTypeString = Object.prototype.toString.call(value);\n\n  if (!shape) {\n    return null;\n  }\n\n  if (shape.isOptional || shape.isNullable) {\n    return <ValueRows value={value} shape={shape.innerShape} />;\n  }\n\n  if (jsTypeString === '[object Array]' || jsTypeString === '[object Object]') {\n    return (\n      <IndentIncrement add={1}>{renderShape(shape, true)}</IndentIncrement>\n    );\n  }\n\n  return null;\n}\n\nfunction ValueContents({ value, shape }) {\n  const classes = useShapeViewerStyles();\n  const { shapeRender } = useContext(ShapeRenderContext);\n\n  if (typeof value === 'undefined') {\n    return null;\n  }\n\n  if (!shape) {\n    return null;\n  }\n\n  const jsTypeString = Object.prototype.toString.call(value);\n\n  if (shape.isOptional || shape.isNullable) {\n    return <ValueContents value={value} shape={shape.innerShape} />;\n  }\n\n  if (jsTypeString === '[object Null]') {\n    return <Symbols>{'null'}</Symbols>;\n  }\n\n  if (jsTypeString === '[object Array]') {\n    return <Symbols>{'['}</Symbols>;\n  }\n\n  if (jsTypeString === '[object Object]') {\n    return <Symbols>{'{'}</Symbols>;\n  }\n\n  if (jsTypeString === '[object String]') {\n    return (\n      <Typography\n        variant=\"caption\"\n        component=\"pre\"\n        className={'fs-exclude'}\n        style={{\n          fontWeight: 600,\n          whiteSpace: 'pre-line',\n          wordBreak: 'break-all',\n          overflowWrap: 'break-word',\n          fontFamily: \"'Source Code Pro', monospace\",\n          color: useColor.StringColor,\n        }}\n      >\n        \"{value}\"\n      </Typography>\n    );\n  }\n\n  if (jsTypeString === '[object Boolean]') {\n    return (\n      <Typography\n        variant=\"caption\"\n        className={'fs-exclude'}\n        style={{\n          fontWeight: 600,\n          fontFamily: \"'Source Code Pro', monospace\",\n          color: useColor.BooleanColor,\n        }}\n      >\n        {value ? 'true' : 'false'}\n      </Typography>\n    );\n  }\n\n  if (jsTypeString === '[object Number]') {\n    return (\n      <Typography\n        variant=\"caption\"\n        className={'fs-exclude'}\n        style={{\n          fontWeight: 600,\n          fontFamily: \"'Source Code Pro', monospace\",\n          color: useColor.NumberColor,\n        }}\n      >\n        {value.toString()}\n      </Typography>\n    );\n  }\n\n  return null;\n  // return <Typography variant=\"caption\"\n  //                    style={{color: colors[typeO]}}>{value.toString()}</Typography>;\n}\n\nconst AssertionMetTypeName = ({ typeName, style }) => {\n  const classes = useShapeViewerStyles();\n\n  const { shapeRender } = useContext(ShapeRenderContext);\n\n  if (!typeName) {\n    return null;\n  }\n\n  const coloredComponents = typeName.asColoredString(shapeRender.specShapes);\n\n  return (\n    <div className={classes.assertionMet}>\n      <CheckIcon\n        style={{\n          color: '#646464',\n          height: 10,\n          width: 10,\n          marginTop: 6,\n          marginRight: 6,\n        }}\n      />\n      {mapScala(coloredComponents)((i, n) => {\n        if (i.text) {\n          return (\n            <span key={n} style={{ whiteSpace: 'pre' }}>\n              {i.text}\n            </span>\n          );\n        }\n      })}\n    </div>\n  );\n};\n\nexport const DiffNotif = withShapeRenderContext(\n  withDiffContext((props) => {\n    const classes = useShapeViewerStyles();\n    const { diffDescription } = props;\n\n    return (\n      <span className={classes.diffAssertion}>\n        <WarningIcon style={{ color: secondary, height: 10, width: 10 }} />\n        <span style={{ marginLeft: 6 }}>{diffDescription.assertion}</span>\n      </span>\n    );\n  })\n);\n\nexport const FieldRow = withShapeRenderContext((props) => {\n  const classes = useShapeViewerStyles();\n  const { field, parent, shapeRender, diffDescription, suggestion } = props;\n\n  const missing = field.display === 'missing';\n  //\n  const fieldShape = getOrUndefined(field.exampleShape);\n  const specShape = getOrUndefined(field.specShape);\n\n  const example = getOrUndefinedJson(field.example);\n\n  const diff = headOrUndefined(field.diffs);\n\n  // spec shape for assertion\n\n  const diffNotif = diff && <DiffNotif />;\n\n  return (\n    <>\n      <Row\n        tracked={!!diff}\n        changeType={(() => {\n          if (diff && suggestion) {\n            return suggestion.changeTypeAsString;\n          }\n\n          if (diff) {\n            return diffDescription.changeTypeAsString;\n          }\n        })()}\n        left={\n          <Indent>\n            <div className={classes.rowContents}>\n              <div>\n                <FieldName missing={missing}>{field.fieldName}</FieldName>\n              </div>\n              <div style={{ flex: 1, paddingLeft: 4 }}>\n                <ValueContents value={example} shape={fieldShape} />\n              </div>\n            </div>\n          </Indent>\n        }\n        right={(() => {\n          if (diffNotif && suggestion) {\n            return (\n              <div style={{ flex: 1, display: 'flex', marginLeft: 16 }}>\n                {suggestion.changeTypeAsString !== 'Removal' && (\n                  <TypeName\n                    style={{ marginRight: 9 }}\n                    typeName={specShape && specShape.name}\n                  />\n                )}\n                <Typography\n                  variant=\"caption\"\n                  className={classes.suggestion}\n                  style={{\n                    marginLeft:\n                      suggestion.changeTypeAsString !== 'Removal' ? 15 : 0,\n                  }}\n                >\n                  ({suggestion.changeTypeAsString})\n                </Typography>\n              </div>\n            );\n          }\n          if (diffNotif) {\n            return diffNotif;\n          }\n\n          if (fieldShape) {\n            return (\n              <AssertionMetTypeName typeName={specShape && specShape.name} />\n            );\n          }\n        })()}\n      />\n      {/* this will insert nested rows */}\n      <ValueRows value={example} shape={fieldShape} />\n    </>\n  );\n});\nFieldRow.displayName = 'ShapeViewers/FieldRow';\n\nexport const ItemRow = withShapeRenderContext((props) => {\n  const classes = useShapeViewerStyles();\n  const {\n    item,\n    shapeRender,\n    isLast,\n    listId,\n    diffDescription,\n    suggestion,\n  } = props;\n\n  const exampleItemShape = item.exampleShape;\n  const listItemShape = getOrUndefined(item.specListItem);\n  const diff = headOrUndefined(item.diffs);\n\n  const diffNotif = diff && <DiffNotif />;\n\n  return (\n    <>\n      <Row\n        tracked={!!diff}\n        changeType={(() => {\n          if (diff && suggestion) {\n            return suggestion.changeTypeAsString;\n          }\n\n          if (diff) {\n            return diffDescription.changeTypeAsString;\n          }\n        })()}\n        left={(() => {\n          if (item.display === 'hidden') {\n            return (\n              <Indent>\n                <HiddenItemEllipsis expandId={listId} />\n              </Indent>\n            );\n          }\n\n          return (\n            <Indent>\n              <div className={classes.rowContents}>\n                <IndexMarker>{item.index}</IndexMarker>\n                <div style={{ flex: 1, paddingLeft: 4 }}>\n                  <ValueContents\n                    value={getJson(item.example)}\n                    shape={exampleItemShape}\n                  />\n                </div>\n              </div>\n            </Indent>\n          );\n        })()}\n        right={(() => {\n          if (diffNotif && suggestion) {\n            return (\n              <div style={{ flex: 1, display: 'flex', marginLeft: 16 }}>\n                {suggestion.changeTypeAsString !== 'Removal' && (\n                  <TypeName\n                    style={{ marginRight: 9 }}\n                    typeName={listItemShape.name}\n                  />\n                )}\n                <Typography\n                  variant=\"caption\"\n                  className={classes.suggestion}\n                  style={{\n                    marginLeft:\n                      suggestion.changeTypeAsString !== 'Removal' ? 15 : 0,\n                  }}\n                >\n                  ({suggestion.changeTypeAsString})\n                </Typography>\n              </div>\n            );\n          }\n          if (diffNotif) {\n            return diffNotif;\n          }\n          if (listItemShape) {\n            return (\n              <AssertionMetTypeName\n                typeName={listItemShape.name}\n              ></AssertionMetTypeName>\n            );\n          }\n        })()}\n      />\n      {item.display !== 'hidden' && (\n        <ValueRows value={getJson(item.example)} shape={exampleItemShape} />\n      )}\n    </>\n  );\n});\n\nfunction useCompassTargetTracker(isEnabled) {\n  const [compassState, setCompassState] = useState({\n    isAbove: false,\n    isBelow: false,\n    x: null,\n    width: null,\n  });\n  const elementRef = useRef(null);\n  const animationRaf = useRef(null);\n\n  const onAnimationFrame = useCallback(() => {\n    if (!isEnabled || !window) return;\n    const trackedEl = elementRef.current;\n\n    if (!trackedEl) return;\n\n    const viewportHeight = window.innerHeight;\n    const boundingRect = trackedEl.getBoundingClientRect();\n\n    const isAbove = boundingRect.bottom < 100;\n    const isBelow = boundingRect.top - viewportHeight > 0;\n    const { x, width } = boundingRect;\n\n    if (\n      isAbove !== compassState.isAbove ||\n      isBelow !== compassState.isBelow ||\n      x !== compassState.x ||\n      width !== compassState.width\n    ) {\n      setCompassState({\n        isAbove,\n        isBelow,\n        x,\n        width,\n      });\n    }\n\n    animationRaf.current = requestAnimationFrame(onAnimationFrame);\n  }, [\n    compassState.isAbove,\n    compassState.isBelow,\n    compassState.x,\n    compassState.width,\n  ]);\n\n  // useEffect(() => {\n  //   animationRaf.current = requestAnimationFrame(onAnimationFrame);\n  //   return () => cancelAnimationFrame(animationRaf.current);\n  // }, [onAnimationFrame]);\n\n  return {\n    ref: elementRef,\n    compassState,\n  };\n}\n","import React from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport {ShapeRenderStore} from './shape_viewers/ShapeRenderContext';\nimport {DiffViewer} from './shape_viewers/SideBySideShapeRows';\nimport {getOrUndefined, JsonHelper} from '@useoptic/domain';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: '100%',\n  },\n\n}));\n\nexport default function DiffHunkViewer(props) {\n  const {preview, diffDescription, suggestion, exampleOnly, diff} = props;\n  const classes = useStyles();\n\n  const rootShape = preview.rootId;\n  const shape = getOrUndefined(preview.getRootShape);\n\n  return (\n    <ShapeRenderStore shape={preview} diff={diff} diffDescription={diffDescription} suggestion={suggestion} exampleOnly={exampleOnly}>\n      <DiffViewer shape={shape}/>\n    </ShapeRenderStore>\n  );\n}\n","import React, { useContext, useEffect, useState } from 'react';\nimport { DiffContext } from './DiffContext';\nimport { useDiffDescription } from './DiffHooks';\nimport ListItem from '@material-ui/core/ListItem';\nimport Typography from '@material-ui/core/Typography';\nimport { CompareEquality, JsonHelper } from '@useoptic/domain';\nimport Card from '@material-ui/core/Card';\nimport { Collapse, withStyles } from '@material-ui/core';\nimport List from '@material-ui/core/List';\nimport { DocDarkGrey } from '../../docs/DocConstants';\nimport { DiffToolTip } from './shape_viewers/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuOpenIcon from '@material-ui/icons/MenuOpen';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { UpdatedBlue } from '../../../theme';\nimport DiffReviewExpanded, {\n  DiffReviewExpandedCached,\n} from './DiffReviewExpanded';\nimport { DiffCopy } from './DiffCopy';\n\nconst useStyles = makeStyles((theme) => ({\n  diffCursor: {\n    position: 'sticky',\n    top: 0,\n    zIndex: 500,\n    display: 'flex',\n    justifyContent: 'center',\n    flexDirection: 'row',\n    borderLeft: `3px solid ${UpdatedBlue}`,\n    alignItems: 'center',\n  },\n  diffTitle: {\n    fontSize: 15,\n    fontWeight: 400,\n    paddingLeft: 11,\n  },\n  diffCursorActions: {\n    display: 'flex',\n    alignItems: 'center',\n    flexDirection: 'row',\n    paddingRight: 10,\n  },\n  diffItem: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'baseline',\n    paddingLeft: 5,\n  },\n}));\n\nexport class DiffCursor extends React.Component {\n  state = {\n    showAllDiffs: false,\n    selectedDiff: null,\n  };\n\n  setSelectedDiff = (selectedDiff) =>\n    this.setState({ selectedDiff, showAllDiffs: false });\n\n  toggle = (value) => this.setState({ showAllDiffs: value });\n\n  shouldComponentUpdate = (nextProps, nextState, nextContext) => {\n    return (\n      !CompareEquality.betweenBodyDiffs(this.props.diffs, nextProps.diffs) ||\n      this.state.showAllDiffs !== nextState.showAllDiffs ||\n      !this.state.selectedDiff ||\n      nextProps.tab !== this.props.tab\n    );\n  };\n\n  componentDidUpdate = (prevProps, prevState, snapshot) => {\n    if (this.props.diffs.length === 0) {\n      if (this.state.selectedDiff) {\n        this.setState({ selectedDiff: null });\n      }\n      return;\n    }\n\n    if (this.state.selectedDiff) {\n      if (\n        !CompareEquality.containsDiff(this.props.diffs, this.state.selectedDiff)\n      ) {\n        //diff is no longer valid\n        this.setSelectedDiff(this.props.diffs[0]);\n      }\n    } else {\n      this.setSelectedDiff(this.props.diffs[0]);\n    }\n  };\n\n  componentDidMount() {\n    this.setSelectedDiff(this.props.diffs[0]);\n  }\n\n  render = () => {\n    const { diffs, captureId } = this.props;\n    const diffCount = diffs.length;\n    const { showAllDiffs, selectedDiff } = this.state;\n\n    if (diffCount === 0 || !selectedDiff) {\n      return null;\n    }\n\n    const props = {\n      selectedDiff,\n      setSelectedDiff: this.setSelectedDiff,\n      diffs,\n      diffCount,\n      showAllDiffs,\n      toggle: this.toggle,\n    };\n    return (\n      <div key={this.props.tab}>\n        <Cursor {...props} />\n        <DiffReviewExpandedCached\n          captureId={captureId}\n          key={selectedDiff.diff.toString()}\n          {...{ selectedDiff, setSelectedDiff: this.setSelectedDiff }}\n        />\n      </div>\n    );\n  };\n}\n\nconst Cursor = ({\n  showAllDiffs,\n  diffs,\n  setSelectedDiff,\n  selectedDiff,\n  diffCount,\n  toggle,\n}) => {\n  const classes = useStyles();\n\n  return (\n    <Card className={classes.diffCursor} elevation={3}>\n      <div style={{ flex: 1 }}>\n        {!showAllDiffs && selectedDiff && (\n          <DiffItem button={false} diff={selectedDiff} />\n        )}\n        <Collapse in={showAllDiffs} timeout={0}>\n          <Typography\n            variant=\"subtitle2\"\n            style={{ paddingLeft: 12, paddingTop: 12 }}\n          >\n            Choose a diff to review\n          </Typography>\n          <List>\n            {diffs.map((diff) => (\n              <DiffItem\n                key={diff.diff.toString()}\n                setSelectedDiff={setSelectedDiff}\n                toggle={toggle}\n                diff={diff}\n                button={true}\n              />\n            ))}\n          </List>\n        </Collapse>\n      </div>\n      {!showAllDiffs && (\n        <div className={classes.diffCursorActions}>\n          <Typography\n            variant=\"overline\"\n            style={{ color: DocDarkGrey, marginRight: 10 }}\n          >\n            {diffCount} diffs\n          </Typography>\n          <DiffToolTip title=\"See all Diffs\">\n            <IconButton\n              color=\"primary\"\n              disabled={diffCount <= 1}\n              onClick={() => toggle(true)}\n            >\n              <MenuOpenIcon />\n            </IconButton>\n          </DiffToolTip>\n        </div>\n      )}\n    </Card>\n  );\n};\n\nconst DiffItem = ({ diff, button, setSelectedDiff, toggle }) => {\n  const description = useDiffDescription(diff);\n  const classes = useStyles();\n\n  return (\n    <ListItem\n      button={button}\n      className={classes.diffItem}\n      onClick={() => {\n        setSelectedDiff(diff);\n      }}\n    >\n      {description && (\n        <div style={{ display: 'flex', flexDirection: 'row', paddingLeft: 7 }}>\n          {button && <div style={{ marginRight: 7 }}>{' • '}</div>}\n          <DiffCopy copy={description.titleCopy} fontSize={15} />\n        </div>\n      )}\n    </ListItem>\n  );\n};\n","import React, { useContext, useEffect, useState } from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport uuidv4 from 'uuid/v4';\nimport { useHistory } from 'react-router-dom';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Slide from '@material-ui/core/Slide';\nimport Typography from '@material-ui/core/Typography';\nimport { IgnoreDiffContext, SuggestionsContext } from './DiffPageNew';\nimport { TextField } from '@material-ui/core';\nimport { track } from '../../../Analytics';\nimport {\n  Facade,\n  JsonHelper,\n  opticEngine,\n  RfcCommandContext,\n} from '@useoptic/domain';\nimport { RfcContext } from '../../../contexts/RfcContext';\nimport { useServices } from '../../../contexts/SpecServiceContext';\nimport { useBaseUrl } from '../../../contexts/BaseUrlContext';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { DiffContext } from './DiffContext';\n\nconst Transition = React.forwardRef(function Transition(props, ref) {\n  return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\nexport default function FinalizeDialog(props) {\n  const { open, close, canOnlyReset, captureId } = props;\n  const [commitMessage, setCommitMessage] = useState('');\n  const [saving, setSaving] = useState(false);\n\n  const { acceptedSuggestions } = useContext(SuggestionsContext);\n  const { ignoredDiffs } = useContext(IgnoreDiffContext);\n  const { specService } = useServices();\n  const { reset } = useContext(DiffContext);\n  const baseUrl = useBaseUrl();\n\n  const history = useHistory();\n\n  const { initialEventStore, rfcId, clientSessionId, clientId } = useContext(\n    RfcContext\n  );\n\n  const backToHome = () => {\n    history.push(`${baseUrl}/diffs/${captureId}`);\n  };\n  const commit = async () => {\n    const newEventStore = initialEventStore.getCopy(rfcId);\n    const {\n      StartBatchCommit,\n      EndBatchCommit,\n    } = opticEngine.com.useoptic.contexts.rfc.Commands;\n    const batchId = uuidv4();\n    const specContext = withSpecContext(\n      newEventStore,\n      rfcId,\n      clientId,\n      clientSessionId\n    );\n    specContext.applyCommands(\n      JsonHelper.jsArrayToVector([StartBatchCommit(batchId, commitMessage)])\n    );\n    acceptedSuggestions.forEach((suggestion) => {\n      specContext.applyCommands(JsonHelper.seqToVector(suggestion.commands));\n    });\n    specContext.applyCommands(\n      JsonHelper.jsArrayToVector([EndBatchCommit(batchId)])\n    );\n    await specService.saveEvents(newEventStore, rfcId);\n    \n    history.push(`${baseUrl}/diffs/${captureId}`);\n    \n    setTimeout(() => {\n      track('Committed Changes to Endpoint', {\n        message: commitMessage,\n        captureId,\n        suggestions: acceptedSuggestions.length,\n      });\n    }, 500);\n  };\n\n  useEffect(() => {\n    const pastTenseChanges = acceptedSuggestions\n      .map((i) => `- ${i.pastTenseAction}`)\n      .join('\\n');\n    setCommitMessage(`\\n\\nChanges:\\n${pastTenseChanges}`);\n  }, [open, acceptedSuggestions.length, ignoredDiffs.length]);\n\n  const pluralIf = (collection) => (collection.length !== 1 ? 's' : '');\n  const pluralIfI = (i) => (i !== 1 ? 's' : '');\n\n  const hasChanges = acceptedSuggestions.length > 0;\n\n  return (\n    <Dialog\n      open={open}\n      TransitionComponent={Transition}\n      keepMounted\n      onClose={close}\n    >\n      <DialogTitle>{'Commit changes to API specification'}</DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          You have accepted {acceptedSuggestions.length} suggestion\n          {pluralIf(acceptedSuggestions)}, and ignored {ignoredDiffs.length}{' '}\n          diff{pluralIf(ignoredDiffs)}\n          {hasChanges && (\n            <TextField\n              multiline\n              label=\"Commit Message:\"\n              style={{ marginTop: 15 }}\n              value={commitMessage}\n              fullWidth\n              autoFocus\n              onFocus={(e) => e.currentTarget.setSelectionRange(0, 0)}\n              onChange={(e) => setCommitMessage(e.target.value)}\n            />\n          )}\n        </DialogContentText>\n      </DialogContent>\n      {!hasChanges && (\n        <DialogActions>\n          <Button size=\"small\" onClick={backToHome}>\n            Return to Capture\n          </Button>\n        </DialogActions>\n      )}\n      {saving && <LinearProgress variant=\"indeterminate\" />}\n      {hasChanges && !saving && (\n        <DialogActions>\n          {canOnlyReset ? (\n            <Button size=\"small\" onClick={reset} color=\"default\">\n              Reset\n            </Button>\n          ) : (\n            <Button size=\"small\" onClick={close} color=\"default\">\n              Close\n            </Button>\n          )}\n          <Button\n            size=\"small\"\n            variant=\"contained\"\n            onClick={async () => {\n              setSaving(true);\n              await commit();\n            }}\n            color=\"primary\"\n          >\n            Commit Changes\n          </Button>\n        </DialogActions>\n      )}\n    </Dialog>\n  );\n}\n\nfunction withSpecContext(eventStore, rfcId, clientId, clientSessionId) {\n  return {\n    applyCommands(commands) {\n      try {\n        const batchId = uuidv4();\n        const commandContext = new RfcCommandContext(\n          clientId,\n          clientSessionId,\n          batchId\n        );\n        Facade.fromCommands(eventStore, rfcId, commands, commandContext);\n      } catch (e) {\n        console.error(e);\n      }\n    },\n  };\n}\n","import React, { useContext, useEffect, useState } from 'react';\nimport { DocDarkGrey, DocDivider } from '../../docs/DocConstants';\nimport Tabs from '@material-ui/core/Tabs';\nimport { CustomNavTab, CustomNavTabDense } from './CustomNavTab';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Fab from '@material-ui/core/Fab';\nimport DoneIcon from '@material-ui/icons/Done';\nimport { EndpointsContext } from '../../../contexts/EndpointContext';\nimport { PathAndMethod, PathAndMethodOverflowFriendly } from './PathAndMethod';\nimport {\n  CaptureContext,\n  useCaptureContext,\n} from '../../../contexts/CaptureContext';\nimport {\n  DiffResultHelper,\n  getOrUndefined,\n  JsonHelper,\n  mapScala,\n} from '@useoptic/domain';\nimport { DiffContext } from './DiffContext';\nimport { NewRegions } from './DiffNewRegions';\nimport { DiffCursor } from './DiffCursor';\nimport DiffReviewExpanded from './DiffReviewExpanded';\nimport { RfcContext } from '../../../contexts/RfcContext';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Fade from '@material-ui/core/Fade';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { DiffStats } from './Stats';\nimport { DiffLoading } from './LoadingNextDiff';\nimport { IgnoreDiffContext, SuggestionsContext } from './DiffPageNew';\nimport FinalizeDialog from './Finalize';\nimport { track } from '../../../Analytics'\nimport Button from '@material-ui/core/Button';\n\nexport const newRegionsConst = 'new_regions';\n\nexport function DiffReviewPage(props) {\n  const { captureId, method, pathId } = props;\n  const classes = useStyles();\n\n  const { rfcId, rfcService } = useContext(RfcContext);\n  const { reset } = useContext(DiffContext);\n  const { acceptedSuggestions } = useContext(SuggestionsContext);\n  const rfcState = rfcService.currentState(rfcId);\n\n  const { endpointDescriptor } = useContext(EndpointsContext);\n  const { diffsForThisEndpoint, completed } = useContext(DiffContext);\n\n  const [currentTab, setCurrentTab] = useState(null);\n  const [showFinalize, setShowFinalize] = useState(false);\n\n  const { ignoreDiff } = useContext(IgnoreDiffContext);\n\n  const regions = DiffResultHelper.groupEndpointDiffsByRegion(\n    diffsForThisEndpoint,\n    rfcState,\n    method,\n    pathId\n  );\n\n  useEffect(() => {\n    if (!currentTab) {\n      const firstRequestIdWithDiff = getOrUndefined(\n        regions.firstRequestIdWithDiff\n      );\n\n      const firstResponseIdWithDiff = getOrUndefined(\n        regions.firstResponseIdWithDiff\n      );\n\n      if (regions.newRegionsCount > 0) {\n        setCurrentTab(newRegionsConst);\n      } else if (firstRequestIdWithDiff) {\n        setCurrentTab(firstRequestIdWithDiff);\n      } else if (firstResponseIdWithDiff) {\n        setCurrentTab(firstResponseIdWithDiff);\n      }\n    }\n  });\n\n  const requestBodyTabs = mapScala(regions.requestDiffs)((i) => {\n    return (\n      <CustomNavTabDense\n        label={getOrUndefined(i.contentType) || 'No Body'}\n        disabled={i.count === 0}\n        value={i.id}\n        count={i.count}\n      />\n    );\n  });\n\n  const responseBodyTabs = mapScala(regions.responseDiffs)((i) => {\n    //must be flat for some reason. has to do with tab context and a material UI bug\n    return [\n      <Typography variant=\"overline\" className={classes.sectionHeader}>\n        {i.statusCode} Response Body\n      </Typography>,\n      mapScala(i.regions)((c) => {\n        return (\n          <CustomNavTabDense\n            label={getOrUndefined(c.contentType) || 'No Body'}\n            value={c.id}\n            disabled={c.count === 0}\n            count={c.count}\n          />\n        );\n      }),\n      <DocDivider style={{ marginTop: 16, marginBottom: 16 }} />,\n    ];\n  });\n\n  useEffect(() => {\n    if (showFinalize || (completed && regions.empty)) {\n      track(\"Rendered Finalize Card\")\n    }\n  }, [showFinalize, completed, regions.empty])\n\n  return (\n    <div className={classes.container}>\n      <div className={classes.navigationContainer}>\n        <div className={classes.navRoot}>\n          <div className={classes.header}>\n            <Typography variant=\"subtitle2\" className={classes.title}>\n              {endpointDescriptor.endpointPurpose || 'Unnamed Endpoint'}\n            </Typography>\n            <PathAndMethodOverflowFriendly\n              method={endpointDescriptor.httpMethod}\n              path={endpointDescriptor.fullPath}\n            />\n          </div>\n\n          <DocDivider />\n\n          <div className={classes.suggestionsBox}>\n            <Typography variant=\"caption\" className={classes.suggestionsCount}>\n              {acceptedSuggestions.length} approved\n            </Typography>\n            <div style={{ flex: 1 }} />\n            <Button\n              size=\"small\"\n              color=\"primary\"\n              onClick={reset}\n              classes={{ root: classes.buttonSmall }}\n            >\n              Reset\n            </Button>\n            <Button\n              size=\"small\"\n              color=\"primary\"\n              onClick={() => setShowFinalize(true)}\n              classes={{ root: classes.buttonSmall }}\n            >\n              Commit\n            </Button>\n          </div>\n\n          <DocDivider />\n\n          <div className={classes.tabScroll}>\n            <Tabs\n              orientation=\"vertical\"\n              className={classes.tabs}\n              onChange={(_, value) => {\n                if (value !== currentTab) {\n                  setCurrentTab(value);\n                }\n              }}\n              value={currentTab}\n            >\n              <CustomNavTabDense\n                label={`Loading`}\n                value={null}\n                style={{ display: 'none' }}\n              />\n              <CustomNavTabDense\n                label={`Review New Regions`}\n                value={newRegionsConst}\n                count={regions.newRegionsCount}\n                disabled={!regions.newRegionsCount}\n                style={{ marginBottom: 17 }}\n              />\n\n              {requestBodyTabs.length > 0 && (\n                <Typography\n                  variant=\"overline\"\n                  className={classes.sectionHeader}\n                >\n                  Request Body Diffs\n                </Typography>\n              )}\n\n              {requestBodyTabs}\n\n              {requestBodyTabs.length > 0 && (\n                <DocDivider style={{ marginTop: 16, marginBottom: 16 }} />\n              )}\n\n              {responseBodyTabs}\n            </Tabs>\n          </div>\n          <DiffStats />\n        </div>\n      </div>\n      <div className={classes.pageContainer}>\n        <div className={classes.center}>\n          {!currentTab && !completed && <DiffLoading show={true} />}\n\n          {currentTab === newRegionsConst && (\n            <NewRegions\n              ignoreDiff={ignoreDiff}\n              captureId={captureId}\n              endpointId={pathId + method}\n              newRegions={JsonHelper.seqToJsArray(regions.newRegions)}\n            />\n          )}\n\n          {currentTab && currentTab !== newRegionsConst && (\n            <DiffCursor\n              captureId={captureId}\n              key={currentTab}\n              diffs={JsonHelper.seqToJsArray(\n                regions.bodyDiffsForId(currentTab)\n              )}\n              completed={completed}\n              tab={currentTab}\n            />\n          )}\n        </div>\n      </div>\n      <FinalizeDialog\n        captureId={captureId}\n        open={showFinalize || (completed && regions.empty)}\n        canOnlyReset={regions.empty && completed}\n        close={() => setShowFinalize(false)}\n      />\n    </div>\n  );\n}\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    display: 'flex',\n    height: '100vh',\n    overflow: 'hidden',\n  },\n  navigationContainer: {\n    width: 230,\n    overflow: 'hidden',\n    display: 'flex',\n  },\n  pageContainer: {\n    overflow: 'scroll',\n    height: '100vh',\n    justifyContent: 'center',\n    flexGrow: 1,\n  },\n  navRoot: {\n    flexGrow: 1,\n    position: 'fixed',\n    width: 'inherit',\n    height: '100vh',\n    overflowY: 'scroll',\n    display: 'flex',\n    flexDirection: 'column',\n    borderRight: `1px solid ${theme.palette.grey[300]}`,\n    background: theme.palette.grey[100],\n    zIndex: 1000,\n  },\n  chips: {\n    marginLeft: 10,\n  },\n  tabScroll: {\n    paddingTop: 16,\n    flexGrow: 1,\n    flexShirnk: 1,\n    overflow: 'scroll',\n  },\n  tabs: {\n    marginLeft: theme.spacing(2),\n  },\n  indent: {\n    display: 'flex',\n    flexDirection: 'column',\n    marginLeft: theme.spacing(1),\n  },\n  center: {\n    flex: 1,\n    maxWidth: 1200,\n    paddingLeft: 20,\n    paddingRight: 20,\n    paddingTop: 20,\n    paddingBottom: 400,\n    margin: '0 auto',\n  },\n  statsSection: {\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'baseline',\n    paddingLeft: theme.spacing(1),\n  },\n  progressStats: {\n    paddingLeft: theme.spacing(1),\n    color: DocDarkGrey,\n    flex: 1,\n  },\n  progressWrapper: {\n    height: 6,\n    width: '100%',\n  },\n  header: {\n    display: 'flex',\n    flexDirection: 'column',\n    flexShrink: 1,\n    width: '100%',\n    alignItems: 'left',\n    justifyContent: 'center',\n    paddingBottom: 6,\n    margin: theme.spacing(1),\n  },\n  formControl: {\n    paddingLeft: 35,\n    paddingRight: 15,\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2),\n  },\n  stats: {\n    marginTop: 20,\n    paddingBottom: 15,\n    alignItems: 'center',\n    display: 'flex',\n    justifyContent: 'center',\n    flexDirection: 'row',\n  },\n  subStat: {\n    paddingBottom: 15,\n    alignItems: 'center',\n    display: 'flex',\n    justifyContent: 'center',\n    flexDirection: 'row',\n  },\n  listItemInner: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  row: {\n    marginBottom: 11,\n  },\n  disabled: {\n    pointerEvents: 'none',\n    opacity: 0.5,\n  },\n  paper: {\n    marginBottom: 15,\n  },\n  diffContainer: {\n    display: 'flex',\n    height: '100vh',\n    paddingLeft: 32,\n    paddingRight: 32,\n    flexDirection: 'row',\n    overflow: 'scroll',\n    flexGrow: 1,\n    flexShrink: 1,\n    justifyContent: 'center',\n  },\n  diffWrapper: {\n    flex: 1,\n    padding: '24px 0px 144px',\n    maxWidth: 1280,\n  },\n  sectionHeader: {\n    fontWeight: 400,\n    fontSize: 11,\n    color: DocDarkGrey,\n  },\n  fab: {\n    position: 'fixed',\n    bottom: 15,\n    right: 15,\n  },\n  fabLabel: {\n    paddingRight: 8,\n  },\n  title: {\n    fontSize: 14,\n    padding: 7,\n    textAlign: 'left',\n    marginBottom: 4,\n  },\n  suggestionsBox: {\n    display: 'flex',\n    paddingLeft: 18,\n    paddingTop: 8,\n    paddingBottom: 8,\n    paddingRight: 5,\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  suggestionsCount: {\n    fontSize: 10,\n    color: DocDarkGrey,\n  },\n  buttonSmall: {\n    fontSize: 10,\n    padding: 4,\n    minWidth: 40,\n  },\n}));\n","import React, { useContext } from 'react';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { Typography } from '@material-ui/core';\nimport compose from 'lodash.compose';\nimport {\n  EndpointsContextStore,\n  withEndpointsContext,\n} from '../../../contexts/EndpointContext';\nimport {\n  SpecServiceContext,\n  useServices,\n  withSpecServiceContext,\n} from '../../../contexts/SpecServiceContext';\nimport { DiffContext, DiffContextStore, withDiffContext } from './DiffContext';\nimport { RfcContext, withRfcContext } from '../../../contexts/RfcContext';\nimport {\n  DiffResultHelper,\n  Facade,\n  opticEngine,\n  RfcCommandContext,\n} from '@useoptic/domain';\nimport SimulatedCommandContext from '../SimulatedCommandContext';\nimport { Redirect } from 'react-router-dom';\nimport { useBaseUrl } from '../../../contexts/BaseUrlContext';\nimport {\n  CaptureContextStore,\n  useCaptureContext,\n} from '../../../contexts/CaptureContext';\nimport { DiffReviewPage } from './DiffReviewPage';\nimport { track } from '../../../Analytics';\n\nconst { diff, JsonHelper } = opticEngine.com.useoptic;\nconst jsonHelper = JsonHelper();\n\nfunction DiffPageNew(props) {\n  const { specStore } = useContext(SpecServiceContext);\n  const baseUrl = useBaseUrl();\n  const services = useServices();\n\n  const { pathId, method, captureId } = props.match.params;\n\n  return (\n    <CaptureSessionInlineContext\n      specStore={specStore}\n      captureId={captureId}\n      pathId={pathId}\n      method={method}\n      services={services}\n    >\n      <EndpointsContextStore\n        pathId={pathId}\n        method={method}\n        inContextOfDiff={true}\n        notFound={<Redirect to={`${baseUrl}/diffs`} />}\n      >\n        {/*<DiffPageContent captureId={captureId} />*/}\n        <DiffReviewPage captureId={captureId} pathId={pathId} method={method} />\n      </EndpointsContextStore>\n    </CaptureSessionInlineContext>\n  );\n}\n\nexport const SuggestionsContext = React.createContext(null);\n\nfunction SuggestionsStore({ children }) {\n  const [acceptedSuggestions, setAcceptedSuggestions] = React.useState([]);\n\n  const resetAccepted = () => {\n    setAcceptedSuggestions([]);\n  };\n\n  const context = {\n    acceptedSuggestions,\n    setAcceptedSuggestions,\n    resetAccepted,\n  };\n  return (\n    <SuggestionsContext.Provider value={context}>\n      {children}\n    </SuggestionsContext.Provider>\n  );\n}\n\nexport const IgnoreDiffContext = React.createContext(null);\n\nexport function IgnoreDiffStore({ children }) {\n  const [ignoredDiffs, setIgnoredDiffs] = React.useState([]);\n\n  const ignoreDiff = (...diffs) => {\n    setIgnoredDiffs([...ignoredDiffs, ...diffs]);\n  };\n  const resetIgnored = () => setIgnoredDiffs([]);\n\n  const context = {\n    ignoreDiff,\n    ignoredDiffs,\n    resetIgnored,\n  };\n  return (\n    <IgnoreDiffContext.Provider value={context}>\n      {children}\n    </IgnoreDiffContext.Provider>\n  );\n}\n\nfunction flatten(acc, array) {\n  return [...acc, ...array];\n}\n\nconst InnerDiffWrapper = function (props) {\n  const { isLoading, session, captureId } = props;\n  const { children } = props;\n  const {\n    endpointDiffs,\n    updatedAdditionalCommands,\n    diffId,\n    completed,\n  } = useCaptureContext();\n  const {\n    setAcceptedSuggestions,\n    setSelectedDiff,\n    acceptedSuggestions,\n    ignoredDiffs,\n    resetIgnored,\n    resetAccepted,\n    pathId,\n    method,\n  } = props;\n\n  if (isLoading) {\n    return null;\n  }\n\n  const diffsForThisEndpoint = DiffResultHelper.diffsForPathAndMethod(\n    jsonHelper.jsArrayToSeq(endpointDiffs),\n    pathId,\n    method,\n    jsonHelper.jsArrayToSeq(ignoredDiffs)\n  );\n\n  return (\n    <DiffContextStore\n      diffId={diffId}\n      diffsForThisEndpoint={diffsForThisEndpoint}\n      completed={completed}\n      reset={() => {\n        updatedAdditionalCommands([]);\n        resetIgnored();\n        resetAccepted();\n        track('Diff Reset', {\n          captureId,\n        });\n      }}\n      acceptSuggestion={(...suggestions) => {\n        if (suggestions) {\n          const updatedSuggestions = [...acceptedSuggestions, ...suggestions];\n          setAcceptedSuggestions(updatedSuggestions);\n          const simulatedCommands = updatedSuggestions\n            .map((x) => jsonHelper.seqToJsArray(x.commands))\n            .reduce(flatten, []);\n          updatedAdditionalCommands(simulatedCommands);\n          suggestions.map((i) => {\n            track('Accept Suggestion', {\n              captureId,\n              suggestion: i.action,\n            });\n          });\n        }\n      }}\n      acceptedSuggestions={acceptedSuggestions}\n    >\n      {children}\n    </DiffContextStore>\n  );\n  // })\n};\n\nclass _CaptureSessionInlineContext extends React.Component {\n  render() {\n    const jsonHelper = JsonHelper();\n    const {\n      captureId,\n      services,\n      rfcId,\n      eventStore,\n      children,\n      pathId,\n      method,\n    } = this.props;\n    return (\n      //@todo refactor sessionId to captureId\n      <SuggestionsStore>\n        <IgnoreDiffContext.Consumer>\n          {({ ignoredDiffs, resetIgnored }) => (\n            <SuggestionsContext.Consumer>\n              {(suggestionsContext) => {\n                const {\n                  acceptedSuggestions,\n                  setAcceptedSuggestions,\n                  resetAccepted,\n                } = suggestionsContext;\n                const simulatedCommands = acceptedSuggestions\n                  .map((x) => jsonHelper.seqToJsArray(x.commands))\n                  .reduce(flatten, []);\n                return (\n                  <SimulatedCommandContext\n                    rfcId={rfcId}\n                    eventStore={eventStore.getCopy(rfcId)}\n                    commands={simulatedCommands}\n                    shouldSimulate={true}\n                  >\n                    <CaptureContextStore\n                      captureId={captureId}\n                      pathId={pathId}\n                      method={method}\n                      ignoredDiffs={ignoredDiffs}\n                      {...services}\n                    >\n                      <InnerDiffWrapper\n                        pathId={pathId}\n                        method={method}\n                        captureId={captureId}\n                        ignoredDiffs={ignoredDiffs}\n                        resetIgnored={resetIgnored}\n                        resetAccepted={resetAccepted}\n                        setAcceptedSuggestions={setAcceptedSuggestions}\n                        acceptedSuggestions={acceptedSuggestions}\n                      >\n                        {children}\n                      </InnerDiffWrapper>\n                    </CaptureContextStore>\n                  </SimulatedCommandContext>\n                );\n              }}\n            </SuggestionsContext.Consumer>\n          )}\n        </IgnoreDiffContext.Consumer>\n      </SuggestionsStore>\n    );\n  }\n}\n\nconst CaptureSessionInlineContext = compose(withRfcContext)(\n  _CaptureSessionInlineContext\n);\n\nexport default compose(withSpecServiceContext)(DiffPageNew);\n","import React from 'react';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport classnames from 'classnames'\nconst styles = theme => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'row'\n  },\n  mainContent: {\n\n  },\n  spacer: {\n    flex: 1\n  },\n  right: {\n    display: 'flex',\n    alignItems: 'center'\n  }\n});\n\nclass ReusableDiffRow extends React.Component {\n  render() {\n    const {classes, className, mainContentMax, notifications,  children} = this.props;\n    return (\n      <div className={classnames(classes.root, className)}>\n        <div className={classes.mainContent} style={{maxWidth: mainContentMax, width: '100%'}}>{children}</div>\n        <div className={classes.spacer}/>\n        <div className={classes.right}>{notifications}</div>\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles)(ReusableDiffRow);\n","import React from 'react';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport {GenericContextFactory} from '../../contexts/GenericContextFactory';\nimport {secondary} from '../../theme';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport ReusableDiffRow from '../diff/v2/shape_viewers/ReusableDiffRow';\nimport {Typography} from '@material-ui/core';\n\n\nconst {\n  Context: RequestTabsContext,\n  withContext: withRequestTabsContext\n} = GenericContextFactory(null);\n\nclass RequestTabsContextStore extends React.Component {\n\n  state = {\n    requestContentType: null,\n    responseStatusCode: null,\n    responseContentType: null\n  };\n\n  render() {\n    const context = {\n      setRequestContentType: (e) => this.setState({requestContentType: e}),\n      setResponseStatusCode: (e) => this.setState({responseStatusCode: e}),\n      setResponseContentType: (e) => this.setState({responseContentType: e}),\n      requestContentType: this.state.requestContentType,\n      responseStatusCode: this.state.responseStatusCode,\n      responseContentType: this.state.responseContentType\n    };\n\n    return (\n      <RequestTabsContext.Provider value={context}>\n        {this.props.children}\n      </RequestTabsContext.Provider>\n    );\n  }\n}\n\nexport {\n  RequestTabsContextStore,\n  withRequestTabsContext\n};\n\n\nconst ContentStyledTabs = withStyles({\n  root: {\n    // height: 29,\n    paddingRight: 12,\n    minHeight: 'inherit'\n  },\n  indicator: {\n    display: 'flex',\n    justifyContent: 'center',\n    color: secondary,\n    backgroundColor: 'transparent',\n    '& > div': {\n      width: '100%',\n      backgroundColor: secondary,\n    },\n  },\n})(props => <Tabs {...props} TabIndicatorProps={{children: <div/>}}/>);\n\nconst ContentStyledTab = withStyles(theme => {\n  return ({\n    root: {\n      textTransform: 'none',\n      color: '#726e6e',\n      padding: 0,\n      marginTop: 5,\n      height: 25,\n      minHeight: 'inherit',\n      minWidth: 'inherit',\n      fontWeight: 800,\n      fontSize: theme.typography.pxToRem(14),\n      marginRight: theme.spacing(2),\n      '&:focus': {\n        opacity: 1,\n      },\n    },\n  });\n})(props => <Tab disableRipple {...props} />);\n\n\nconst styles = theme => ({\n  container: {\n    marginBottom: 45\n  },\n  root: {\n    marginTop: 15,\n    display: 'flex',\n    flex: 1,\n  },\n  content: {\n    paddingRight: 12,\n    paddingTop: 15\n  },\n});\n\nclass ContentTabs extends React.Component {\n\n  componentDidMount() {\n    const {inRequest, responseContentType, setResponseContentType, setResponseStatusCode, responseStatusCode, requestContentType, options, setRequestContentType} = this.props\n    if (inRequest && !requestContentType && options.contentTypes.length > 0) {\n      setRequestContentType(options.contentTypes[0])\n    }\n    if (!inRequest && !responseStatusCode && options.length > 0) {\n      setResponseStatusCode(options[0].statusCode)\n      setResponseContentType(options[0].contentTypes[0])\n    }\n  }\n\n  render() {\n    //@ts-ignore\n    const {classes, options, notifications, renderDescription, inRequest, requestContentType, responseContentType, setRequestContentType, setResponseContentType, responseStatusCode, setResponseStatusCode, renderResponse, renderRequest} = this.props;\n\n    const contentTypeTab = inRequest ? requestContentType : responseContentType;\n    const setContentTypeTab = inRequest ? setRequestContentType : setResponseContentType;\n\n    const contentTypeOptions = inRequest ? (options.contentTypes || []) :\n      (((options.find(i => i.statusCode === responseStatusCode) || {}).contentTypes) || []);\n\n    const children = inRequest ? renderRequest(requestContentType) : renderResponse(responseStatusCode, responseContentType)\n    const contribution = renderDescription && (inRequest ? renderDescription(requestContentType) : renderDescription(responseStatusCode, responseContentType))\n\n    if (inRequest && options.contentTypes.length === 0) {\n      return null\n    }\n\n    if (!inRequest && options.length === 0) {\n      return null\n    }\n\n    const key = `${contentTypeTab}-${responseStatusCode}-${responseContentType}`\n\n    return (\n      <div className={classes.container} key={key} >\n        <ReusableDiffRow notifications={notifications}>\n          <div className={classes.root}>\n            <Typography variant=\"h5\" color=\"primary\">{inRequest ? 'Request' : 'Response'}</Typography>\n          </div>\n        </ReusableDiffRow>\n        {contribution}\n        <div className={classes.root}>\n          {!inRequest && (<ContentStyledTabs\n              onChange={(e, newValue) => setResponseStatusCode(newValue)}\n              value={responseStatusCode}>\n              {options.map(({statusCode}, index) => (\n                <ContentStyledTab label={statusCode} value={statusCode}/>\n              ))}\n            </ContentStyledTabs>\n          )}\n\n          <div style={{flex: 1}}/>\n\n          <ContentStyledTabs\n            value={contentTypeTab}\n            onChange={(e, newValue) => setContentTypeTab(newValue)}>\n            {contentTypeOptions.map((contentType) =>\n              (<ContentStyledTab label={contentType} value={contentType}/>))}\n          </ContentStyledTabs>\n\n        </div>\n        <div className={classes.content}>\n          {children}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withRequestTabsContext(withStyles(styles)(ContentTabs));\n","import React, { useContext } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { primary } from '../../../../theme';\nimport {\n  ShapeExpandedContext,\n  ShapeRenderContext,\n  withShapeRenderContext,\n} from './ShapeRenderContext';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { getOrUndefined, mapScala } from '@useoptic/domain';\nimport { Typography } from '@material-ui/core';\nimport { Indent } from './Indent';\n\nexport const useShapeViewerStyles = makeStyles((theme) => ({\n  root: {\n    paddingTop: 10,\n    paddingBottom: 10,\n    backgroundColor: '#16203F',\n    position: 'relative',\n  },\n  nested: {\n    paddingTop: 10,\n    marginTop: 17,\n    paddingBottom: 10,\n    backgroundColor: '#1c274b',\n  },\n  row: {\n    display: 'flex',\n    padding: 0,\n    paddingLeft: 4,\n    flexDirection: 'row',\n  },\n  rowWithHover: {\n    cursor: 'pointer',\n    '&:hover': {\n      backgroundColor: 'rgba(78,165,255,0.27) !important',\n    },\n    '&:hover .descriptionButton': {\n      display: 'inherit !important',\n    },\n  },\n\n  rowCompass: {\n    width: '100%', // set at runtime to match $right\n    position: 'fixed',\n    display: 'flex',\n    justifyContent: 'flex-end',\n    paddingLeft: 8,\n\n    cursor: 'pointer',\n    animation: '$compassHover 3s ease-in-out infinite',\n    opacity: 0,\n\n    willChange: 'opacity',\n    transition: '0.1s ease-out opacity',\n\n    '&$isAbove': {\n      top: theme.spacing(15),\n      opacity: 1,\n    },\n    '&$isBelow': {\n      bottom: theme.spacing(4),\n      opacity: 1,\n    },\n  },\n\n  '@keyframes compassHover': {\n    '0%': {\n      transform: 'translateY(-2px)',\n    },\n    '50%': {\n      transform: 'translateY(2px)',\n    },\n    '100%': {\n      transform: 'translateY(-2px)',\n    },\n  },\n\n  isAbove: {},\n  isBelow: {},\n\n  rowCompassBody: {\n    position: 'relative',\n    padding: theme.spacing(0.8, 1),\n    marginRight: 8,\n    flexShrink: 0,\n    flexGrow: 1,\n\n    borderRadius: 15,\n  },\n\n  rowCompassDirection: {\n    position: 'absolute',\n    left: '50%',\n    marginLeft: -10,\n    width: theme.typography.pxToRem(20),\n    height: theme.typography.pxToRem(20),\n    flexGrow: 0,\n    flexShrink: 0,\n    fill: '#f8edf4',\n    opacity: 0,\n  },\n\n  rowCompassDirectionDown: {\n    '$isBelow &': {\n      bottom: -28,\n      opacity: 1,\n    },\n  },\n\n  rowCompassDirectionUp: {\n    '$isAbove &': {\n      top: -28,\n      opacity: 1,\n    },\n  },\n\n  fieldDescription: {\n    flex: 1,\n    alignItems: 'center',\n    paddingRight: 15,\n    display: 'flex',\n  },\n  stayHighlighted: {\n    backgroundColor: 'rgba(78,165,255,0.27) !important',\n  },\n  menu: {\n    userSelect: 'none',\n  },\n  suggestion: {\n    fontStyle: 'italic',\n    color: 'white',\n    flex: 1,\n    textAlign: 'right',\n    paddingRight: 10,\n  },\n  hiddenItem: {\n    color: '#070707',\n    fontSize: 10,\n    paddingLeft: 7,\n    paddingRight: 7,\n    backgroundColor: '#ababab',\n    borderRadius: 12,\n  },\n  symbols: {\n    color: '#cfcfcf',\n    fontWeight: 800,\n    fontFamily: \"'Source Code Pro', monospace\",\n  },\n  value: {\n    fontWeight: 600,\n    fontFamily: \"'Source Code Pro', monospace\",\n  },\n  fieldName: {\n    fontWeight: 600,\n    color: '#cfcfcf',\n    fontSize: 12,\n    fontFamily: \"'Source Code Pro', monospace\",\n  },\n  indexMarker: {\n    fontWeight: 500,\n    color: '#9cdcfe',\n    fontSize: 12,\n    fontFamily: \"'Source Code Pro', monospace\",\n  },\n  rowContents: {\n    display: 'flex',\n    alignItems: 'baseline',\n    justifyContent: 'center',\n    flexDirection: 'row',\n  },\n  left: {\n    flexGrow: 1,\n    flexShrink: 1,\n    overflow: 'hidden',\n    display: 'flex',\n    paddingTop: 3,\n    paddingBottom: 3,\n    paddingLeft: 5,\n  },\n  spacerBorder: {\n    maxWidth: 1,\n    backgroundColor: '#4B5A8C',\n    flexGrow: 0,\n    flexShrink: 0,\n  },\n  right: {\n    display: 'flex',\n    paddingLeft: 5,\n    paddingTop: 3,\n    paddingBottom: 3,\n    width: '35%',\n    flexGrow: 0,\n    flexShrink: 0,\n    overflow: 'hidden',\n  },\n  typeName: {\n    display: 'flex',\n    whiteSpace: 'pre',\n    flex: 1,\n    fontWeight: 600,\n    fontFamily: \"'Source Code Pro', monospace\",\n  },\n  assertionMet: {\n    display: 'flex',\n    flex: 1,\n    fontWeight: 400,\n    color: '#646464',\n    fontStyle: 'italic',\n    fontFamily: \"'Source Code Pro', monospace\",\n  },\n  diffAssertion: {\n    color: '#f8edf4',\n    flex: 1,\n    fontSize: 14,\n    fontWeight: 800,\n    fontFamily: \"'Source Code Pro', monospace\",\n  },\n  toolbar: {\n    alignItems: 'flex-start',\n    paddingTop: theme.spacing(1),\n    paddingBottom: theme.spacing(2),\n  },\n  dash: {\n    fontWeight: 500,\n    marginLeft: -10,\n    color: primary,\n  },\n\n  isSticky: {},\n}));\n\nexport const HiddenItemEllipsis = withShapeRenderContext((props) => {\n  const classes = useShapeViewerStyles();\n  const { setShowAllLists } = useContext(ShapeExpandedContext);\n  const { expandId } = props;\n  return (\n    <DiffToolTip placement=\"right\" title=\"(Hidden) Click to Expand\">\n      <div\n        className={classes.hiddenItem}\n        onClick={() => setShowAllLists(expandId, true)}\n      >\n        {'⋯'}\n      </div>\n    </DiffToolTip>\n  );\n});\n\nexport const DiffToolTip = withStyles((theme) => ({\n  tooltip: {\n    backgroundColor: '#2A3B72',\n    color: 'rgba(247, 248, 240, 1)',\n    boxShadow: theme.shadows[1],\n    maxWidth: 200,\n    fontSize: 11,\n    fontWeight: 200,\n    padding: 4,\n  },\n}))(Tooltip);\n\nexport const useColor = {\n  StringColor: '#e29f84',\n  NumberColor: '#09885a',\n  BooleanColor: '#E3662E',\n  ObjectColor: '#30B1C4',\n  ListColor: '#c47078',\n  UnknownColor: '#ffc176',\n  modifier: '#d5d4ff',\n};\n\nexport const SymbolColor = '#cfcfcf';\n\nexport const TypeName = ({ typeName, style, onTypeClick }) => {\n  const classes = useShapeViewerStyles();\n  const { shapeRender } = useContext(ShapeRenderContext);\n\n  if (!typeName) {\n    return null;\n  }\n\n  const coloredComponents = typeName.asColoredString(shapeRender.specShapes);\n\n  return (\n    <div className={classes.typeName}>\n      {mapScala(coloredComponents)((i) => {\n        if (i.text) {\n          const link = getOrUndefined(i.link);\n          const isLink = onTypeClick && link;\n          return (\n            <span\n              onClick={isLink && (() => onTypeClick(link))}\n              style={{\n                color: useColor[i.color] || i.color,\n                whiteSpace: 'pre',\n                textDecoration: isLink && 'underline',\n                cursor: isLink && 'pointer',\n              }}\n            >\n              {i.text}\n            </span>\n          );\n        }\n      })}\n    </div>\n  );\n};\n\nexport function Symbols({ children, withIndent }) {\n  const classes = useShapeViewerStyles();\n\n  const symbol = (\n    <Typography variant=\"caption\" className={classes.symbols}>\n      {children}\n    </Typography>\n  );\n\n  if (withIndent) {\n    return <Indent add={-1}>{symbol}</Indent>;\n  } else {\n    return symbol;\n  }\n}\n","import React from 'react';\nimport { InitialRfcCommandsStore } from '../../contexts/InitialRfcCommandsContext';\nimport { LocalDiffRfcStore } from '../../contexts/RfcContext';\nimport { commandsToJson } from '@useoptic/domain';\nimport { withSpecServiceContext } from '../../contexts/SpecServiceContext';\nimport compose from 'lodash.compose';\nimport sha1 from 'node-sha1';\n\nclass SimulatedCommandContext extends React.Component {\n  render() {\n    const {\n      rfcId,\n      eventStore,\n      commands,\n      shouldSimulate,\n      specService,\n    } = this.props;\n    const initialEventStore = eventStore.getCopy(rfcId);\n    const initialEventsString = eventStore.serializeEvents(rfcId);\n    const initialCommandsString = shouldSimulate\n      ? JSON.stringify(commandsToJson(commands))\n      : null;\n    const hash = sha1(`${initialEventsString}+${initialCommandsString}`);\n    return (\n      <InitialRfcCommandsStore\n        instance=\"the one in simulated command context\"\n        rfcId={rfcId}\n        initialEventsString={initialEventsString}\n        initialCommandsString={initialCommandsString}\n      >\n        <LocalDiffRfcStore\n          specService={specService}\n          initialEventStore={initialEventStore}\n          key={hash}\n        >\n          {this.props.children}\n        </LocalDiffRfcStore>\n      </InitialRfcCommandsStore>\n    );\n  }\n}\n\nexport default compose(withSpecServiceContext)(SimulatedCommandContext);\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { mapScala } from '@useoptic/domain';\nimport { UpdatedBlue, UpdatedBlueBackground } from '../../../theme';\n\nexport function DiffCopy(props) {\n  const classes = useStyles();\n\n  const copy = props.copy;\n  const fontSize = props.fontSize || 13;\n\n  const components = mapScala(copy)((i) => {\n    if (i.style === 'normal') {\n      return (\n        <span className={classes.normal} style={{ fontSize }}>\n          {i.value}{' '}\n        </span>\n      );\n    } else if (i.style === 'code') {\n      return (\n        <span>\n          <span className={classes.code} style={{ fontSize }}>\n            {i.value}\n          </span>{' '}\n        </span>\n      );\n    }\n  });\n\n  return <div>{components}</div>;\n}\n\nconst useStyles = makeStyles((theme) => ({\n  normal: {\n    wordBreak: 'break-word',\n    fontFamily: 'Ubuntu',\n  },\n  code: {\n    fontFamily: \"'Source Code Pro', monospace\",\n    fontWeight: 600,\n    paddingLeft: 2,\n    paddingRight: 2,\n    paddingTop: 1,\n    paddingBottom: 1,\n    wordBreak: 'break-word',\n    backgroundColor: UpdatedBlueBackground,\n  },\n}));\n","import React, { useContext, useEffect, useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport time from 'time-ago';\nimport FiberManualRecordIcon from '@material-ui/icons/FiberManualRecord';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport {\n  Dark,\n  DocDarkGrey,\n  DocDivider,\n  DocGrey,\n} from '../../docs/DocConstants';\nimport { DocSubGroup } from '../../docs/DocSubGroup';\nimport ListItem from '@material-ui/core/ListItem';\nimport List from '@material-ui/core/List';\nimport { PathAndMethod } from './PathAndMethod';\nimport WarningIcon from '@material-ui/icons/Warning';\nimport { Link, Redirect, Route, Switch, useHistory } from 'react-router-dom';\nimport Chip from '@material-ui/core/Chip';\nimport { dumpSpecServiceState } from '../../../utilities/dump-spec-service-state';\nimport { GenericContextFactory } from '../../../contexts/GenericContextFactory';\nimport {\n  useServices,\n  useSpecService,\n} from '../../../contexts/SpecServiceContext';\nimport { useRouterPaths } from '../../../RouterPaths';\nimport { RfcContext } from '../../../contexts/RfcContext';\nimport classNames from 'classnames';\nimport {\n  DiffResultHelper,\n  getOrUndefined,\n  JsonHelper,\n  lengthScala,\n  mapScala,\n} from '@useoptic/domain';\nimport { NewUrlModal } from './AddUrlModal';\nimport DiffPageNew, { IgnoreDiffContext, IgnoreDiffStore } from './DiffPageNew';\nimport { Show, ShowSpan } from '../../shared/Show';\nimport {\n  EndpointsContext,\n  EndpointsContextStore,\n  PathNameFromId,\n} from '../../../contexts/EndpointContext';\nimport MoreRecentCapture from './MoreRecentCapture';\nimport Page from '../../Page';\nimport { useBaseUrl } from '../../../contexts/BaseUrlContext';\nimport EmptyState from '../../support/EmptyState';\nimport {\n  AddedGreenBackground,\n  ChangedYellowBackground,\n  RemovedRedBackground,\n} from '../../../theme';\nimport { AddOpticLink } from '../../support/Links';\nimport { debugDump } from '../../../utilities/debug-dump';\nimport {\n  CaptureContext,\n  CaptureContextStore,\n  useCaptureContext,\n} from '../../../contexts/CaptureContext';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport { CustomNavTab } from './CustomNavTab';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport TypeModal from '../../shared/JsonTextarea';\nimport Fade from '@material-ui/core/Fade';\nimport { DiffLoadingOverview } from './LoadingNextDiff';\nimport { DiffStats } from './Stats';\nimport { track } from '../../../Analytics';\n\nconst {\n  Context: AllCapturesContext,\n  withContext: withAllCapturesContext,\n} = GenericContextFactory(null);\nexport { AllCapturesContext };\n\nfunction AllCapturesStore(props) {\n  const baseUrl = useBaseUrl();\n  const [captures, setCaptures] = useState([]);\n  const [dismissed, setDismissed] = useState([]);\n  const specService = useSpecService();\n  const history = useHistory();\n\n  function update() {\n    const task = async () => {\n      const listCapturesResponse = await specService.listCaptures();\n      const { captures } = listCapturesResponse;\n      setCaptures(captures);\n    };\n    task();\n  }\n\n  useEffect(() => {\n    update();\n  }, []);\n\n  useEffect(() => {\n    window.addEventListener('focus', update);\n\n    function cleanup() {\n      window.removeEventListener('focus', update);\n    }\n\n    return cleanup;\n  }, []);\n\n  useEffect(() => {\n    global.opticDump = dumpSpecServiceState(specService);\n    global.dumpEvents = async () => await specService.listEvents();\n  }, []);\n\n  function dismissCapture(captureId) {\n    setDismissed([...dismissed, captureId]);\n  }\n\n  function switchToCapture(captureId) {\n    history.push(`${baseUrl}/diffs/${captureId}`);\n  }\n\n  const context = {\n    captures,\n    dismissed,\n    dismissCapture,\n    switchToCapture,\n  };\n  return (\n    <AllCapturesContext.Provider value={context}>\n      {props.children}\n    </AllCapturesContext.Provider>\n  );\n}\n\nexport function CaptureManagerPage(props) {\n  const routerPaths = useRouterPaths();\n\n  return (\n    <Page title=\"Review API Diffs\">\n      <Page.Navbar mini={true} />\n      <Page.Body padded={false}>\n        <AllCapturesStore>\n          <IgnoreDiffStore>\n            <Switch>\n              <Route path={routerPaths.diffsRoot} component={CaptureManager} />\n            </Switch>\n          </IgnoreDiffStore>\n        </AllCapturesStore>\n      </Page.Body>\n    </Page>\n  );\n}\n\nexport const CaptureManager = ({}) => {\n  const classes = useStyles();\n  const routerPaths = useRouterPaths();\n  const { captures } = useContext(AllCapturesContext);\n  const baseUrl = useBaseUrl();\n\n  return (\n    <Switch>\n      <Route\n        exact\n        path={routerPaths.captureRoot}\n        component={CaptureDiffWrapper}\n      />\n      <Route\n        exact\n        path={routerPaths.captureRequestDiffsRoot}\n        component={RequestDiffWrapper}\n      />\n      {captures.length && (\n        <Redirect to={`${baseUrl}/diffs/${captures[0].captureId}`} />\n      )}\n      <Route component={() => empty} />\n    </Switch>\n  );\n};\n\nconst subtabs = {\n  ENDPOINT_DIFF: 'ENDPOINT_DIFF',\n  UNDOCUMENTED_URL: 'UNDOCUMENTED_URL',\n};\n\nfunction CaptureChooserComponent(props) {\n  const { captureId } = props;\n  const specService = useSpecService();\n  const classes = useStyles();\n  const captureContext = useContext(AllCapturesContext);\n  const {\n    endpointDiffs,\n    unrecognizedUrls,\n    completed,\n    skipped,\n    processed,\n  } = useCaptureContext();\n  const history = useHistory();\n  const baseUrl = useBaseUrl();\n\n  const realEndpointDiffCount = endpointDiffs.filter(\n    (i) => i.count > 0 && i.isDocumentedEndpoint\n  ).length;\n\n  const totalEndpoints = endpointDiffs.filter((i) => i.isDocumentedEndpoint)\n    .length;\n\n  const urlsSplit = DiffResultHelper.splitUnmatchedUrls(\n    JsonHelper.jsArrayToSeq(unrecognizedUrls),\n    JsonHelper.jsArrayToSeq(endpointDiffs)\n  );\n\n  const [tab, setTab] = useState(subtabs.ENDPOINT_DIFF);\n  \n  useEffect(() => {\n    track(`Changed to ${tab}`, {\n      diffCount: realEndpointDiffCount,\n      undocumentedUrlCount: urlsSplit.total\n    })\n  }, [tab, realEndpointDiffCount, urlsSplit.total])\n\n  useEffect(() => {\n    global.debugOptic = debugDump(specService, captureId);\n  });\n\n  useEffect(() => {\n    if (totalEndpoints === 0 && unrecognizedUrls.length > 0) {\n      setTab(subtabs.UNDOCUMENTED_URL);\n    }\n  }, [totalEndpoints, unrecognizedUrls.length]);\n\n  function handleChange(event) {\n    const captureId = event.target.value;\n    history.push(`${baseUrl}/diffs/${captureId}`);\n    window.location.reload();\n  }\n\n  return (\n    <div className={classes.container}>\n      <div className={classes.navigationContainer}>\n        <div className={classes.navRoot}>\n          <div className={classes.header}>\n            <FiberManualRecordIcon\n              color=\"secondary\"\n              fontSize=\"small\"\n              style={{ marginRight: 10 }}\n            />\n            <Typography variant=\"h6\" style={{ fontSize: 19 }}>\n              Local Capture\n            </Typography>\n          </div>\n\n          <FormControl className={classes.formControl} fullWidth>\n            <Select\n              size=\"small\"\n              placeholder=\"Select Capture\"\n              value={captureId}\n              onChange={handleChange}\n            >\n              {captureContext.captures.map((capture, index) => {\n                return (\n                  <MenuItem value={capture.captureId} key={capture.captureId}>\n                    <ListItemText\n                      primary={`${time.ago(capture.lastUpdate)} ${\n                        index === 0 ? '(LATEST) ' : ''\n                      } `}\n                    />\n                    <ListItemSecondaryAction>\n                      {capture.hasDiff && (\n                        <WarningIcon\n                          fontSize=\"small\"\n                          color=\"secondary\"\n                          style={{ marginRight: 8, paddingTop: 5 }}\n                        />\n                      )}\n                    </ListItemSecondaryAction>\n                  </MenuItem>\n                );\n              })}\n            </Select>\n          </FormControl>\n\n          <DocDivider style={{ marginTop: 22, marginBottom: 15 }} />\n\n          <Tabs\n            orientation=\"vertical\"\n            className={classes.tabs}\n            onChange={(_, value) => setTab(value)}\n            value={tab}\n          >\n            <CustomNavTab\n              label={`Endpoint Diffs (${realEndpointDiffCount} / ${totalEndpoints}) `}\n              value={subtabs.ENDPOINT_DIFF}\n            />\n            <CustomNavTab\n              label={`Undocumented URLs (${urlsSplit.total})`}\n              value={subtabs.UNDOCUMENTED_URL}\n            />\n          </Tabs>\n\n          <DocDivider style={{ marginTop: 22, marginBottom: 15 }} />\n\n          <div style={{ flex: 1 }} />\n\n          <DiffStats showSkipped={true} />\n        </div>\n      </div>\n      <div className={classes.pageContainer}>\n        <div className={classes.center}>\n          {subtabs.ENDPOINT_DIFF === tab && (\n            <EndpointDiffs captureId={captureId} />\n          )}\n          {subtabs.UNDOCUMENTED_URL === tab && (\n            <UnrecognizedUrls captureId={captureId} urlsSplit={urlsSplit} />\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction RequestDiffWrapper(props) {\n  const specService = useSpecService();\n  const classes = useStyles();\n  \n  return (\n    // sessionId={props.match.params.captureId}\n    // specService={specService}\n    <DiffPageNew {...props} />\n  );\n}\n\nconst empty = (\n  <EmptyState\n    title=\"Optic has not observed any traffic\"\n    content={`\nRun \\`api start\\` and send the API some traffic\n\nNot setup yet? Follow the [Getting Started Tutorial](${AddOpticLink})\n`.trim()}\n  />\n);\n\nfunction CaptureDiffWrapper(props) {\n  const { captureId } = props.match.params;\n  const classes = useStyles();\n\n  const rfcContext = useContext(RfcContext);\n  const services = useServices();\n\n  return (\n    <IgnoreDiffContext.Consumer>\n      {({ ignoredDiffs, resetIgnored }) => (\n        <CaptureContextStore\n          captureId={captureId}\n          ignoredDiffs={ignoredDiffs}\n          {...services}\n        >\n          <CaptureChooserComponent captureId={captureId} />\n        </CaptureContextStore>\n      )}\n    </IgnoreDiffContext.Consumer>\n  );\n}\n\nfunction CaptureDiffStat() {\n  const classes = useStyles();\n  // const { stats } = useCaptureContext();\n  //also available\n  // stats.captureCompleted\n  // stats.processed\n  return (\n    <div className={classes.stats}>\n      <Typography variant=\"h6\" color=\"primary\" style={{ fontWeight: 200 }}>\n        Optic observed <Stat number={0} label=\"interaction\" />, yielding{' '}\n        <Stat number={0} label=\"diff\" /> and{' '}\n        <Stat number={0} label=\"undocumented endpoint\" />.\n        {/*<Stat number={stats.interactionsCounter || 0} label=\"interaction\" />,*/}\n        {/*yielding <Stat number={stats.totalDiffs || 0} label=\"diff\" /> and{' '}*/}\n        {/*<Stat*/}\n        {/*  number={stats.undocumentedEndpoints || 0}*/}\n        {/*  label=\"undocumented endpoint\"*/}\n        {/*/>*/}\n        {/*.*/}\n      </Typography>\n    </div>\n  );\n}\n\nfunction EndpointDiffs(props) {\n  const { captureId } = props;\n  const classes = useStyles();\n  const { endpointDiffs, completed } = useCaptureContext();\n  const history = useHistory();\n  const baseUrl = useBaseUrl();\n\n  const real = endpointDiffs.filter((i) => i.isDocumentedEndpoint);\n  const realCount = real.length;\n  const anyHaveDiffs = real.some((i) => i.count > 0);\n\n  if (realCount === 0 && !completed) {\n    return <DiffLoadingOverview show={true} />;\n  }\n\n  //also available\n  // stats.captureCompleted\n  // stats.processed\n  return (\n    <>\n      <div className={classes.stats}>\n        <Typography variant=\"h6\" color=\"primary\" style={{ fontWeight: 200 }}>\n          {anyHaveDiffs\n            ? 'Some endpoints are exhibiting undocumented behavior'\n            : 'All endpoints are working as specified'}\n        </Typography>\n      </div>\n      <List style={{ padding: 13, paddingTop: 4 }}>\n        {endpointDiffs.map((i) => {\n          //skip undocumented\n          if (!i.isDocumentedEndpoint) {\n            return null;\n          }\n\n          const to = `${baseUrl}/diffs/${captureId}/paths/${i.pathId}/methods/${i.method}`;\n          return (\n            <EndpointsContextStore key={to} pathId={i.pathId} method={i.method}>\n              <Paper\n                className={classNames(classes.paper, {\n                  [classes.disabled]: i.count === 0,\n                })}\n              >\n                <EndpointsContext.Consumer>\n                  {({ endpointDescriptor }) => (\n                    <ListItem\n                      button\n                      className={classes.row}\n                      component={Link}\n                      to={to}\n                      onClick={() => {\n                        track(\"Viewing Endpoint Diff\", i)\n                      }}\n                    >\n                      <div className={classes.listItemInner}>\n                        <Typography component=\"div\" variant=\"subtitle2\">\n                          {endpointDescriptor.endpointPurpose || (\n                            <span style={{ color: DocDarkGrey }}>\n                              Unamed Endpoint\n                            </span>\n                          )}\n                        </Typography>\n                        <PathAndMethod\n                          method={endpointDescriptor.httpMethod}\n                          path={endpointDescriptor.fullPath}\n                        />\n                      </div>\n                      <ListItemSecondaryAction>\n                        <ShowSpan when={i.count > 0}>\n                          <Chip\n                            className={classes.chips}\n                            size=\"small\"\n                            label={`Diffs: ${i.count}`}\n                            style={{\n                              backgroundColor: ChangedYellowBackground,\n                            }}\n                          />\n                        </ShowSpan>\n                        <ShowSpan when={i.count === 0}>\n                          <Chip\n                            className={classes.chips}\n                            size=\"small\"\n                            label={`No Diffs`}\n                            style={{\n                              backgroundColor: AddedGreenBackground,\n                            }}\n                          />\n                        </ShowSpan>\n                      </ListItemSecondaryAction>\n                    </ListItem>\n                  )}\n                </EndpointsContext.Consumer>\n              </Paper>\n            </EndpointsContextStore>\n          );\n        })}\n      </List>\n    </>\n  );\n}\n\nfunction UnrecognizedUrls(props) {\n  const { captureId, urlsSplit } = props;\n  const classes = useStyles();\n  const history = useHistory();\n  const { unrecognizedUrls, endpointDiffs, completed } = useCaptureContext();\n  const baseUrl = useBaseUrl();\n\n  const undocumented = JsonHelper.seqToJsArray(urlsSplit.undocumented);\n  const allUnmatchedPaths = JsonHelper.seqToJsArray(urlsSplit.allPaths);\n  const urls = JsonHelper.seqToJsArray(urlsSplit.urls);\n\n  const [pendingUrl, setPendingUrl] = useState(null);\n\n  if (urls.length === 0 && undocumented.length === 0 && !completed) {\n    return <DiffLoadingOverview show={true} />;\n  }\n\n  return (\n    <>\n      {pendingUrl && (\n        <NewUrlModal\n          onClose={() => setPendingUrl(null)}\n          allUnmatchedPaths={allUnmatchedPaths}\n          urlOverride={pendingUrl.override}\n          newUrl={pendingUrl}\n          onAdd={(result) => {\n            const { pathId, method } = result;\n            const to = `${baseUrl}/diffs/${captureId}/paths/${pathId}/methods/${method}`;\n            history.push(to);\n          }}\n        />\n      )}\n      <div className={classes.stats}>\n        <Typography variant=\"h6\" color=\"primary\" style={{ fontWeight: 200 }}>\n          Optic observed{' '}\n          <Stat number={urlsSplit.totalCount || 0} label=\"undocumented url\" />.\n        </Typography>\n      </div>\n\n      <Show when={urlsSplit.totalCount >= 250}>\n        <div className={classes.subStat}>\n          <Typography variant=\"caption\" style={{ color: DocGrey }}>\n            Showing {urls.length} undocumented URLs. Start documenting the new\n            endpoints or ignore the paths in your optic.yml file.\n          </Typography>\n        </div>\n      </Show>\n\n      <Show when={undocumented.length}>\n        <Typography variant=\"subtitle2\" color=\"primary\" style={{ padding: 9 }}>\n          Ready to Document\n        </Typography>\n        <List style={{ marginBottom: 12 }}>\n          {undocumented.map((i) => {\n            const url = <PathNameFromId pathId={getOrUndefined(i.pathId)} />;\n\n            return (\n              <ListItem\n                button\n                className={classes.row}\n                divider={true}\n                onClick={() => {\n                  setPendingUrl({\n                    pathId: i.pathId,\n                    path: i.path,\n                    method: i.method,\n                    override: url,\n                  });\n                }}\n              >\n                <div className={classes.listItemInner}>\n                  <PathAndMethod method={i.method} path={url} />\n                </div>\n                <ListItemSecondaryAction>\n                  <Chip\n                    className={classes.chips}\n                    size=\"small\"\n                    label={i.count + ' observations'}\n                    style={{\n                      backgroundColor: AddedGreenBackground,\n                    }}\n                  />\n                </ListItemSecondaryAction>\n              </ListItem>\n            );\n          })}\n        </List>\n\n        {urls.length > 0 && (\n          <Typography\n            variant=\"subtitle2\"\n            color=\"primary\"\n            style={{ padding: 9 }}\n          >\n            Unrecognized URLs\n          </Typography>\n        )}\n      </Show>\n\n      <List>\n        {urls.map((i) => {\n          return (\n            <ListItem\n              button\n              className={classes.row}\n              divider={true}\n              onClick={() => {\n                setPendingUrl(i);\n              }}\n            >\n              <div className={classes.listItemInner}>\n                <PathAndMethod method={i.method} path={i.path} />\n              </div>\n              <ListItemSecondaryAction>\n                <Chip\n                  className={classes.chips}\n                  size=\"small\"\n                  label={i.count + ' observations'}\n                  style={{\n                    backgroundColor: AddedGreenBackground,\n                  }}\n                />\n              </ListItemSecondaryAction>\n            </ListItem>\n          );\n        })}\n      </List>\n    </>\n  );\n}\n\nconst Stat = ({ number, label }) => {\n  return (\n    <span>\n      {number !== 0 && (\n        <Typography\n          variant=\"h6\"\n          component=\"span\"\n          color=\"secondary\"\n          style={{ fontWeight: 800 }}\n        >\n          {number}{' '}\n        </Typography>\n      )}\n      <Typography variant=\"h6\" component=\"span\" style={{ fontWeight: 800 }}>\n        {number === 0 && 'no '}\n        {label}\n        {number === 1 ? '' : 's'}\n      </Typography>\n    </span>\n  );\n};\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    display: 'flex',\n    height: '100vh',\n    overflow: 'hidden',\n  },\n  navigationContainer: {\n    width: 280,\n    overflow: 'hidden',\n    display: 'flex',\n  },\n  pageContainer: {\n    display: 'flex',\n    flexGrow: 1,\n    flexShrink: 1,\n    overflow: 'scroll',\n    height: '100vh',\n    justifyContent: 'center',\n  },\n  navRoot: {\n    flexGrow: 1,\n    position: 'fixed',\n    width: 'inherit',\n    height: '100vh',\n    overflowY: 'scroll',\n    display: 'flex',\n    flexDirection: 'column',\n    borderRight: `1px solid ${theme.palette.grey[300]}`,\n    background: theme.palette.grey[100],\n  },\n  chips: {\n    marginLeft: 10,\n  },\n  tabs: {\n    marginLeft: theme.spacing(4),\n  },\n  center: {\n    flex: 1,\n    paddingBottom: 300,\n    maxWidth: 1200,\n  },\n  statsSection: {\n    paddingBottom: theme.spacing(2),\n  },\n  progressStats: {\n    paddingLeft: theme.spacing(1),\n    color: DocDarkGrey,\n  },\n  progressWrapper: {\n    height: 6,\n    width: '100%',\n  },\n  header: {\n    display: 'flex',\n    flexDirection: 'row',\n    flexShrink: 1,\n    width: '100%',\n    alignItems: 'center',\n    margin: theme.spacing(2),\n  },\n  formControl: {\n    paddingLeft: 35,\n    paddingRight: 15,\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2),\n  },\n  stats: {\n    marginTop: 20,\n    paddingBottom: 15,\n    alignItems: 'center',\n    display: 'flex',\n    justifyContent: 'center',\n    flexDirection: 'row',\n  },\n  subStat: {\n    paddingBottom: 15,\n    alignItems: 'center',\n    display: 'flex',\n    justifyContent: 'center',\n    flexDirection: 'row',\n  },\n  listItemInner: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  row: {\n    paddingTop: 10,\n    paddingBottom: 10,\n  },\n  disabled: {\n    pointerEvents: 'none',\n    opacity: 0.5,\n  },\n  paper: {\n    marginBottom: 15,\n  },\n  diffContainer: {\n    display: 'flex',\n    height: '100vh',\n    paddingLeft: 32,\n    paddingRight: 32,\n    flexDirection: 'row',\n    overflow: 'scroll',\n    flexGrow: 1,\n    flexShrink: 1,\n    justifyContent: 'center',\n  },\n  diffWrapper: {\n    flex: 1,\n    padding: '24px 0px 144px',\n    maxWidth: 1280,\n  },\n}));\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SpecServiceClient = exports.Client = void 0;\n\nvar client_1 = require(\"./client\");\n\nObject.defineProperty(exports, \"Client\", {\n  enumerable: true,\n  get: function get() {\n    return client_1.Client;\n  }\n});\n\nvar spec_service_client_1 = require(\"./spec-service-client\");\n\nObject.defineProperty(exports, \"SpecServiceClient\", {\n  enumerable: true,\n  get: function get() {\n    return spec_service_client_1.Client;\n  }\n});","import { RfcCommands } from '@useoptic/domain';\n\nexport function commandsForUpdatingContribution(id, key, value) {\n  return [RfcCommands.AddContribution(id, key, value)];\n}\n","import React, { useContext } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport { DocDivider } from '../../docs/DocConstants';\nimport Typography from '@material-ui/core/Typography';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport Button from '@material-ui/core/Button';\nimport { DiffContext } from './DiffContext';\nimport { CompareEquality, mapScala } from '@useoptic/domain';\nimport { IgnoreDiffContext } from './DiffPageNew';\nimport { useDiffDescription, useSuggestionsForDiff } from './DiffHooks';\nimport { diff } from 'react-ace';\nimport { DiffCopy } from './DiffCopy';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    position: 'sticky',\n    top: 120,\n  },\n  header: {\n    display: 'flex',\n    alignItem: 'center',\n    justifyContent: 'center',\n    paddingLeft: 11,\n    paddingTop: 14,\n    paddingBottom: 9,\n  },\n  font: {\n    fontSize: 13,\n    fontWeight: 800,\n    fontFamily: \"'Source Code Pro', monospace\",\n  },\n  icon: {\n    paddingRight: 0,\n  },\n  formControl: {\n    margin: theme.spacing(1),\n    marginLeft: theme.spacing(1) + 7,\n    marginBottom: 7,\n  },\n  suggestion: {\n    fontWeight: 400,\n    marginLeft: -5,\n    fontSize: 12,\n  },\n  buttons: {\n    textAlign: 'right',\n    padding: 8,\n  },\n}));\n\nexport const DiffHelperCard = (props) => {\n  const classes = useStyles();\n  const {\n    inRequest,\n    inResponse,\n    description,\n    currentInteraction,\n    selectedInterpretation,\n    setSelectedInterpretation,\n    setSelectedDiff,\n    selectedDiff,\n  } = props;\n  const { acceptSuggestion, clearPreview } = useContext(DiffContext);\n\n  const suggestions = useSuggestionsForDiff(selectedDiff, currentInteraction);\n\n  const showIt =\n    (selectedDiff && selectedDiff.inRequest && inRequest) ||\n    (selectedDiff.inResponse && inResponse);\n\n  if (!showIt) {\n    return null;\n  }\n\n  return (\n    <div className={classes.root}>\n      <Card elevation={3}>\n        <div className={classes.header}>\n          <DiffCopy copy={description.summary} />\n          <div style={{ flex: 1, minWidth: 20 }} />\n          <PulsingOptic />\n        </div>\n\n        <DocDivider />\n\n        <FormControl component=\"fieldset\" className={classes.formControl}>\n          <RadioGroup>\n            {suggestions.map((suggestion, n) => {\n              return (\n                <FormControlLabel\n                  key={n}\n                  onClick={() => setSelectedInterpretation(suggestion)}\n                  control={\n                    <Radio\n                      size=\"small\"\n                      color=\"primary\"\n                      value={suggestion}\n                      checked={Boolean(\n                        selectedInterpretation &&\n                          CompareEquality.betweenWithoutCommands(\n                            suggestion,\n                            selectedInterpretation\n                          )\n                      )}\n                    />\n                  }\n                  label={<DiffCopy copy={suggestion.copyPair.action} />}\n                />\n              );\n            })}\n          </RadioGroup>\n        </FormControl>\n\n        <DocDivider />\n\n        <div className={classes.buttons}>\n          <IgnoreDiffContext.Consumer>\n            {({ ignoreDiff }) => {\n              return (\n                <Button\n                  size=\"small\"\n                  onClick={() => {\n                    const toIgnore = selectedDiff.diff;\n                    setSelectedDiff(null);\n                    ignoreDiff(toIgnore);\n                  }}\n                >\n                  Ignore\n                </Button>\n              );\n            }}\n          </IgnoreDiffContext.Consumer>\n          <Button\n            color=\"primary\"\n            size=\"small\"\n            disabled={!selectedInterpretation}\n            onClick={() => {\n              setSelectedDiff(null);\n              acceptSuggestion(selectedInterpretation);\n            }}\n          >\n            Approve\n          </Button>\n        </div>\n      </Card>\n    </div>\n  );\n};\n\nexport const PulsingOptic = () => (\n  <div className={'blob'} style={{ marginRight: 9 }}>\n    <img src=\"/optic-logo.svg\" width={32} height={32} />\n  </div>\n);\n","import React from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useCaptureContext } from '../../../contexts/CaptureContext';\nimport { DocDarkGrey } from '../../docs/DocConstants';\nimport {\n  AddedDarkGreen,\n  AddedGreen,\n  AddedGreenBackground,\n  primary,\n} from '../../../theme';\nimport Fade from '@material-ui/core/Fade';\n\nexport function DiffStats(props) {\n  const { showSkipped } = props;\n  const classes = useStyles();\n\n  const { processed, skipped, completed } = useCaptureContext();\n\n  return (\n    <div className={classes.statsSection}>\n      <div style={{ marginTop: 7 }}>\n        <Fade in={!completed}>\n          <CircularProgress size={12} variant=\"indeterminate\" />\n        </Fade>\n      </div>\n      <Typography\n        component=\"div\"\n        variant=\"overline\"\n        style={{ fontSize: 12 }}\n        className={classes.progressStats}\n      >\n        {processed} processed {showSkipped && ` | ${skipped} skipped`}\n      </Typography>\n    </div>\n  );\n}\n\nconst useStyles = makeStyles((theme) => ({\n  progressStats: {\n    paddingLeft: theme.spacing(1),\n    color: DocDarkGrey,\n    flex: 1,\n  },\n  statsSection: {\n    display: 'flex',\n    flexDirection: 'row',\n    paddingLeft: theme.spacing(2),\n  },\n}));\n","import { createMuiTheme } from '@material-ui/core/styles';\n\nexport const primary = '#31366f';\nexport const secondary = '#ea4a61';\nexport const UpdatedBlue = '#2b7bd1';\nexport const UpdatedBlueBackground = 'rgba(43,123,209,0.11)';\nexport const AddedGreenBackground = 'rgba(0,196,70,0.3)';\nexport const ChangedYellowBackground = 'rgba(252,171,16,0.3)';\nexport const RemovedRedBackground = 'rgba(248,51,60,0.3)';\nexport const AddedGreen = '#17c8a3';\nexport const AddedDarkGreen = '#1b6d5c';\nexport const ChangedYellow = '#c8b768';\nexport const RemovedRed = '#c86363';\n\nexport const methodColors = {\n  OPTIONS: '#686868',\n  GET: '#52e2a3',\n  POST: '#5aaad1',\n  PUT: '#ee7517',\n  PATCH: '#c8a5dc',\n  DELETE: '#cd8d8c',\n};\n\nexport const methodColorsDark = {\n  OPTIONS: '#686868',\n  GET: '#276c4e',\n  POST: '#264859',\n  PUT: '#69340a',\n  PATCH: '#796384',\n  DELETE: '#634444',\n};\n\nexport const appTheme = createMuiTheme({\n  palette: {\n    primary: { main: primary },\n    secondary: { main: secondary },\n    updated: { main: UpdatedBlue, background: UpdatedBlueBackground },\n    added: { main: AddedGreen, background: AddedGreenBackground },\n    removed: { main: RemovedRed, background: RemovedRedBackground },\n\n    httpMethods: {\n      OPTIONS: { main: methodColors.OPTIONS, dark: methodColorsDark.OPTIONS },\n      GET: { main: methodColors.GET, dark: methodColorsDark.GET },\n      POST: { main: methodColors.POST, dark: methodColorsDark.POST },\n      PUT: { main: methodColors.PUT, dark: methodColorsDark.PUT },\n      PATCH: { main: methodColors.PATCH, dark: methodColorsDark.PATCH },\n      DELETE: { main: methodColors.DELETE, dark: methodColorsDark.DELETE },\n    },\n  },\n  typography: {\n    // Use the system font instead of the default Roboto font.\n    fontFamily: ['Ubuntu', 'Inter'],\n  },\n});\n","import { Client } from '@useoptic/cli-client';\nimport EventEmitter from 'events';\nimport packageJson from '../package.json';\nconst opticVersion = packageJson.version;\n\nlet isAnalyticsEnabled = window.opticAnalyticsEnabled;\n\nconst readyPromise = new Promise(async (resolve) => {\n  const client = new Client('/api');\n  if (isAnalyticsEnabled) {\n    const response = await client.getIdentity();\n    // debugger;\n    if (response.ok) {\n      const { user } = await response.json();\n      window.FS.identify(user.sub, {\n        displayName: user.name,\n        email: user.email,\n      });\n      window.analytics.identify(user.sub, {\n        name: user.name,\n        email: user.email,\n      });\n      window.Intercom('update', { name: user.name, email: user.email });\n    }\n    resolve();\n  } else {\n    console.warn('Analytics is disabled');\n    try {\n      window.FS.shutdown();\n    } catch (e) {}\n    resolve();\n  }\n});\n\nexport async function touchAnalytics() {\n  await readyPromise;\n  console.log('analytics loaded');\n}\n\nclass EventTrackingEmitter extends EventEmitter {}\n\nexport const trackEmitter = new EventTrackingEmitter();\n\nexport async function track(event, props) {\n  await readyPromise;\n  if (isAnalyticsEnabled) {\n    const allProps = { ...props, opticVersion };\n    window.analytics.track(event, allProps);\n    window.FS.event(event, allProps);\n  }\n  trackEmitter.emit('event', event, props || {});\n}\n","import React from 'react';\nimport {Typography} from '@material-ui/core';\nimport {DocDivider, DocSubGroupHeadingBigStyles, DocSubGroupHeadingStyles} from './DocConstants';\n\nexport function DocSubGroup({title, children, style, innerStyle}) {\n  return (\n    <div style={{marginTop: 11, ...style}}>\n      <div>\n      <Typography variant=\"overline\" style={DocSubGroupHeadingStyles}>{title}</Typography>\n      <DocDivider />\n      </div>\n      <div style={innerStyle}>\n      {children}\n      </div>\n    </div>\n  )\n}\n\nexport function DocSubGroupBig({title, children, disabled, style, innerStyle}) {\n    return (\n        <div style={{marginTop: 11, ...style}}>\n            <div style={{maxWidth: 650}}>\n                <Typography variant=\"overline\" style={DocSubGroupHeadingBigStyles}>{title}</Typography>\n                <DocDivider />\n            </div>\n            <div style={{maxWidth: 650}} style={innerStyle}>\n                {children}\n            </div>\n        </div>\n    )\n}\n","import {asAbsolutePath, asPathTrailComponents} from '../components/utilities/PathUtilities.js';\n\nclass RequestUtilities {\n    static hasBody(bodyDescriptor) {\n        return RequestUtilities.hasNormalizedBody(getNormalizedBodyDescriptor(bodyDescriptor))\n    }\n\n    static hasNormalizedBody(normalizedBodyDescriptor) {\n        const {shapeId, isRemoved} = normalizedBodyDescriptor\n        if (shapeId && !isRemoved) {\n            return true\n        }\n        return false\n    }\n\n    static canAddBody(request) {\n        const {requestDescriptor} = request\n        const {httpMethod, bodyDescriptor} = requestDescriptor\n        const hasBody = RequestUtilities.hasBody(bodyDescriptor)\n        const httpAllowsBodyForMethod = httpMethod.toLowerCase() !== 'get'\n        return !hasBody && httpAllowsBodyForMethod\n    }\n\n    static absolutePath(pathId, pathsById) {\n        return asAbsolutePath(asPathTrailComponents(pathId, pathsById))\n    }\n\n    static requestName(request, pathsById) {\n        const {requestDescriptor} = request;\n        const {httpMethod, pathComponentId} = requestDescriptor\n        return `${httpMethod} ${RequestUtilities.absolutePath(pathComponentId, pathsById)}`\n    }\n}\n\nexport {\n    RequestUtilities\n}\n\n\nexport function getNormalizedBodyDescriptor(value) {\n  if (value && value.ShapedBodyDescriptor) {\n    return value.ShapedBodyDescriptor;\n  }\n  return {};\n}\n","import {\n  asPathTrail,\n  getNameWithFormattedParameters,\n  isPathParameter,\n} from '../components/utilities/PathUtilities';\n\nimport {\n  DESCRIPTION,\n  pathMethodKeyBuilder,\n  PURPOSE,\n} from '../ContributionKeys';\n\nimport { getNormalizedBodyDescriptor } from './RequestUtilities';\nimport sortBy from 'lodash.sortby';\n\nexport interface EndpointDescriptor {\n  httpMethod: string;\n  method: string;\n  pathId: string;\n  fullPath: string;\n  pathParameters: Array<{\n    pathId: string;\n    name: string;\n    description: string;\n  }>;\n  requestBodies: Array<{\n    requestId: string;\n    requestBody: any; // replace with RequestBodyDescriptor\n  }>;\n  responses: Array<{\n    responseId: string;\n    responseBody: any; // replace with ResponseBodyDescriptor\n    statusCode: number; // replace with HttpStatusCode enum?\n  }>;\n  endpointPurpose?: string;\n  endpointDescription?: string;\n  isEmpty: boolean;\n}\n\nexport function getEndpointId({ method, pathId }) {\n  return pathMethodKeyBuilder(pathId, method);\n}\n\nexport function createEndpointDescriptor(\n  { method, pathId }: { method: string; pathId: string },\n  cachedQueryResults: {\n    requests: any[];\n    pathsById: { [id: string]: any };\n    requestIdsByPathId: { [id: string]: any };\n    responsesArray: any[];\n    contributions: any;\n  }\n): EndpointDescriptor {\n  const {\n    requests,\n    pathsById,\n    requestIdsByPathId,\n    responsesArray,\n    contributions,\n  } = cachedQueryResults;\n\n  const endpointId = getEndpointId({ pathId, method });\n  const requestIdsOnPath = (requestIdsByPathId[pathId] || []).map(\n    (requestId) => requests[requestId]\n  );\n  const requestsOnPathAndMethod = requestIdsOnPath.filter(\n    (request) => request.requestDescriptor.httpMethod === method.toUpperCase()\n  );\n\n  let fullPath;\n  let pathParameters = [];\n\n  //try to resolve this path\n  try {\n    const pathTrail = asPathTrail(pathId, pathsById);\n    const pathTrailComponents = pathTrail.map((pathId) => pathsById[pathId]);\n\n    const pathTrailWithNames = pathTrailComponents.map((pathComponent) => {\n      const pathComponentName = getNameWithFormattedParameters(pathComponent);\n      const pathComponentId = pathComponent.pathId;\n      return {\n        pathComponentName,\n        pathComponentId,\n      };\n    });\n\n    fullPath = pathTrailWithNames\n      .map(({ pathComponentName }) => pathComponentName)\n      .join('/');\n\n    pathParameters = pathTrail\n      .map((pathId) => pathsById[pathId])\n      .filter((p) => isPathParameter(p))\n      .map((p) => ({\n        pathId: p.pathId,\n        name: p.descriptor.ParameterizedPathComponentDescriptor.name,\n        description: contributions.getOrUndefined(p.pathId, DESCRIPTION),\n      }));\n  } catch (e) {\n    // TODO figure out what error we would expect for method / pathId we can't find, so\n    // we can deal with that explicitly and stop swallowing other errors\n    console.error(e);\n  }\n\n  if (!fullPath) return null; // can not find endpoint requests\n\n  const requestBodies = requestsOnPathAndMethod.map(\n    ({ requestId, requestDescriptor }) => {\n      const requestBody = getNormalizedBodyDescriptor(\n        requestDescriptor.bodyDescriptor\n      );\n      return {\n        requestId,\n        requestBody,\n      };\n    }\n  );\n\n  const responsesForPathAndMethod = sortBy(\n    responsesArray\n      .filter(\n        (response) =>\n          response.responseDescriptor.httpMethod === method.toUpperCase() &&\n          response.responseDescriptor.pathId === pathId\n      )\n      .map(({ responseId, responseDescriptor }) => {\n        const responseBody = getNormalizedBodyDescriptor(\n          responseDescriptor.bodyDescriptor\n        );\n        return {\n          responseId,\n          responseBody,\n          statusCode: responseDescriptor.httpStatusCode,\n        };\n      }),\n    ['statusCode']\n  );\n\n  return {\n    httpMethod: method,\n    method,\n    pathId,\n    fullPath,\n    pathParameters,\n    requestBodies,\n    responses: responsesForPathAndMethod,\n    endpointPurpose: contributions.getOrUndefined(endpointId, PURPOSE),\n    endpointDescription: contributions.getOrUndefined(endpointId, DESCRIPTION),\n    isEmpty:\n      requestBodies.length === 0 && responsesForPathAndMethod.length === 0,\n  };\n}\n","import * as React from 'react';\nimport {\n  commandsToJson,\n  Facade,\n  Queries,\n  RfcCommandContext,\n} from '@useoptic/domain';\nimport { GenericContextFactory } from './GenericContextFactory.js';\nimport { withInitialRfcCommandsContext } from './InitialRfcCommandsContext.js';\nimport debounce from 'lodash.debounce';\nimport { useSnackbar, VariantType, withSnackbar } from 'notistack';\nimport uuidv4 from 'uuid/v4';\nimport { CommandContext, withCommandContext } from './CommandContext';\nimport memoize from 'memoize-weak';\nimport { InitialRfcCommandsContext } from './InitialRfcCommandsContext';\nimport { useContext, useEffect, useState } from 'react';\n\nconst {\n  Context: RfcContext,\n  withContext: withRfcContext,\n} = GenericContextFactory(null);\n\nglobal.commands = [];\nglobal.getCommandsAsJson = function () {\n  return commandsToJson(global.commands);\n};\n\nexport function stuffFromQueries(queries) {\n  const contributions = queries.contributions();\n\n  const {\n    requests,\n    pathComponents,\n    responses,\n    requestParameters,\n  } = queries.requestsState();\n  const pathIdsByRequestId = queries.pathsWithRequests();\n  const pathsById = pathComponents;\n  // const absolutePaths = Object.keys(pathsById).map(pathId => ({ [pathId]: queries.absolutePath(pathId) })).reduce((acc, value) => Object.assign(acc, value), {})\n  // console.log({ absolutePaths })\n  const pathIdsWithRequests = new Set(Object.values(pathIdsByRequestId));\n\n  const endpoints = queries.endpoints();\n  const shapesState = queries.shapesState();\n  const shapesResolvers = queries.shapesResolvers();\n  const requestIdsByPathId = Object.entries(pathIdsByRequestId).reduce(\n    (acc, entry) => {\n      const [requestId, pathId] = entry;\n      const value = acc[pathId] || [];\n      value.push(requestId);\n      acc[pathId] = value;\n      return acc;\n    },\n    {}\n  );\n  const cachedQueryResults = {\n    contributions,\n    requests,\n    requestParameters,\n    responses,\n    responsesArray: Object.values(responses),\n    pathIdsByRequestId,\n    requestIdsByPathId,\n    pathsById,\n    endpoints,\n    pathIdsWithRequests,\n    shapesState,\n    shapesResolvers,\n  };\n  return cachedQueryResults;\n}\n\nfunction BaseRfcStore(props) {\n  const { clientId, clientSessionId } = useContext(CommandContext);\n  const initialRfcInput = useContext(InitialRfcCommandsContext);\n  const [error, setError] = useState(null);\n  const [x, setX] = useState(null);\n  const [updateCount, setUpdateCount] = useState(0);\n  const { initialCommandsString, initialEventsString, rfcId } = initialRfcInput;\n\n  useEffect(\n    function () {\n      try {\n        const eventStore = Facade.makeEventStore();\n        global.eventStore = eventStore;\n        if (initialEventsString) {\n          eventStore.bulkAdd(rfcId, initialEventsString);\n        }\n        const batchId = 'initial-batch';\n        const commandContext = new RfcCommandContext(\n          clientId,\n          clientSessionId,\n          batchId\n        );\n        const rfcService = Facade.fromJsonCommands(\n          eventStore,\n          rfcId,\n          initialCommandsString || '[]',\n          commandContext\n        );\n        setX({ rfcService, eventStore });\n      } catch (e) {\n        setError(e);\n      }\n    },\n    [initialCommandsString, initialEventsString]\n  );\n  if (!x) {\n    return null;\n  }\n\n  if (error) {\n    console.error(error);\n    return <div>Error! :(</div>;\n  }\n  const { rfcService, eventStore } = x;\n  const initialEventStore = (props.initialEventStore || eventStore).getCopy(\n    rfcId\n  );\n\n  function handleCommands(...commands) {\n    const batchId = uuidv4();\n    const commandContext = new RfcCommandContext(\n      clientId,\n      clientSessionId,\n      batchId\n    );\n\n    try {\n      rfcService.handleCommands(rfcId, commandContext, ...commands);\n      setUpdateCount((c) => c + 1);\n      if (props.onChange) {\n        props.onChange({\n          rfcId,\n          eventStore,\n          rfcService,\n        });\n      }\n    } catch (e) {\n      setError(e);\n    }\n  }\n\n  const handleCommand = handleCommands;\n\n  const queries = Queries(eventStore, rfcService, rfcId);\n  const cachedQueryResults = stuffFromQueries(queries);\n  const { specService } = props;\n  const value = {\n    rfcId,\n    clientSessionId,\n    clientId,\n    rfcService,\n    initialEventStore,\n    eventStore,\n    queries,\n    cachedQueryResults,\n    handleCommand,\n    handleCommands,\n  };\n  return (\n    <RfcContext.Provider value={value}>{props.children}</RfcContext.Provider>\n  );\n}\n\nconst RfcStore = BaseRfcStore;\n\nfunction LocalRfcStore(props) {\n  const { enqueueSnackbar } = useSnackbar();\n  const { specService } = props;\n\n  async function handleChange({ eventStore, rfcId }) {\n    try {\n      await specService.saveEvents(eventStore, rfcId);\n    } catch (e) {\n      debugger;\n      enqueueSnackbar(\n        'Unable to save changes. Please make sure the CLI is still running.',\n        { variant: 'error' }\n      );\n    }\n  }\n\n  return (\n    <RfcStore\n      onChange={debounce(handleChange, 4000, { leading: true, trailing: true })}\n    >\n      {props.children}\n    </RfcStore>\n  );\n}\n\nconst LocalDiffRfcStore = BaseRfcStore;\n\nexport {\n  RfcStore,\n  LocalRfcStore,\n  LocalDiffRfcStore,\n  RfcContext,\n  withRfcContext,\n};\n\n// function commandNameFor(command) {\n//     const name = command.$classData.name\n//     const split = name.split('$')\n//     return split[1]\n// }\n","import React, { useContext, useState } from 'react';\nimport { GenericContextFactory } from '../../../../contexts/GenericContextFactory';\n\nconst {\n  Context: ShapeRenderContext,\n  withContext: withShapeRenderContext,\n} = GenericContextFactory(null);\n\nfunction ShapeRenderStore(props) {\n  const [compassState, setCompassState] = useState({\n    isAbove: false,\n    isBelow: false,\n    x: null,\n    width: null,\n  });\n\n  const context = {\n    shapeRender: props.shape,\n    rootId: props.shape.rootId,\n    diffDescription: props.diffDescription,\n    suggestion: props.suggestion,\n    diff: props.diff,\n    exampleOnly: props.exampleOnly,\n    hideDivider: props.hideDivider,\n    compassState,\n    setCompassState,\n  };\n\n  return (\n    <ShapeRenderContext.Provider value={context}>\n      {props.children}\n    </ShapeRenderContext.Provider>\n  );\n}\n\nexport { ShapeRenderStore, ShapeRenderContext, withShapeRenderContext };\n\nexport function useDiff() {\n  const context = useContext(ShapeRenderContext);\n\n  if (!context)\n    throw Error('useDiff can only be used inside provided ShapeRenderContext');\n\n  return {\n    diff: context.diff,\n    diffDescription: context.diffDescription,\n  };\n}\n\n// Expand and Show States\nconst {\n  Context: ShapeExpandedContext,\n  withContext: withShapeExpandedContext,\n} = GenericContextFactory(null);\n\nclass ShapeExpandedStore extends React.Component {\n  state = {\n    collapsedIds: new Set(),\n    showAllLists: new Set(),\n  };\n\n  render() {\n    const context = {\n      collapsedIds: Array.from(this.state.collapsedIds),\n      showAllLists: Array.from(this.state.showAllLists),\n\n      setCollapsedIds: (id, include) => {\n        if (include) {\n          this.state.collapsedIds.add(id);\n        } else {\n          this.state.collapsedIds.delete(id);\n        }\n        this.setState({ collapsedIds: this.state.collapsedIds });\n      },\n      setShowAllLists: (id, include) => {\n        if (include) {\n          this.state.showAllLists.add(id);\n        } else {\n          this.state.showAllLists.delete(id);\n        }\n        this.setState({ showAllLists: this.state.showAllLists });\n      },\n    };\n\n    return (\n      <ShapeExpandedContext.Provider value={context}>\n        {this.props.children}\n      </ShapeExpandedContext.Provider>\n    );\n  }\n}\n\nexport { ShapeExpandedStore, ShapeExpandedContext, withShapeExpandedContext };\n","export const PURPOSE = 'purpose'\nexport const DESCRIPTION = 'description'\nexport const BODY_DESCRIPTION = 'body_description'\n\nexport const pathMethodKeyBuilder = (path, method) => `${path}.${method.toUpperCase()}`\nexport const requestBodyKeyBuilder = (path, method) => `${pathMethodKeyBuilder(path, method)}.requestBody`\nexport const responseKeyBuilder = (path, method) => `${pathMethodKeyBuilder(path, method)}.response`\n","import React from 'react';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nconst styles = theme => ({\n\troot: {\n\t\tbackgroundColor: '#fafafa',\n\t\tdisplay: 'flex',\n\t\tflexDirection: 'column',\n\t\twidth: '100%',\n\t\theight: '100%',\n\t\talignItems: 'center',\n\t},\n\tloaderCenter: {\n\t\twidth: 320,\n\t\theight: 120,\n\t\tmarginTop: 200,\n\t\tdisplay: 'flex',\n\t\tflexDirection: 'row',\n\t\talignItems: 'center',\n\t\tjustifyContent: 'center'\n\t}\n});\n\nclass Loading extends React.Component {\n\trender() {\n\n\t\tconst {classes} = this.props\n\n\t\treturn <div className={classes.root}>\n\n\t\t\t<Paper elevation={2} className={classes.loaderCenter}>\n\t\t\t\t<CircularProgress disableShrink={true} thickness={5} style={{marginRight: 22}} size={25} />\n\t\t\t\t<Typography variant=\"h4\" color=\"primary\">Loading API...</Typography>\n\t\t\t</Paper>\n\n\t\t</div>\n\t}\n}\n\nexport default withStyles(styles)(Loading)\n","import React from 'react';\nimport {GenericContextFactory} from './GenericContextFactory';\nimport uuidv4 from 'uuid/v4';\n\nconst clientSessionId = uuidv4()\nconst clientId = 'anonymous'\n\nconst {\n    Context: CommandContext,\n    withContext: withCommandContext\n} = GenericContextFactory({ clientSessionId, clientId })\n\n\nclass CommandContextStore extends React.Component {\n    render() {\n        const {\n            clientSessionId,\n            clientId\n        } = this.props;\n\n        const context = {\n            clientSessionId,\n            clientId\n        };\n\n        return (\n            <CommandContext.Provider value={context}>\n                {this.props.children}\n            </CommandContext.Provider>\n        )\n    }\n}\n\nexport {\n    CommandContext,\n    withCommandContext,\n    CommandContextStore\n}\n","export function dumpSpecServiceState(specService) {\n  return async function (options) {\n    const {\n      outputFileName,\n      downloadSourcePath,\n      downloadDestinationPath\n    } = options;\n\n    const events = await specService.listEvents();\n    const captures = await specService.listCaptures();\n    const { captureId } = captures.captures[0];\n    const session = await specService.listCapturedSamples(captureId);\n\n    const output = JSON.stringify({\n      events: JSON.parse(events),\n      session,\n      examples: {}\n    }, null, 2);\n\n    const blob = new Blob([output], {type: 'application/json'});\n\n    const url = window.URL.createObjectURL(blob);\n\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = outputFileName;\n    console.log(link);\n    link.click()\n    return `mv \"${downloadSourcePath}/${outputFileName}\" \"${downloadDestinationPath}/${outputFileName}\"`\n  };\n}","import React, {useContext} from 'react';\n\nconst BaseUrlContext = React.createContext(null);\nBaseUrlContext.displayName = 'BaseUrlContext';\n\n// only expose the Provider component, but hide the Consumer in favour of hooks\nexport const { Provider } = BaseUrlContext;\n\n\nexport function useBaseUrl() {\n  const context = useContext(BaseUrlContext);\n  return context.url;\n}\n","export function debugDump(specService, captureId) {\n  return async function () {\n\n    const events = await specService.listEvents();\n    const session = await specService.listCapturedSamples(captureId);\n    const sessionCleaned = JSON.parse(JSON.stringify(session));\n\n    console.log('sanitizing data...');\n    sessionCleaned.samples.forEach((i) => {\n      i.request.body.value.asJsonString = null;\n      i.request.body.value.asText = null;\n\n      i.response.body.value.asJsonString = null;\n      i.response.body.value.asText = null;\n    });\n\n    const output = JSON.stringify(\n      {\n        events: JSON.parse(events),\n        session: sessionCleaned,\n        examples: {},\n      },\n      null,\n      2\n    );\n\n    const blob = new Blob([output], { type: 'application/json' });\n    const url = window.URL.createObjectURL(blob);\n\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `debug-capture-${captureId}-${Math.floor(\n      Date.now() / 1000\n    )}.json`;\n    console.log(link);\n    link.click();\n  };\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React, { useEffect, useState } from 'react';\nimport { useMockData } from '../../contexts/MockDataContext';\nimport { SpecServiceStore } from '../../contexts/SpecServiceContext';\nimport { LinearProgress } from '@material-ui/core';\nimport { LocalRfcStore, RfcStore } from '../../contexts/RfcContext';\nimport { InitialRfcCommandsStore } from '../../contexts/InitialRfcCommandsContext';\nimport EventEmitter from 'events';\n\nexport function ApiSpecServiceLoader(props) {\n  const { diffServiceFactory, captureServiceFactory } = props;\n  const debugData = useMockData();\n\n  const [service, setService] = useState(null);\n  const [events, setEvents] = useState(null);\n  useEffect(() => {\n    if (debugData.available && debugData.loading) return;\n\n    const serviceFactory = () =>\n      createExampleSpecServiceFactory(debugData.data);\n\n    const task = async () => {\n      const { specService } = await serviceFactory();\n      setService(specService);\n      specService.eventEmitter.on('events-updated', async () => {\n        const events = await specService.listEvents();\n        setEvents(events);\n      });\n    };\n    task();\n  }, [debugData.available, debugData.loading]);\n\n  useEffect(() => {\n    if (service) {\n      const task = async () => {\n        const events = await service.listEvents();\n        setEvents(events);\n      };\n      task();\n    }\n  }, [service]);\n\n  if (!events) {\n    return <LinearProgress />;\n  }\n\n  return (\n    <SpecServiceStore\n      specService={service}\n      specServiceEvents={service.eventEmitter}\n      diffServiceFactory={diffServiceFactory}\n      captureServiceFactory={captureServiceFactory}\n    >\n      <InitialRfcCommandsStore\n        initialEventsString={events}\n        rfcId=\"testRfcId\"\n        instance=\"the one in ApiSpecServiceLoader\"\n      >\n        <RfcStore specService={service}>{props.children}</RfcStore>\n      </InitialRfcCommandsStore>\n    </SpecServiceStore>\n  );\n}\n\nexport function LocalCliSpecServiceLoader(props) {\n  const { diffServiceFactory, captureServiceFactory } = props;\n  const [events, setEvents] = useState(null);\n  const { specService } = props;\n  useEffect(() => {\n    const task = async () => {\n      specService.eventEmitter.on('events-updated', async () => {\n        const events = await specService.listEvents();\n        setEvents(events);\n      });\n    };\n    task();\n  });\n\n  useEffect(() => {\n    if (specService) {\n      const task = async () => {\n        const events = await specService.listEvents();\n        setEvents(events);\n      };\n      task();\n    }\n  }, [specService]);\n\n  if (!events) {\n    return <LinearProgress />;\n  }\n\n  return (\n    <SpecServiceStore\n      specService={specService}\n      specServiceEvents={specService.eventEmitter}\n      diffServiceFactory={diffServiceFactory}\n      captureServiceFactory={captureServiceFactory}\n    >\n      <InitialRfcCommandsStore\n        initialEventsString={events}\n        rfcId=\"testRfcId\"\n        instance=\"the one in LocalCliSpecServiceLoader\"\n      >\n        <LocalRfcStore specService={specService}>\n          {props.children}\n        </LocalRfcStore>\n      </InitialRfcCommandsStore>\n    </SpecServiceStore>\n  );\n}\n\nexport const captureId = 'example-session';\nasync function createExampleSpecServiceFactory(data) {\n  let events = JSON.stringify(data.events);\n\n  const examples = data.examples || {};\n  const eventEmitter = new EventEmitter();\n\n  const specService = {\n    eventEmitter,\n    loadConfig: async function () {\n      return Promise.resolve({\n        config: {\n          apiName: 'Example API',\n          ignoreRequests: [],\n        },\n      });\n    },\n    listCapturedSamples: async (captureId) => {\n      return Promise.resolve(data.session);\n    },\n    listEvents() {\n      return Promise.resolve(events);\n    },\n    getCaptureStatus() {\n      return Promise.resolve({\n        status: 'completed',\n      });\n    },\n    listCaptures() {\n      return Promise.resolve({\n        captures: [\n          { captureId, lastUpdate: new Date().toISOString(), hasDiff: true },\n        ],\n      });\n    },\n    saveEvents: (eventStore, rfcId) => {\n      const serializedEvents = eventStore.serializeEvents(rfcId);\n      events = serializedEvents;\n      eventEmitter.emit('events-updated');\n      return Promise.resolve();\n    },\n    listExamples: (requestId) => {\n      return Promise.resolve({ examples: examples[requestId] || [] });\n    },\n    saveExample: (interaction, requestId) => {\n      const requestExamples = examples[requestId] || [];\n      requestExamples.push(interaction);\n      examples[requestId] = requestExamples;\n    },\n\n    getEnabledFeatures() {\n      return {\n        TESTING_DASHBOARD: true,\n      };\n    },\n  };\n\n  return { specService };\n}\n","import React from 'react';\nimport {Typography} from '@material-ui/core';\nimport {ParametersStyles} from './DocConstants';\nimport {MarkdownContribution} from './DocContribution';\nimport {DESCRIPTION} from '../../ContributionKeys';\n\nexport function DocParameter({title, description, typeName, children, paramId, updateContribution = () => {}}) {\n  return (\n    <div>\n      <div style={{paddingTop: 6, paddingBottom: 6, paddingLeft: 2}}>\n        <div>\n          <Typography variant=\"subtitle1\" component=\"span\" style={ParametersStyles}>{title}</Typography>\n          <Typography component=\"span\" style={{marginLeft: 6, fontSize: 12}}>{typeName || 'String'}</Typography>\n        </div>\n        <MarkdownContribution value={description}\n                              label=\"Description\"\n                              onChange={(value) => {\n                                updateContribution(paramId, DESCRIPTION, value)\n                              }}\n        />\n      </div>\n      {/*<DocDivider/>*/}\n    </div>\n  );\n}\n","import React, { useContext } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useRouterPaths } from '../../RouterPaths';\nimport Page, { usePageTitle } from '../Page';\nimport { Link, Route, Switch, useParams } from 'react-router-dom';\nimport { RfcContext } from '../../contexts/RfcContext';\nimport { DiffPreviewer, getOrUndefined, toOption } from '@useoptic/domain';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { Button } from '@material-ui/core';\nimport {\n  EndpointsContext,\n  EndpointsContextStore,\n} from '../../contexts/EndpointContext';\nimport { PathAndMethodLarge, SquareChip } from '../diff/v2/PathAndMethod';\nimport Typography from '@material-ui/core/Typography';\nimport { DocDivider } from './DocConstants';\nimport { DocParameter } from './DocParameter';\nimport { HeadingContribution, MarkdownContribution } from './DocContribution';\nimport { DESCRIPTION, PURPOSE } from '../../ContributionKeys';\nimport groupBy from 'lodash.groupby';\nimport ContentTabs, { RequestTabsContextStore } from './ContentTabs';\nimport { BreadcumbX } from '../diff/v2/DiffNewRegions';\nimport { ShapeExpandedStore } from '../diff/v2/shape_viewers/ShapeRenderContext';\nimport { ShapeOnlyViewer } from '../diff/v2/shape_viewers/ShapeOnlyShapeRows';\nimport { ShapeBox } from '../diff/v2/DiffReviewExpanded';\nimport Paper from '@material-ui/core/Paper';\nimport EmptyState from '../support/EmptyState';\nimport { AddOpticLink, DocumentingYourApi } from '../support/Links';\n\nconst useStyles = makeStyles((theme) => ({\n  maxWidth: {\n    width: '100%',\n    paddingTop: 60,\n    maxWidth: 750,\n    alignSelf: 'center',\n  },\n  paper: {\n    marginTop: 22,\n    marginBottom: 30,\n  },\n  header: {\n    display: 'flex',\n    flexDirection: 'column',\n    // backgroundColor: 'red',\n    alignItems: 'flex-start',\n    paddingTop: 10,\n    flex: 1,\n    paddingBottom: 5,\n  },\n  contributions: {\n    display: 'flex',\n    flexDirection: 'column',\n    paddingRight: 20,\n    width: '60%',\n  },\n  overviewSection: {\n    paddingTop: 15,\n    paddingBottom: 15,\n  },\n  expand: {\n    display: 'flex',\n    justifyContent: 'flex-start',\n    alignItems: 'center',\n    paddingRight: 10,\n    marginTop: 37,\n    backgroundColor: 'rgba(241,241,241,0.69)',\n  },\n  specPreview: {\n    flex: 1,\n    display: 'flex',\n    flexDirection: 'column',\n  },\n}));\n\nexport const DocsPage = ({ match, specService }) => {\n  const routerPaths = useRouterPaths();\n  return (\n    <Page title=\"Documentation\" scrollToTop={true}>\n      <Page.Navbar mini={true} />\n      <Page.Body>\n        <Switch>\n          <Route\n            exact\n            path={routerPaths.docsRoot}\n            component={DocumentationToc}\n          />\n          <Route\n            path={routerPaths.requestDocsRoot}\n            component={EndpointDocumentationWrapper}\n          />\n        </Switch>\n      </Page.Body>\n    </Page>\n  );\n};\n\nexport const DocumentationToc = () => {\n  const classes = useStyles();\n  const { cachedQueryResults } = useContext(RfcContext);\n  const { endpoints } = cachedQueryResults;\n\n  return (\n    <div className={classes.maxWidth}>\n      {endpoints.length === 0 && (\n        <EmptyState\n          title=\"Document your First Endpoint\"\n          content={`\n1. Follow the [Getting Started Tutorial](${AddOpticLink})\n2. Run \\`api start\\` and send the API some traffic\n3. Use [Optic to document your API](${DocumentingYourApi})\n`.trim()}\n        />\n      )}\n      {endpoints.length > 0 && (\n        <>\n          <Typography variant=\"h5\" color=\"primary\">\n            Documentation\n          </Typography>\n          <DocDivider />\n        </>\n      )}\n      <div>\n        {endpoints.map((i) => {\n          return (\n            <EndpointsContextStore method={i.method} pathId={i.pathId}>\n              <EndpointsContext.Consumer>\n                {({\n                  endpointDescriptor,\n                  updateContribution,\n                  getContribution,\n                  endpointId,\n                }) => {\n                  const hasRequestBody = Boolean(\n                    endpointDescriptor.requestBodies.find(\n                      (i) => i.requestBody.httpContentType\n                    )\n                  );\n\n                  return (\n                    <div className={classes.paper}>\n                      <div>\n                        <div className={classes.header}>\n                          <HeadingContribution\n                            value={getContribution(endpointId, PURPOSE)}\n                            label=\"What does this endpoint do?\"\n                            onChange={(value) => {\n                              updateContribution(endpointId, PURPOSE, value);\n                            }}\n                          />\n\n                          <div style={{ flex: 1 }} />\n\n                          <PathAndMethodLarge\n                            path={endpointDescriptor.fullPath}\n                            method={endpointDescriptor.method}\n                          />\n                        </div>\n\n                        <div className={classes.contributions}>\n                          <MarkdownContribution\n                            value={getContribution(endpointId, DESCRIPTION)}\n                            label=\"Detailed Description\"\n                            onChange={(value) => {\n                              updateContribution(\n                                endpointId,\n                                DESCRIPTION,\n                                value\n                              );\n                            }}\n                          />\n                        </div>\n\n                        <div className={classes.specPreview}>\n                          <div style={{ flex: 1 }} />\n\n                          <Paper className={classes.expand} elevation={0}>\n                            <Button\n                              component={Link}\n                              to={`documentation/paths/${endpointDescriptor.pathId}/methods/${endpointDescriptor.method}`}\n                              size=\"medium\"\n                              color=\"primary\"\n                              endIcon={<ExpandMoreIcon />}\n                            >\n                              Full Documentation\n                            </Button>\n                            <div style={{ flex: 1 }} />\n\n                            {hasRequestBody && (\n                              <Typography\n                                variant=\"overline\"\n                                color=\"textSecondary\"\n                                style={{ marginRight: 15 }}\n                              >\n                                Has Request Body\n                              </Typography>\n                            )}\n\n                            <Typography\n                              variant=\"overline\"\n                              color=\"textSecondary\"\n                              style={{ marginRight: 7 }}\n                            >\n                              Responses:{' '}\n                            </Typography>\n                            <div\n                              style={{\n                                marginTop: 3,\n                                display: 'flex',\n                                alignItems: 'center',\n                              }}\n                            >\n                              {endpointDescriptor.responses.map((res) => {\n                                return (\n                                  <SquareChip\n                                    label={res.statusCode}\n                                    bgColor={'#32536a'}\n                                    color=\"white\"\n                                    style={{ marginRight: 12 }}\n                                  />\n                                );\n                              })}\n                            </div>\n                          </Paper>\n                        </div>\n                      </div>\n                    </div>\n                  );\n                }}\n              </EndpointsContext.Consumer>\n            </EndpointsContextStore>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\nexport const EndpointDocumentationWrapper = (props) => {\n  const { pathId, method } = useParams();\n\n  return (\n    <EndpointsContextStore method={method} pathId={pathId}>\n      <EndpointsContext.Consumer>\n        {({ endpointDescriptor }) => (\n          <EndpointDocs endpointDescriptor={endpointDescriptor} />\n        )}\n      </EndpointsContext.Consumer>\n    </EndpointsContextStore>\n  );\n};\n\nexport const EndpointDocs = (props) => {\n  const { endpointDescriptor } = props;\n  const classes = useStyles();\n  const purpose = endpointDescriptor.endpointPurpose;\n  const fingerPrint = `${endpointDescriptor.httpMethod} ${endpointDescriptor.fullPath}`;\n  usePageTitle(`${purpose || fingerPrint} - API Documentation`);\n\n  const { rfcService, rfcId, cachedQueryResults } = useContext(RfcContext);\n  const { shapesResolvers } = cachedQueryResults;\n  const currentRfcState = rfcService.currentState(rfcId);\n  const diffPreviewer = new DiffPreviewer(shapesResolvers, currentRfcState);\n  return (\n    <ShapeExpandedStore>\n      <div className={classes.maxWidth} style={{ paddingTop: 30 }}>\n        <EndpointsContext.Consumer>\n          {({ updateContribution, getContribution, endpointId }) => {\n            const { requestBodies, responses } = endpointDescriptor;\n\n            const responsesGroupedByStatusCode = groupBy(\n              responses,\n              (i) => i.statusCode\n            );\n\n            const allResponses = Object.keys(responsesGroupedByStatusCode)\n              .sort()\n              .map((i) => {\n                return {\n                  statusCode: i,\n                  contentTypes: responsesGroupedByStatusCode[i.toString()]\n                    .map((res) => res.responseBody.httpContentType || 'No Body')\n                    .sort(),\n                };\n              });\n\n            return (\n              <div>\n                <HeadingContribution\n                  value={getContribution(endpointId, PURPOSE)}\n                  label=\"What does this endpoint do?\"\n                  onChange={(value) => {\n                    updateContribution(endpointId, PURPOSE, value);\n                  }}\n                />\n                <MarkdownContribution\n                  value={getContribution(endpointId, DESCRIPTION)}\n                  label=\"Detailed Description\"\n                  onChange={(value) => {\n                    updateContribution(endpointId, DESCRIPTION, value);\n                  }}\n                />\n\n                <DocDivider style={{ marginTop: 10, marginBottom: 10 }} />\n\n                <div className={classes.overviewSection}>\n                  <PathAndMethodLarge\n                    path={endpointDescriptor.fullPath}\n                    method={endpointDescriptor.method}\n                  />\n\n                  <div style={{ marginTop: 7 }}>\n                    {endpointDescriptor.pathParameters.map((i) => (\n                      <DocParameter\n                        title={i.name}\n                        paramId={i.pathId}\n                        updateContribution={updateContribution}\n                        description={i.description}\n                      />\n                    ))}\n                  </div>\n                </div>\n\n                <DocDivider style={{ marginTop: 10, marginBottom: 10 }} />\n\n                <RequestTabsContextStore>\n                  <ContentTabs\n                    inRequest\n                    options={{\n                      contentTypes: requestBodies\n                        .map((i) => i.requestBody.httpContentType)\n                        .filter((i) => !!i),\n                    }}\n                    renderDescription={(contentType) => {\n                      const id = `${endpointId}_request_body`;\n                      return (\n                        <MarkdownContribution\n                          value={getContribution(id, DESCRIPTION)}\n                          label=\"Request Body Description\"\n                          onChange={(value) => {\n                            updateContribution(id, DESCRIPTION, value);\n                          }}\n                        />\n                      );\n                    }}\n                    renderRequest={(contentType) => {\n                      const r = requestBodies.find(\n                        (i) => i.requestBody.httpContentType === contentType\n                      );\n                      const renderedShape =\n                        r &&\n                        getOrUndefined(\n                          diffPreviewer.previewShape(\n                            toOption(r.requestBody.shapeId)\n                          )\n                        );\n\n                      return (\n                        renderedShape && (\n                          <ShapeBox\n                            header={\n                              <BreadcumbX\n                                itemStyles={{ fontSize: 13, color: 'white' }}\n                                location={['Request Body', contentType]}\n                              />\n                            }\n                          >\n                            <ShapeOnlyViewer preview={renderedShape} />\n                          </ShapeBox>\n                        )\n                      );\n                    }}\n                  />\n\n                  <ContentTabs\n                    options={allResponses}\n                    renderDescription={(statusCode, contentType) => {\n                      const id = `${endpointId}_${statusCode}_response`;\n                      return (\n                        <MarkdownContribution\n                          value={getContribution(id, DESCRIPTION)}\n                          label={`${statusCode} Response Description`}\n                          onChange={(value) => {\n                            updateContribution(id, DESCRIPTION, value);\n                          }}\n                        />\n                      );\n                    }}\n                    renderResponse={(statusCode, contentType) => {\n                      const response = responses.find(\n                        (i) =>\n                          i.statusCode == statusCode &&\n                          i.responseBody.httpContentType === contentType\n                      );\n\n                      const renderedShape =\n                        response &&\n                        getOrUndefined(\n                          diffPreviewer.previewShape(\n                            toOption(response.responseBody.shapeId)\n                          )\n                        );\n\n                      return (\n                        renderedShape && (\n                          <ShapeBox\n                            header={\n                              <BreadcumbX\n                                itemStyles={{ fontSize: 13, color: 'white' }}\n                                location={[\n                                  `${statusCode} Response Body`,\n                                  contentType,\n                                ]}\n                              />\n                            }\n                          >\n                            <ShapeOnlyViewer preview={renderedShape} />\n                          </ShapeBox>\n                        )\n                      );\n                      // return <div>{statusCode} {contentType}</div>;\n                    }}\n                  />\n                </RequestTabsContextStore>\n\n                <div style={{ height: '100vh' }} />\n              </div>\n            );\n          }}\n        </EndpointsContext.Consumer>\n      </div>\n    </ShapeExpandedStore>\n  );\n};\n","import React, { Suspense } from 'react';\nimport { Redirect, Switch, Route } from 'react-router-dom';\nimport { useRouterPaths } from './RouterPaths';\nimport { CaptureManagerPage } from './components/diff/v2/CaptureManagerPage';\nimport { DocsPage } from './components/docs/DocsPage';\nimport Loading from './components/navigation/Loading';\n\nconst TestingDashboardLoader = React.lazy(() =>\n  import('./components/loaders/TestingDashboardLoader')\n);\n\nconst TestindDashboardTeaserPage = React.lazy(() =>\n  import('./components/testing/TeaserPage')\n);\n\nexport function ApiRoutes(props) {\n  const routerPaths = useRouterPaths();\n  return (\n    <Suspense fallback={<Loading />}>\n      <Switch>\n        <Route strict path={routerPaths.docsRoot} component={DocsPage} />\n        <Route\n          strict\n          path={routerPaths.diffsRoot}\n          component={CaptureManagerPage}\n        />\n        {process.env.REACT_APP_TESTING_DASHBOARD === 'true' && (\n          <Route\n            strict\n            path={routerPaths.testingDashboard}\n            component={TestingDashboardLoader}\n          />\n        )}\n\n        {process.env.REACT_APP_TESTING_DASHBOARD !== 'true' &&\n          process.env.REACT_APP_TESTING_DASHBOARD_TEASER === 'true' && (\n            <Route\n              strict\n              path={routerPaths.testingDashboard}\n              component={TestindDashboardTeaserPage}\n            />\n          )}\n\n        <Redirect to={props.demo ? routerPaths.diffsRoot : routerPaths.docsRoot} />\n      </Switch>\n    </Suspense>\n  );\n}\n","import {\n  ICaptureService,\n  IDiffService,\n  IGetDescriptionResponse,\n  IListDiffsResponse,\n  IListSuggestionsResponse,\n  IListUnrecognizedUrlsResponse,\n  ILoadInteractionResponse,\n  ILoadStatsResponse,\n  IRfcCommand,\n  IStartDiffResponse,\n} from './index';\nimport { IHttpInteraction } from '@useoptic/domain-types';\nimport { ISpecService } from '@useoptic/cli-client/build/spec-service-client';\nimport { captureId } from '../../components/loaders/ApiLoader';\nimport {\n  DiffResultHelper,\n  JsonHelper,\n  RfcCommandContext,\n  ScalaJSHelpers,\n  UrlCounterHelper,\n} from '@useoptic/domain/build';\nimport uuidv4 from 'uuid/v4';\nimport { getOrUndefined, opticEngine } from '@useoptic/domain';\n\nexport class ExampleCaptureService implements ICaptureService {\n  constructor(private specService: ISpecService) {}\n\n  async startDiff(\n    events: any[],\n    ignoreRequests: string[],\n    additionalCommands: IRfcCommand[],\n    filters: { pathId: string; method: string }[]\n  ): Promise<IStartDiffResponse> {\n    return {\n      diffId: uuidv4(),\n      notificationsUrl: '',\n    };\n  }\n\n  async loadInteraction(\n    interactionPointer: string\n  ): Promise<ILoadInteractionResponse> {\n    const capture = await this.specService.listCapturedSamples(captureId);\n    const interaction = capture.samples.find(\n      (x: IHttpInteraction) => x.uuid === interactionPointer\n    );\n    return {\n      interaction,\n    };\n  }\n}\n\nexport class ExampleDiffService implements IDiffService {\n  constructor(\n    private specService: ISpecService,\n    private captureService: ICaptureService,\n    private diffConfig: IStartDiffResponse,\n    private diffs: any,\n    private rfcState: any\n  ) {}\n\n  diffId(): string {\n    return this.diffConfig.diffId;\n  }\n\n  async listDiffs(): Promise<IListDiffsResponse> {\n    const endpointDiffs = ScalaJSHelpers.toJsArray(\n      DiffResultHelper.endpointDiffs(this.diffs, this.rfcState)\n    );\n\n    return Promise.resolve({ diffs: endpointDiffs });\n  }\n\n  async listUnrecognizedUrls(): Promise<IListUnrecognizedUrlsResponse> {\n    const capture = await this.specService.listCapturedSamples(captureId);\n    const samplesSeq = JsonHelper.jsArrayToSeq(\n      capture.samples.map((x) => JsonHelper.fromInteraction(x))\n    );\n    const undocumentedUrlHelpers = new opticEngine.com.useoptic.diff.helpers.UndocumentedUrlHelpers();\n    const counter = undocumentedUrlHelpers.countUndocumentedUrls(\n      this.rfcState,\n      samplesSeq\n    );\n    const urls = opticEngine.UrlCounterJsonSerializer.toFriendlyJs(counter);\n\n    const result = UrlCounterHelper.fromJsonToSeq(urls, this.rfcState);\n\n    return Promise.resolve(result);\n  }\n\n  async loadStats(): Promise<ILoadStatsResponse> {\n    const capture = await this.specService.listCapturedSamples(captureId);\n\n    return Promise.resolve({\n      diffedInteractionsCounter: capture.samples.length.toString(),\n      skippedInteractionsCounter: '0',\n    });\n  }\n\n  async loadDescription(diff: any): Promise<IGetDescriptionResponse> {\n    const interaction = await this.captureService.loadInteraction(\n      diff.firstInteractionPointer\n    );\n    if (interaction.interaction) {\n      return getOrUndefined(\n        DiffResultHelper.descriptionFromDiff(\n          diff,\n          this.rfcState,\n          JsonHelper.fromInteraction(interaction.interaction)\n        )\n      );\n    } else {\n      return null;\n    }\n  }\n\n  async listSuggestions(\n    diff: any,\n    interaction: any\n  ): Promise<IListSuggestionsResponse> {\n    return ScalaJSHelpers.toJsArray(\n      DiffResultHelper.suggestionsForDiff(diff, interaction, this.rfcState)\n    );\n  }\n\n  async loadInitialPreview(\n    diff: any,\n    currentInteraction: any,\n    inferPolymorphism: boolean\n  ) {\n    const bodyPreview = diff.previewBodyRender(currentInteraction);\n\n    let interactions = [];\n    if (inferPolymorphism) {\n      interactions = await Promise.all(\n        ScalaJSHelpers.toJsArray(diff.interactionPointers).map(async (i) => {\n          const { interaction } = await this.captureService.loadInteraction(i);\n          return JsonHelper.fromInteraction(interaction);\n        })\n      );\n    } else {\n      interactions = [currentInteraction];\n    }\n\n    const shapePreview = diff.previewShapeRender(\n      this.rfcState,\n      JsonHelper.jsArrayToVector(interactions),\n      inferPolymorphism\n    );\n\n    return {\n      bodyPreview,\n      shapePreview: shapePreview.shape,\n      suggestion: shapePreview.suggestion,\n    };\n  }\n}\n","import React from 'react';\nimport { useParams, useRouteMatch, matchPath } from 'react-router-dom';\nimport { ApiSpecServiceLoader } from '../components/loaders/ApiLoader';\nimport {\n  Provider as DebugSessionContextProvider,\n  useMockSession,\n} from '../contexts/MockDataContext';\nimport { ApiRoutes } from '../routes';\nimport { Provider as BaseUrlContext } from '../contexts/BaseUrlContext';\nimport {\n  ExampleCaptureService,\n  ExampleDiffService,\n} from '../services/diff/ExampleDiffService';\nimport { DiffHelpers, JsonHelper, RfcCommandContext } from '@useoptic/domain';\nimport {\n  cachingResolversAndRfcStateFromEventsAndAdditionalCommands,\n  normalizedDiffFromRfcStateAndInteractions,\n} from '@useoptic/domain-utilities';\n\nexport default function TestingSessions(props) {\n  const match = useRouteMatch();\n  const { sessionId } = useParams();\n\n  const session = useMockSession({\n    sessionId: sessionId,\n    exampleSessionCollection: 'example-sessions',\n  });\n\n  const captureServiceFactory = async (specService, captureId) => {\n    return new ExampleCaptureService(specService);\n  };\n\n  const diffServiceFactory = async (\n    specService,\n    captureService,\n    _events,\n    _rfcState,\n    additionalCommands,\n    config,\n    captureId\n  ) => {\n    async function computeInitialDiff() {\n\n      const capture = await specService.listCapturedSamples(captureId);\n      const commandContext = new RfcCommandContext(\n        'simulated',\n        'simulated',\n        'simulated'\n      );\n\n      const {\n        resolvers,\n        rfcState,\n      } = cachingResolversAndRfcStateFromEventsAndAdditionalCommands(\n          _events,\n        commandContext,\n        additionalCommands\n      );\n      let diffs = DiffHelpers.emptyInteractionPointersGroupedByDiff();\n      for (const interaction of capture.samples) {\n          diffs = DiffHelpers.groupInteractionPointerByDiffs(\n          resolvers,\n          rfcState,\n          JsonHelper.fromInteraction(interaction),\n          interaction.uuid,\n          diffs\n        );\n      }\n      return {\n        diffs,\n        rfcState,\n        resolvers,\n      };\n    }\n\n    const { diffs, rfcState } = await computeInitialDiff();\n\n    return new ExampleDiffService(\n      specService,\n      captureService,\n      config,\n      diffs,\n      rfcState\n    );\n  };\n\n  return (\n    <BaseUrlContext value={{ path: match.path, url: match.url }}>\n      <DebugSessionContextProvider value={session}>\n        <ApiSpecServiceLoader\n          captureServiceFactory={captureServiceFactory}\n          diffServiceFactory={diffServiceFactory}\n        >\n          <ApiRoutes />\n        </ApiSpecServiceLoader>\n      </DebugSessionContextProvider>\n    </BaseUrlContext>\n  );\n}\n","import {\n  ICaptureService,\n  IDiffService,\n  IGetDescriptionResponse,\n  IListDiffsResponse,\n  IListSuggestionsResponse,\n  IListUnrecognizedUrlsResponse,\n  ILoadInteractionResponse,\n  ILoadStatsResponse,\n  IRfcCommand,\n  IStartDiffResponse,\n} from './index';\nimport { JsonHttpClient } from '@useoptic/client-utilities';\nimport {\n  DiffResultHelper,\n  getOrUndefined,\n  JsonHelper,\n  opticEngine,\n  ScalaJSHelpers,\n  UrlCounterHelper,\n} from '@useoptic/domain';\n\nexport class LocalCliDiffService implements IDiffService {\n  constructor(\n    private captureService: ICaptureService,\n    private baseUrl: string,\n    private config: IStartDiffResponse,\n    private rfcState: any\n  ) {}\n  diffId(): string {\n    return this.config.diffId;\n  }\n\n  async listDiffs(): Promise<IListDiffsResponse> {\n    const url = `${this.baseUrl}/diffs`;\n    const diffsJson = await JsonHttpClient.getJson(url);\n    const diffs = opticEngine.DiffWithPointersJsonDeserializer.fromJs(\n      diffsJson\n    );\n    return {\n      diffs: ScalaJSHelpers.toJsArray(\n        DiffResultHelper.endpointDiffs(diffs, this.rfcState)\n      ),\n    };\n  }\n\n  async listUnrecognizedUrls(): Promise<IListUnrecognizedUrlsResponse> {\n    const url = `${this.baseUrl}/undocumented-urls`;\n    const json = (await JsonHttpClient.getJson(url)).urls;\n    const result = UrlCounterHelper.fromJsonToSeq(json, this.rfcState);\n    return result;\n  }\n\n  async loadStats(): Promise<ILoadStatsResponse> {\n    const url = `${this.baseUrl}/stats`;\n    return JsonHttpClient.getJson(url);\n  }\n\n  async loadDescription(diff: any): Promise<IGetDescriptionResponse> {\n    const interaction = await this.captureService.loadInteraction(\n      diff.firstInteractionPointer\n    );\n    if (interaction.interaction) {\n      return getOrUndefined(\n        DiffResultHelper.descriptionFromDiff(\n          diff,\n          this.rfcState,\n          JsonHelper.fromInteraction(interaction.interaction)\n        )\n      );\n    } else {\n      return null;\n    }\n  }\n\n  async listSuggestions(\n    diff: any,\n    interaction: any\n  ): Promise<IListSuggestionsResponse> {\n    return ScalaJSHelpers.toJsArray(\n      DiffResultHelper.suggestionsForDiff(diff, interaction, this.rfcState)\n    );\n  }\n\n  async loadInitialPreview(\n    diff: any,\n    currentInteraction: any,\n    inferPolymorphism: boolean\n  ) {\n    const bodyPreview = diff.previewBodyRender(currentInteraction);\n    //@todo check what this does for 'No Body' Nothing to infer. seems wasteful to load...\n    let interactions = [];\n    if (inferPolymorphism) {\n      interactions = await Promise.all(\n        ScalaJSHelpers.toJsArray(diff.randomPointers).map(async (i) => {\n          const { interaction } = await this.captureService.loadInteraction(i);\n          return JsonHelper.fromInteraction(interaction);\n        })\n      );\n    } else {\n      interactions = [currentInteraction];\n    }\n\n    const shapePreview = diff.previewShapeRender(\n      this.rfcState,\n      JsonHelper.jsArrayToVector(interactions),\n      inferPolymorphism\n    );\n\n    return {\n      bodyPreview,\n      shapePreview: shapePreview.shape,\n      suggestion: shapePreview.suggestion,\n    };\n  }\n}\n\nexport class LocalCliCaptureService implements ICaptureService {\n  constructor(private baseUrl: string) {}\n\n  async startDiff(\n    events: any[],\n    ignoreRequests: string[],\n    additionalCommands: IRfcCommand[],\n    filters: { pathId: string; method: string }[]\n  ): Promise<IStartDiffResponse> {\n    const url = `${this.baseUrl}/diffs`;\n    return JsonHttpClient.postJson(url, {\n      ignoreRequests,\n      additionalCommands,\n      events,\n      filters,\n    });\n  }\n\n  loadInteraction(\n    interactionPointer: string\n  ): Promise<ILoadInteractionResponse> {\n    const url = `${this.baseUrl}/interactions/${interactionPointer}`;\n    return JsonHttpClient.getJson(url);\n  }\n}\n","import React from 'react';\nimport { useParams, useRouteMatch } from 'react-router-dom';\nimport { LocalCliSpecServiceLoader } from '../components/loaders/ApiLoader';\nimport { ApiRoutes } from '../routes';\nimport EventEmitter from 'events';\nimport { Provider as BaseUrlContext } from '../contexts/BaseUrlContext';\nimport { SpecServiceClient } from '@useoptic/cli-client';\nimport {\n  LocalCliCaptureService,\n  LocalCliDiffService,\n} from '../services/diff/LocalCliDiffService';\n\nexport default function LocalCli(props) {\n  const match = useRouteMatch();\n  const { apiId } = useParams();\n\n  const eventEmitter = new EventEmitter();\n  const specService = new SpecServiceClient(apiId, eventEmitter);\n\n  const captureServiceFactory = async function (specService, captureId) {\n    const baseUrl = `/api/specs/${apiId}/captures/${captureId}`;\n    return new LocalCliCaptureService(baseUrl);\n  };\n  const diffServiceFactory = async function (\n    specService,\n    captureService,\n    events,\n    rfcState,\n    additionalCommands,\n    config,\n    captureId\n  ) {\n    const baseUrl = `/api/specs/${apiId}/captures/${captureId}/diffs/${config.diffId}`;\n    return new LocalCliDiffService(captureService, baseUrl, config, rfcState);\n  };\n\n  return (\n    <BaseUrlContext value={{ path: match.path, url: match.url }}>\n      <LocalCliSpecServiceLoader\n        specService={specService}\n        diffServiceFactory={diffServiceFactory}\n        captureServiceFactory={captureServiceFactory}\n      >\n        <ApiRoutes />\n      </LocalCliSpecServiceLoader>\n    </BaseUrlContext>\n  );\n}\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport EmptyState from './EmptyState';\nimport { AddOpticLink, DocumentingYourApi, OpticDocs } from './Links';\n\nconst useStyles = makeStyles((theme) => ({\n  body: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    height: '100vh',\n  },\n}));\n\nexport default function WelcomePage(props) {\n  const classes = useStyles();\n  const { title, content } = props;\n\n  return (\n    <div className={classes.body}>\n      <div style={{ marginTop: -150 }}>\n        <EmptyState\n          title={'Optic is Monitoring your APIs'}\n          content={`\n**Getting Started**\n- [Add Optic to your API Project](${AddOpticLink})\n- [Document your API with Optic](${DocumentingYourApi})\n- [Explore all the Optic Documentation](${OpticDocs})\n`.trim()}\n        />\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport { useParams, useRouteMatch, matchPath } from 'react-router-dom';\nimport { ApiSpecServiceLoader } from '../components/loaders/ApiLoader';\nimport {\n  Provider as DebugSessionContextProvider,\n  useMockSession,\n} from '../contexts/MockDataContext';\nimport { ApiRoutes } from '../routes';\nimport { Provider as BaseUrlContext } from '../contexts/BaseUrlContext';\n\nexport default function PrivateSessions(props) {\n  const match = useRouteMatch();\n  const { sessionId } = useParams();\n\n  const session = useMockSession({\n    sessionId: sessionId,\n    exampleSessionCollection: 'private-sessions',\n  });\n\n  return (\n    <BaseUrlContext value={{ path: match.path, url: match.url }}>\n      <DebugSessionContextProvider value={session}>\n        <ApiSpecServiceLoader>\n          <ApiRoutes />\n        </ApiSpecServiceLoader>\n      </DebugSessionContextProvider>\n    </BaseUrlContext>\n  );\n}\n","import React from 'react';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Button from '@material-ui/core/Button';\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext';\nimport { track } from './../Analytics';\n\nexport const DemoModal = (props) => {\n  const [open, setOpen] = React.useState(true);\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  console.log('wowza!')\n  return (\n    <div>\n        <Dialog\n          open={open}\n          onClose={handleClose}\n          fullWidth\n          maxWidth=\"md\"\n          aria-labelledby=\"form-dialog-title\"\n        >\n          <form>\n            <DialogTitle>Enjoying Optic?</DialogTitle>\n            <DialogContent style={{ marginTop: -20 }}>\n              <DialogContentText style={{ marginTop: 12 }}>\n                Start integrating Optic into your own projects\n              </DialogContentText>\n            </DialogContent>\n            <DialogActions>\n              <Button onClick={handleClose}>I just want to use this amazing demo</Button>\n              <Button\n                autoFocus={false}\n                type=\"submit\"\n                onClick={() => {window.open(\"https://auth.useoptic.com/login\")}}\n                color=\"secondary\"\n                endIcon={<NavigateNextIcon />}\n              >\n                Lets Go\n              </Button>\n            </DialogActions>\n          </form>\n        </Dialog>\n    </div>\n  )\n};","import React, { useEffect, useState } from 'react';\nimport { useParams, useRouteMatch, useHistory } from 'react-router-dom';\nimport { ApiSpecServiceLoader } from '../components/loaders/ApiLoader';\nimport { DemoModal } from '../components/DemoModal';\nimport {\n  Provider as DebugSessionContextProvider,\n  useMockSession,\n} from '../contexts/MockDataContext';\nimport { ApiRoutes } from '../routes';\nimport { Provider as BaseUrlContext } from '../contexts/BaseUrlContext';\nimport {\n  ExampleCaptureService,\n  ExampleDiffService,\n} from '../services/diff/ExampleDiffService';\nimport { DiffHelpers, JsonHelper, RfcCommandContext } from '@useoptic/domain';\nimport { useSnackbar } from 'notistack';\nimport {\n  cachingResolversAndRfcStateFromEventsAndAdditionalCommands,\n} from '@useoptic/domain-utilities';\nimport { Button } from '@material-ui/core';\nimport { trackEmitter } from \"../Analytics\"\n\nexport default function DemoSessions(props) {\n  const match = useRouteMatch();\n  const { sessionId } = useParams();\n  const [showModal, setShowDemoModal] = useState(false);\n  const [actionsCompleted, setActions] = useState(0);\n  const history = useHistory();\n\n  const session = useMockSession({\n    sessionId: sessionId,\n    exampleSessionCollection: 'demos',\n  });\n\n  const captureServiceFactory = async (specService, captureId) => {\n    return new ExampleCaptureService(specService);\n  };\n\n  const diffServiceFactory = async (\n    specService,\n    captureService,\n    _events,\n    _rfcState,\n    additionalCommands,\n    config,\n    captureId\n  ) => {\n    async function computeInitialDiff() {\n      const capture = await specService.listCapturedSamples(captureId);\n      const commandContext = new RfcCommandContext(\n        'simulated',\n        'simulated',\n        'simulated'\n      );\n\n      const {\n        resolvers,\n        rfcState,\n      } = cachingResolversAndRfcStateFromEventsAndAdditionalCommands(\n          _events,\n        commandContext,\n        additionalCommands\n      );\n      let diffs = DiffHelpers.emptyInteractionPointersGroupedByDiff();\n      for (const interaction of capture.samples) {\n          diffs = DiffHelpers.groupInteractionPointerByDiffs(\n          resolvers,\n          rfcState,\n          JsonHelper.fromInteraction(interaction),\n          interaction.uuid,\n          diffs\n        );\n      }\n      return {\n        diffs,\n        rfcState,\n        resolvers,\n      };\n    }\n\n    const { diffs, rfcState } = await computeInitialDiff();\n\n    return new ExampleDiffService(\n      specService,\n      captureService,\n      config,\n      diffs,\n      rfcState\n    );\n  };\n\n  // show demo modal after 3 Minutes\n  setInterval(() => {\n    setShowDemoModal(true);\n  }, 180000)\n\n  // info boxes / guides for the demo\n  const { enqueueSnackbar } = useSnackbar();\n  const [message, setMessage] = useState(\"nothing\")\n  const [action, setAction] = useState(null)\n  const [hasCommited, setHasCommited] = useState(false) \n\n  // path specific info boxes\n  useEffect(() => {\n    /*if (props.location.pathname.includes(\"diffs/example-session/paths\")) {\n      setAction(null)\n      setMessage(\"Here, we can see the different requests that this route has experienced, and we can document it\")\n    } else */if (props.location.pathname.includes(\"documentation/paths\")) {\n      setAction(null)\n      setMessage(\"Descriptions can be added to the endpoint, to the request and responses, and to individual fields. Note the field types (collectively, the traffic shape) is already documented.\")\n    } else if (props.location.pathname.includes(\"documentation\")) {\n      setAction(null)\n      setMessage(`Details can be added to existing documentation. Click the \"Full Documentation\" drop-down on an endpoint above.`)\n    } else if (props.location.pathname.includes(\"testing/captures\") && props.location.pathname.includes(\"endpoints\")) {\n      setAction(null)\n      setMessage(\"We can see that there is an undocumented field\")\n    } else if (props.location.pathname.includes(\"testing/captures\")) {\n      setAction(null)\n      setMessage(\"Choose an endpoint to see if it's fufilling its contract\")\n    } \n  }, [props.location.pathname])\n\n  // event specific info boxes\n  trackEmitter.on('event', (event, eventProps) => {\n    console.log(event)\n    switch (event) {\n      case \"Show Initial Documentation Page\" : {\n        setAction(null)\n        setMessage(`Optic will show you the requests and responses to this endpoint, and the automatically documented traffic shape. Click \"Document Bodies\" to commit the new documentation to the specification, accepting the changes and making fields optional.`)\n        break\n      }\n      case \"Closed AddUrlModal\" :\n      case \"Changed to UNDOCUMENTED_URL\": {\n        if (!hasCommited && props.location.pathname.includes(\"diffs\")) { // we don't need to keep telling them things they already did\n        const undocumentedUrlCount = eventProps.undocumentedUrlCount || 1\n\n        if (undocumentedUrlCount > 0) {\n            setAction(null)\n            setMessage(\"The Undocumented URLs page shows all traffic Optic observed to undocumented routes. Click a route to begin.\")\n          } else {\n            setAction({\n              onClick: () => {\n                setAction(null)\n                history.push(\"/demos/todo/documentation\")\n              },\n              title: \"See Documentation\"\n            })\n            setMessage(`All Undocumented URLs have been added to the specification`)\n          }\n        }\n        break\n      }\n      case \"Navigating to Review Diff\":\n      case \"Changed to ENDPOINT_DIFF\": {\n        if (!hasCommited && props.location.pathname.includes(\"diffs\")) { // we don't need to keep telling them things they already did\n          setAction(null)\n          const diffAmount = eventProps.diffCount\n\n          if (diffAmount > 0) {\n            setMessage(`Optic will show you all of the documented endpoints, and if any traffic shows undocumented behavior. Click \"Creates a new TODO Item\" to investigate.`)\n          } else {\n            setMessage(`Because we've documented all changes in our API's behavior, we can see that the requests are following the expected behavior, and that there are no diffs`)\n          }\n        }\n        break\n      }\n      case \"On Undocumented Url\" :\n      case \"Clicked Undocumented Url\" : {\n        setAction(null)\n        setMessage(\"If an API path has parameters, they can be documented for consumers. Click the last component of the path, which is an example of a `todo_id`, and click Next.\")\n        // setMessage(`Since our route is using a path parameter, we can tell Optic to recognize the pattern. Click on ${eventProps.path.split(\"/\").pop()} and change it to say \"todo_id\"`)\n        break\n      }\n      case \"Naming Endpoint\" : {\n        const exampleEndpointName = eventProps.method === \"GET\" ? \"Get specific TODO Item\" : \"Update Specific TODO Item\"\n        setAction(null)\n        setMessage(`Now, let's give it a name. For example, we can call this endpoint \"${exampleEndpointName}\"`)\n        break\n      }\n      case \"Rendered Finalize Card\": {\n        setAction(null)\n        setMessage(\"Optic tracks changes in API behavior, somewhat like Git tracks changes in code. Now that we've documented changes in the API behavior, those changes are committed to the API specification.\")\n        break\n      }\n      case \"Committed Changes to Endpoint\": {\n        setHasCommited(true)\n        setAction({\n          onClick: () => {\n            setAction(null)\n            history.push(\"/demos/todo/documentation\")\n          },\n          title: \"See Documentation\"\n        })\n        setMessage(`Awesome! Now that you've committed changes, let's take a look at the documentation!`)\n        break\n      }\n      case \"Viewing Endpoint Diff\" : {\n        setAction(null)\n        setMessage(`Optic detected a change from the previously documented behavior. We can update the documentation and commit that change in behavior to the specification. Let's add priority as a field. Then, make it optional.`)\n        break\n      }\n      default: {\n        break\n      }\n    }\n  })\n\n  useEffect(() => {\n    if (message !== \"nothing\" /*&& info*/) {\n      if (action) {\n        const button = () => <Button onClick={action.onClick}>{action.title}</Button>\n        enqueueSnackbar(message, { variant: \"info\", preventDuplicate: true, autoHideDuration: null, anchorOrigin: {\n          horizontal: \"center\",\n          vertical: \"bottom\",\n        }, action: button});\n      } else {\n        enqueueSnackbar(message, { variant: \"info\", preventDuplicate: true, autoHideDuration: null, anchorOrigin: {\n          horizontal: \"center\",\n          vertical: \"bottom\",\n        }});\n      }\n    }\n  }, [message, action, enqueueSnackbar])\n\n\n  return (\n    <>\n      <BaseUrlContext value={{ path: match.path, url: match.url }}>\n        <DebugSessionContextProvider value={session}>\n          <ApiSpecServiceLoader\n            captureServiceFactory={captureServiceFactory}\n            diffServiceFactory={diffServiceFactory}\n          >\n            <ApiRoutes demo={true} />\n            { (actionsCompleted >= 2 || showModal) && <DemoModal onCancel={() => {setActions(0); setShowDemoModal(false);}} />}\n          </ApiSpecServiceLoader>\n        </DebugSessionContextProvider>\n      </BaseUrlContext>\n    </>\n  );\n}\n","import React from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport TestingSessions from './testing-sessions';\nimport LocalCli from './localcli';\nimport WelcomePage from '../components/support/WelcomePage';\nimport PrivateSessions from './private-sessions';\nimport DemoSessions from './demo-sessions';\n\nexport default function TopLevelRoutes() {\n  return (\n    <Switch>\n      <Route\n        strict\n        path=\"/development/private-sessions/:sessionId\"\n        component={PrivateSessions}\n      />\n      <Route\n        strict\n        path=\"/development/:sessionId\"\n        component={TestingSessions}\n      />\n      <Route\n        strict\n        path=\"/demos/:sessionId\"\n        component={DemoSessions}\n      />\n      <Route strict path=\"/apis/:apiId\" component={LocalCli} />\n      <Route strict path={'/'} component={WelcomePage} />\n    </Switch>\n  );\n}\n","import React, { useCallback, useEffect } from 'react';\nimport './App.css';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { appTheme } from './theme';\nimport { BrowserRouter, Route, useLocation } from 'react-router-dom';\nimport { SnackbarProvider } from 'notistack';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport TopLevelRoutes from './entrypoints';\nimport { touchAnalytics, track } from './Analytics';\nimport * as SupportLinks from './components/support/Links';\n\nclass App extends React.Component {\n  state = { hasError: false };\n\n  render() {\n    const { hasError, error } = this.state;\n\n    if (hasError) return <AppError error={error} />;\n\n    return (\n      <React.Fragment>\n        <CssBaseline />\n        <ThemeProvider theme={appTheme}>\n          <SnackbarProvider maxSnack={1}>\n            <BrowserRouter>\n              <>\n                <Route path=\"/\" component={TopLevelRoutes} />\n              </>\n            </BrowserRouter>\n          </SnackbarProvider>\n        </ThemeProvider>\n      </React.Fragment>\n    );\n  }\n  // Life cycle methods\n  // ------------------\n  static getDerivedStateFromError(error) {\n    // Update state so the next render will show the fallback UI.\n    return { hasError: true, error: error };\n  }\n\n  componentDidMount() {\n    touchAnalytics();\n  }\n}\n\nfunction AppError(props) {\n  const onClickRefresh = useCallback((e) => {\n    e.preventDefault();\n    window && window.location && window.location.reload(true);\n  });\n\n  useEffect(() => {\n    track('In-App-Error', {\n      message: props.error.message,\n      stack: props.error.stack,\n    });\n  });\n\n  // we have to be as conservative as possible here and only use styles from App.css, as we're not sure what subsystems this error has touched\n  return (\n    <div className=\"app-error-container\">\n      <div className=\"app-error\">\n        <h1>There was a problem in displaying the Optic app.</h1>\n\n        <h4>\n          Something that we didn't anticipate happened, and we can't recover\n          from it automatically.\n        </h4>\n\n        <h5>\n          Please feel free to{' '}\n          <a href={SupportLinks.Contact('Optic App crash report')}>\n            contact us about it.\n          </a>\n        </h5>\n\n        <p>Meanwhile, you could try the following:</p>\n\n        <ul>\n          <li>\n            Create a debug file and{' '}\n            <a href={SupportLinks.Contact('Optic App crash report')}>\n              {' '}\n              email it to our team\n            </a>{' '}\n            or <a href={SupportLinks.GithubIssues}> open a GitHub issue</a>\n            {': '}\n            <ul>\n              <li>Open Developer Tools</li>\n              <li>\n                Type <code>debugOptic()</code> in the console\n              </li>\n            </ul>\n          </li>\n          <li>\n            <a href=\"#\" onClick={onClickRefresh}>\n              Refresh the page\n            </a>{' '}\n            in your browser.\n          </li>\n          <li>\n            Try <a href=\"https://browsehappy.com/\">a different browser</a>, if\n            you can.\n          </li>\n        </ul>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport ButtonBase from '@material-ui/core/ButtonBase';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\nimport { createStyles, makeStyles } from '@material-ui/styles';\n\nexport function urlStringToPathComponents(url) {\n  const components = url.split('/').map((name, index) => {\n    const isParameter = name.charAt(0) === ':' || name.charAt(0) === '{';\n    return { index, name, originalName: name, isParameter };\n  });\n  const [root, ...rest] = components;\n  if (root.name === '') {\n    return rest;\n  }\n  return components;\n}\n\nconst useStyles = makeStyles((theme) =>\n  createStyles({\n    thin: {\n      fontWeight: 100,\n    },\n    component: {\n      '&:hover': {\n        color: '#cb5a77',\n      },\n      '&:focus': {\n        color: '#cb5a77',\n      },\n    },\n    thick: {\n      fontWeight: 600,\n    },\n  })\n);\n\nfunction PathComponentItem(props) {\n  const classes = useStyles();\n  const { item, updateItem } = props;\n  if (item.isParameter) {\n    return (\n      <ButtonBase\n        className={classes.component}\n        onClick={() =>\n          updateItem({ ...item, name: item.originalName, isParameter: false })\n        }\n      >\n        <Typography className={classes.thick}>{`{${item.name}}`}</Typography>\n      </ButtonBase>\n    );\n  }\n  return (\n    <ButtonBase\n      className={classes.component}\n      onClick={() => updateItem({ ...item, isParameter: true })}\n    >\n      <Typography className={classes.thin}>{item.name}</Typography>\n    </ButtonBase>\n  );\n}\n\nfunction UrlToPath(props) {\n  const { url, onAccept } = props;\n  const [pathComponents, setPathComponentsInternal] = useState(\n    urlStringToPathComponents(url)\n  );\n  const [lastInteractedIndex, setLastInteractedIndex] = useState(null);\n\n  function setPathComponents(pathComponents) {\n    setPathComponentsInternal(pathComponents);\n    onAccept(pathComponents);\n  }\n\n  useEffect(() => {\n    onAccept(pathComponents);\n  }, []);\n\n  function setItemAt(index) {\n    return function (newItem) {\n      setLastInteractedIndex(index);\n      setPathComponents(\n        pathComponents.map((item) => {\n          if (item.index === index) {\n            return newItem;\n          }\n          return item;\n        })\n      );\n    };\n  }\n\n  const parameters = pathComponents.filter((x) => x.isParameter);\n  return (\n    <div>\n      <div style={{ marginBottom: 6 }}>\n        <Typography variant=\"caption\">\n          Click any path component to make it a parameter:\n        </Typography>\n      </div>\n      <div style={{ display: 'flex', alignItems: 'center' }}>\n        {pathComponents.flatMap((item) => [\n          <ButtonBase key={`${item.index}-1`} disabled>\n            <Typography\n              style={{ marginRight: 2, marginLeft: 2, fontWeight: 200 }}\n            >\n              /\n            </Typography>\n          </ButtonBase>,\n          <PathComponentItem\n            key={`${item.index}-2`}\n            item={item}\n            updateItem={setItemAt(item.index)}\n          />,\n        ])}\n      </div>\n      {parameters.length > 0 ? (\n        <div>\n          <br />\n          <div>\n            <Typography variant=\"overline\">Parameter Names:</Typography>\n          </div>\n          {parameters.map((item) => {\n            const updater = setItemAt(item.index);\n            return (\n              <div style={{ marginBottom: 11 }}>\n                <TextField\n                  key={item.index}\n                  autoFocus={item.index === lastInteractedIndex}\n                  fullWidth\n                  value={item.name}\n                  label={`\"${item.originalName}\" is an example of a...`}\n                  onChange={(e) =>\n                    updater({ ...item, name: e.target.value.trim() })\n                  }\n                >\n                  {item.name}\n                </TextField>\n              </div>\n            );\n          })}\n        </div>\n      ) : null}\n    </div>\n  );\n}\n\nUrlToPath.propTypes = {\n  url: PropTypes.string.isRequired,\n  onAccept: PropTypes.func.isRequired,\n};\n\nexport default UrlToPath;\n","import React from 'react';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport UrlToPath from \"./UrlToPath\";\nimport {pathComponentsToString} from './v2/AddUrlModal';\n\nconst styles = theme => ({\n  pathWrapper: {\n    padding: 7,\n    fontWeight: 400,\n    backgroundColor: '#f6f6f6'\n  }\n});\n\nclass PathMatcher extends React.Component {\n\n  handlePathComponentsChange = (pathComponents) => {\n    const pathExpression = pathComponentsToString(pathComponents);\n    this.props.onChange({\n      pathExpression\n    });\n  };\n\n  render() {\n    const {classes, url} = this.props;\n\n    return (\n      <div>\n        <div className={classes.pathWrapper}>\n          <UrlToPath url={url} onAccept={(pathComponents) => {\n            this.handlePathComponentsChange(pathComponents)\n          }}/>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles)(PathMatcher);\n","import React, { useContext, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport pathToRegexp from 'path-to-regexp';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Button from '@material-ui/core/Button';\nimport PathMatcher from '../PathMatcher';\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext';\nimport Typography from '@material-ui/core/Typography';\nimport { Show } from '../../shared/Show';\nimport { DocSubGroup } from '../../docs/DocSubGroup';\nimport { resolvePath } from '../../utilities/PathUtilities';\nimport {\n  getOrUndefined,\n  RequestsCommands,\n  RequestsHelper,\n  RfcCommands,\n  OpticIds,\n} from '@useoptic/domain';\nimport { RfcContext, withRfcContext } from '../../../contexts/RfcContext';\nimport { pathMethodKeyBuilder, PURPOSE } from '../../../ContributionKeys';\nimport { PathAndMethod } from './PathAndMethod';\nimport { useHistory } from 'react-router-dom';\nimport { useBaseUrl } from '../../../contexts/BaseUrlContext';\nimport { track } from '../../../Analytics';\nimport { CaptureContext } from '../../../contexts/CaptureContext';\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    display: 'flex',\n    flexDirection: 'column',\n    height: '100vh',\n  },\n  urls: {\n    maxHeight: 500,\n    overflow: 'scroll',\n  },\n}));\n\nwindow.OpticIds = OpticIds;\n\nexport const NewUrlModal = withRfcContext((props) => {\n  const {\n    children,\n    newUrl,\n    urlOverride,\n    onClose,\n    allUnmatchedPaths,\n    onAdd,\n  } = props;\n\n  const classes = useStyles();\n  const { cachedQueryResults, handleCommands } = useContext(RfcContext);\n  const { captureId } = useContext(CaptureContext);\n  const knownPathId = getOrUndefined(newUrl.pathId);\n  const [naming, setNaming] = React.useState(Boolean(knownPathId));\n  const [pathExpression, setPathExpression] = React.useState(newUrl.path);\n\n  const handleClickOpen = () => {\n    track('Clicked Undocumented Url', {\n      captureId: captureId,\n      method: newUrl.method,\n      path: newUrl.path,\n      knownPathId,\n    });\n  };\n\n  useEffect(() => {\n    if (naming) {\n      track(\"Naming Endpoint (uE)\", { path: newUrl.path, method: newUrl.method });\n    } else {\n      track(\"On Undocumented Url\", { path: newUrl.path, method: newUrl.method });\n    }\n  })\n\n  const handleClose = () => {\n    track(\"Closed AddUrlModal\")\n    setPathExpression(newUrl.path);\n    onClose();\n  };\n\n  const handleChange = ({ pathExpression }) => {\n    setPathExpression(pathExpression);\n  };\n\n  const handleCreate = (purpose) => {\n    track('Documented New URL', {\n      purpose,\n      captureId,\n      method: newUrl.method,\n      pathExpression,\n    });\n\n    let lastParentPathId = knownPathId;\n    const commands = [];\n    //create path if missing\n    if (!lastParentPathId) {\n      const { pathsById } = cachedQueryResults;\n      const pathComponents = pathStringToPathComponents(pathExpression);\n      const { toAdd, lastMatch } = resolvePath(pathComponents, pathsById);\n      lastParentPathId = lastMatch.pathId;\n      toAdd.forEach((addition) => {\n        const pathId = OpticIds.newPathId();\n        const command = (addition.isParameter\n          ? RequestsCommands.AddPathParameter\n          : RequestsCommands.AddPathComponent)(\n          pathId,\n          lastParentPathId,\n          cleanupPathComponentName(addition.name)\n        );\n        commands.push(command);\n        lastParentPathId = pathId;\n      });\n    }\n\n    //name it\n    commands.push(\n      RfcCommands.AddContribution(\n        pathMethodKeyBuilder(lastParentPathId, newUrl.method),\n        PURPOSE,\n        purpose\n      )\n    );\n\n    //apply commands\n    handleCommands(...commands);\n\n    onAdd({\n      pathId: lastParentPathId,\n      method: newUrl.method,\n    });\n    onClose();\n  };\n\n  const regex = completePathMatcherRegex(\n    pathStringToPathComponents(pathExpression)\n  );\n  const matches = regex.exec(newUrl.path) !== null;\n  const matchingUrls = Array.from(\n    allUnmatchedPaths.filter((url) => regex.exec(url) && url !== newUrl.path)\n  );\n\n  function NamingDialog() {\n    const [purpose, setPurpose] = React.useState('');\n    track(\"Naming Endpoint\", { path: newUrl.path, method: newUrl.method });\n    return (\n      <Dialog\n        open={true}\n        onClose={handleClose}\n        fullWidth\n        maxWidth=\"md\"\n        transitionDuration={0}\n        key={'dialog' + newUrl.toString()}\n      >\n        <form>\n          <DialogTitle>Add New Endpoint</DialogTitle>\n          <DialogContent style={{ marginTop: -20 }}>\n            <PathAndMethod\n              method={newUrl.method}\n              path={urlOverride || pathExpression}\n            />\n            <DialogContentText style={{ marginTop: 12 }}>\n              What does this endpoint do?\n            </DialogContentText>\n            <TextField\n              value={purpose}\n              onChange={(e) => setPurpose(e.target.value)}\n              autoFocus\n              onKeyPress={(e) => {\n                if (e.key === 'Enter') {\n                  handleCreate(purpose);\n                }\n              }}\n              fullWidth\n            />\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={() => setNaming(false)}>Back</Button>\n            <Button\n              type=\"submit\"\n              onClick={() => handleCreate(purpose)}\n              color=\"secondary\"\n              disabled={!matches && !knownPathId && purpose !== ''}\n              endIcon={<NavigateNextIcon />}\n            >\n              Finish\n            </Button>\n          </DialogActions>\n        </form>\n      </Dialog>\n    );\n  }\n\n  return (\n    <div key={newUrl.toString()}>\n      {/*@TODO: investigate this as the cause of broken tabbing */}\n      <div onClick={handleClickOpen}>{children}</div>\n      {naming ? (\n        <NamingDialog key={'naming one' + newUrl.toString()} />\n      ) : (\n        <Dialog\n          open={true}\n          onClose={handleClose}\n          key={'path to' + newUrl.toString()}\n          fullWidth\n          maxWidth=\"md\"\n          aria-labelledby=\"form-dialog-title\"\n        >\n          <form>\n            <DialogTitle>Add New Endpoint</DialogTitle>\n            <DialogContent style={{ marginTop: -20 }}>\n              <PathAndMethod method={newUrl.method} path={newUrl.path} />\n              <DialogContentText style={{ marginTop: 12 }}>\n                Specify the pattern that matches this URL:\n              </DialogContentText>\n\n              <div style={{ display: 'flex', flexDirection: 'row' }}>\n                <div style={{ flex: 1.5 }}>\n                  <PathMatcher\n                    initialPathString={newUrl.path}\n                    url={newUrl.path}\n                    onChange={handleChange}\n                  />\n                </div>\n              </div>\n\n              <div className={classes.urls}>\n                <Show when={matchingUrls.length}>\n                  <DocSubGroup\n                    title=\"Other matching URLs:\"\n                    innerStyle={{ paddingLeft: 5 }}\n                  >\n                    {matchingUrls.map((i) => {\n                      return (\n                        <Typography\n                          variant=\"subtitle1\"\n                          style={{ fontSize: 12, marginBottom: 11 }}\n                        >\n                          {i}\n                        </Typography>\n                      );\n                    })}\n                  </DocSubGroup>\n                </Show>\n              </div>\n            </DialogContent>\n            <DialogActions>\n              <Button onClick={handleClose}>Cancel</Button>\n              <Button\n                autoFocus={true}\n                type=\"submit\"\n                onClick={() => setNaming(true)}\n                color=\"secondary\"\n                disabled={!matches}\n                endIcon={<NavigateNextIcon />}\n              >\n                Next\n              </Button>\n            </DialogActions>\n          </form>\n        </Dialog>\n      )}\n    </div>\n  );\n});\n\nfunction completePathMatcherRegex(pathComponents) {\n  const pathString = pathComponentsToString(pathComponents);\n  const regex = pathToRegexp(pathString, [], { start: true, end: true });\n  return regex;\n}\n\nfunction pathReducer(acc, item) {\n  if (\n    acc.find(\n      (i) =>\n        i.method === item.sample.request.method &&\n        i.url === item.sample.request.url\n    )\n  ) {\n    return acc;\n  } else {\n    return acc.concat({\n      method: item.sample.request.method,\n      url: item.sample.request.url,\n      pathId: item.pathId,\n      requestId: item.requestId,\n      sample: item.sample,\n    });\n  }\n}\n\nexport function pathComponentsToString(pathComponents) {\n  if (pathComponents.length === 0) {\n    return '/';\n  }\n  const s =\n    '/' +\n    pathComponents\n      .map(({ name, isParameter }) => {\n        if (isParameter) {\n          const stripped = name\n            .replace('{', '')\n            .replace('}', '')\n            .replace(':', '');\n          return `:${stripped}`;\n        } else {\n          return name;\n        }\n      })\n      .join('/');\n  return s;\n}\n\nexport function cleanupPathComponentName(name) {\n  return name.replace(/[{}:]/gi, '');\n}\n\nexport function trimTrailingEmptyPath(components) {\n  if (components.length > 0) {\n    if (components[components.length - 1].name === '') {\n      return components.slice(0, -1);\n    }\n  }\n  return components;\n}\n\nexport function pathStringToPathComponents(pathString) {\n  const components = pathString.split('/').map((name) => {\n    const isParameter = name.charAt(0) === ':' || name.charAt(0) === '{';\n    return { name, isParameter };\n  });\n  const [root, ...rest] = components;\n  if (root.name === '') {\n    return trimTrailingEmptyPath(rest);\n  }\n  return trimTrailingEmptyPath(components);\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nglobal.opticDebug = {};\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import * as React from 'react';\nimport { useContext, useEffect, useState } from 'react';\nimport { useServices } from './SpecServiceContext';\nimport { RfcContext, withRfcContext } from './RfcContext';\nimport {\n  commandsToJson,\n  CompareEquality,\n  DiffResultHelper,\n  JsonHelper,\n  lengthScala,\n  ScalaJSHelpers,\n} from '@useoptic/domain';\nimport debounce from 'lodash.debounce';\nimport { track } from '../Analytics';\nexport const CaptureContext = React.createContext(null);\n\nexport function useCaptureContext() {\n  return useContext(CaptureContext);\n}\n\nconst initialState = (debouncer = null) => {\n  return {\n    diffService: null,\n    captureService: null,\n    notificationChannel: null,\n    config: null,\n    additionalCommands: [],\n    lastUpdate: null,\n    pendingUpdates: false,\n    completed: false,\n    skipped: '0',\n    processed: '0',\n\n    reloadDebounce: debouncer,\n    unrecognizedUrls: [],\n    endpointDiffs: [],\n  };\n};\n\nclass _CaptureContextStore extends React.Component {\n  state = initialState();\n\n  componentDidMount = async () => {\n    this.setState(\n      {\n        reloadDebounce: debounce(this.reload, 1000, {\n          leading: true,\n          maxWait: 1500,\n        }),\n      },\n      async () => await this.startDiff()\n    );\n  };\n\n  componentWillUnmount() {\n    if (this.state.notificationChannel) {\n      this.state.notificationChannel.close();\n    }\n  }\n\n  reload = async (notifData) => {\n    const notifDataUpdates = (() => {\n      if (notifData && notifData.hasOwnProperty('hasMoreInteractions')) {\n        if (!notifData.hasMoreInteractions) {\n          console.log('completed diff');\n          track('Completed Diff', {\n            captureId: this.props.captureId,\n          });\n        }\n        const stats = {\n          completed: !notifData.hasMoreInteractions,\n          skipped: notifData.skippedInteractionsCounter,\n          processed: notifData.diffedInteractionsCounter,\n        };\n\n        track('Diff Progress', {\n          captureId: this.props.captureId,\n          ...stats,\n        });\n\n        return stats;\n      } else {\n        return {};\n      }\n    })();\n\n    const { diffService } = this.state;\n\n    if (diffService) {\n      const [diffsResponse, urlsResponse] = await Promise.all([\n        diffService.listDiffs(),\n        diffService.listUnrecognizedUrls(),\n      ]);\n\n      console.log('results', [diffsResponse.diffs.length, urlsResponse.length]);\n\n      track('Diff Incremental Results', {\n        captureId: this.props.captureId,\n        diffs: diffsResponse.diffs.length,\n        newUrls: urlsResponse.length,\n      });\n\n      this.setState({\n        endpointDiffs: diffsResponse.diffs,\n        unrecognizedUrls: urlsResponse,\n        pendingUpdates: true,\n        lastUpdate: new Date(),\n        ...notifDataUpdates,\n      });\n    }\n  };\n\n  cleanupDiff = async () => {\n    if (this.state.notificationChannel) {\n      this.state.notificationChannel.close();\n    }\n    return await new Promise((resolve) => {\n      this.setState(\n        {\n          unrecognizedUrls: [],\n          endpointDiffs: [],\n          lastUpdate: null,\n          pendingUpdates: false,\n          config: null,\n          completed: false,\n          skipped: '0',\n          processed: '0',\n        },\n        resolve\n      );\n    });\n  };\n\n  startDiff = async () => {\n    const {\n      specService,\n      captureServiceFactory,\n      diffServiceFactory,\n      captureId,\n      eventStore,\n      rfcId,\n      rfcService,\n      method,\n      pathId,\n    } = this.props;\n\n    const s = this.state;\n    console.log('look here ', s);\n\n    //clear diff\n    await this.cleanupDiff();\n\n    const captureService = await captureServiceFactory(specService, captureId);\n    //@TODO: handle error\n    const apiConfig = await specService.loadConfig();\n    const events = eventStore.listEvents(rfcId);\n\n    track('Starting Diff', {\n      eventsLength: events.length,\n      additionalCommandsLength: this.state.additionalCommands.length,\n      captureId,\n    });\n    const eventsAsArray = ScalaJSHelpers.eventsJsArray(events);\n\n    const config = await captureService.startDiff(\n      eventsAsArray,\n      apiConfig.config.ignoreRequests || [],\n      commandsToJson(this.state.additionalCommands), //commands serialize me\n      pathId && method ? [{ pathId, method }] : [] // partition diff when on an endpoint page\n    );\n\n    const rfcState = rfcService.currentState(rfcId);\n\n    const diffService = await diffServiceFactory(\n      specService,\n      captureService,\n      eventsAsArray,\n      rfcState,\n      this.state.additionalCommands,\n      config,\n      captureId\n    );\n\n    let notificationChannel = null;\n    let stats_SIMULATED = undefined;\n    if (config.notificationsUrl) {\n      notificationChannel = new EventSource(config.notificationsUrl);\n      notificationChannel.onmessage = (event) => {\n        const { type, data } = JSON.parse(event.data);\n        if (type === 'message') {\n          this.state.reloadDebounce(data);\n        } else if (type === 'error') {\n          console.error(data);\n          debugger;\n        }\n      };\n      notificationChannel.onerror = (e) => {\n        console.error(e);\n      };\n      notificationChannel.onopen = (e) => {\n        console.log(e);\n      };\n    } else {\n      const stats = await diffService.loadStats();\n      stats_SIMULATED = { hasMoreInteractions: false, ...stats };\n    }\n\n    this.setState(\n      {\n        config,\n        diffService,\n        captureService,\n        notificationChannel,\n        pendingUpdates: false,\n      },\n      () => this.reload(stats_SIMULATED)\n    );\n  };\n\n  updatedAdditionalCommands = (additionalCommands) => {\n    this.setState({ additionalCommands }, () => {\n      this.startDiff();\n    });\n  };\n\n  render = () => {\n    const {\n      pendingUpdates,\n      unrecognizedUrls,\n      endpointDiffs,\n      lastUpdate,\n      config,\n      diffService,\n      captureService,\n      completed,\n      skipped,\n      processed,\n    } = this.state;\n\n    const endpointDiffsWithoutIgnored = CompareEquality.filterIgnored(\n      endpointDiffs,\n      this.props.ignoredDiffs\n    );\n\n    const value = {\n      pendingUpdates,\n      captureId: this.props.captureId,\n      config,\n      lastUpdate,\n      endpointDiffs: endpointDiffsWithoutIgnored,\n      unrecognizedUrls,\n      diffService,\n      captureService,\n      completed,\n      skipped,\n      processed,\n      updatedAdditionalCommands: this.updatedAdditionalCommands,\n    };\n\n    return (\n      <CaptureContext.Provider value={value}>\n        {this.props.children}\n      </CaptureContext.Provider>\n    );\n  };\n}\n\nexport const CaptureContextStore = withRfcContext(_CaptureContextStore);\n","\"use strict\";\n\nvar _classCallCheck = require(\"/Users/ronakshah/Developer/Work/Optic/optic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/ronakshah/Developer/Work/Optic/optic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Client = void 0;\n\nvar client_utilities_1 = require(\"@useoptic/client-utilities\");\n\nvar Client = /*#__PURE__*/function () {\n  function Client(baseUrl) {\n    _classCallCheck(this, Client);\n\n    this.baseUrl = baseUrl;\n  }\n\n  _createClass(Client, [{\n    key: \"getIdentity\",\n    value: function getIdentity() {\n      var url = \"\".concat(this.baseUrl, \"/identity\");\n      return client_utilities_1.JsonHttpClient.getJsonWithoutHandlingResponse(url);\n    }\n  }, {\n    key: \"setIdentity\",\n    value: function setIdentity(user) {\n      if (user) {\n        var url = \"\".concat(this.baseUrl, \"/identity\");\n        return client_utilities_1.JsonHttpClient.putJson(url, {\n          user: user\n        });\n      }\n    }\n  }, {\n    key: \"findSession\",\n    value: function findSession(path, taskConfig, captureId) {\n      var url = \"\".concat(this.baseUrl, \"/sessions\");\n      return client_utilities_1.JsonHttpClient.postJson(url, {\n        path: path,\n        taskConfig: taskConfig,\n        captureId: captureId\n      });\n    }\n  }, {\n    key: \"markCaptureAsCompleted\",\n    value: function markCaptureAsCompleted(specId, captureId) {\n      var url = \"\".concat(this.baseUrl, \"/specs/\").concat(specId, \"/captures/\").concat(captureId, \"/status\");\n      return client_utilities_1.JsonHttpClient.putJson(url, {\n        status: 'completed'\n      });\n    }\n  }, {\n    key: \"stopDaemon\",\n    value: function stopDaemon() {\n      var url = \"\".concat(this.baseUrl, \"/commands\");\n      return client_utilities_1.JsonHttpClient.postJson(url, {\n        type: 'shutdown'\n      });\n    }\n  }]);\n\n  return Client;\n}();\n\nexports.Client = Client;","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/ronakshah/Developer/Work/Optic/optic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nvar _asyncToGenerator = require(\"/Users/ronakshah/Developer/Work/Optic/optic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\nvar _classCallCheck = require(\"/Users/ronakshah/Developer/Work/Optic/optic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/ronakshah/Developer/Work/Optic/optic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.JsonHttpClient = void 0;\n\nvar cross_fetch_1 = __importDefault(require(\"cross-fetch\"));\n\nvar JsonHttpClient = /*#__PURE__*/function () {\n  function JsonHttpClient() {\n    _classCallCheck(this, JsonHttpClient);\n  }\n\n  _createClass(JsonHttpClient, null, [{\n    key: \"verifyOkResponse\",\n    value: function () {\n      var _verifyOkResponse = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(response) {\n        var text;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return response.text();\n\n              case 2:\n                text = _context.sent;\n\n                if (response.ok) {\n                  _context.next = 5;\n                  break;\n                }\n\n                throw new Error(\"expected a successful response. got \".concat(response.status, \" \").concat(response.statusText, \" \\n\").concat(text));\n\n              case 5:\n                return _context.abrupt(\"return\", text);\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function verifyOkResponse(_x) {\n        return _verifyOkResponse.apply(this, arguments);\n      }\n\n      return verifyOkResponse;\n    }()\n  }, {\n    key: \"handleJsonResponse\",\n    value: function () {\n      var _handleJsonResponse = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(response) {\n        var json, text;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!response.ok) {\n                  _context2.next = 9;\n                  break;\n                }\n\n                if (!(response.status === 204)) {\n                  _context2.next = 3;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\");\n\n              case 3:\n                _context2.next = 5;\n                return response.json();\n\n              case 5:\n                json = _context2.sent;\n                return _context2.abrupt(\"return\", json);\n\n              case 9:\n                _context2.next = 11;\n                return response.text();\n\n              case 11:\n                text = _context2.sent;\n                throw new Error(\"\".concat(response.status, \" \").concat(response.statusText, \" \\n\").concat(text));\n\n              case 13:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function handleJsonResponse(_x2) {\n        return _handleJsonResponse.apply(this, arguments);\n      }\n\n      return handleJsonResponse;\n    }()\n  }, {\n    key: \"getJson\",\n    value: function getJson(url) {\n      var additionalHeaders = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return cross_fetch_1.default(url, {\n        method: 'GET',\n        headers: Object.assign({\n          accept: 'application/json'\n        }, additionalHeaders)\n      }).then(JsonHttpClient.handleJsonResponse);\n    }\n  }, {\n    key: \"getJsonWithoutHandlingResponse\",\n    value: function getJsonWithoutHandlingResponse(url) {\n      return cross_fetch_1.default(url, {\n        method: 'GET',\n        headers: {\n          Accept: 'application/json'\n        }\n      });\n    }\n  }, {\n    key: \"postJsonString\",\n    value: function postJsonString(url, body) {\n      var additionalHeaders = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      return cross_fetch_1.default(url, {\n        method: 'POST',\n        body: body,\n        headers: Object.assign({\n          accept: 'application/json',\n          'content-type': 'application/json'\n        }, additionalHeaders)\n      }).then(JsonHttpClient.handleJsonResponse);\n    }\n  }, {\n    key: \"postJson\",\n    value: function postJson(url, body) {\n      var additionalHeaders = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      return JsonHttpClient.postJsonString(url, JSON.stringify(body), additionalHeaders);\n    }\n  }, {\n    key: \"postJsonWithoutBody\",\n    value: function postJsonWithoutBody(url) {\n      var additionalHeaders = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return cross_fetch_1.default(url, {\n        method: 'POST',\n        headers: Object.assign({\n          accept: 'application/json'\n        }, additionalHeaders)\n      }).then(JsonHttpClient.handleJsonResponse);\n    }\n  }, {\n    key: \"getJsonAsText\",\n    value: function getJsonAsText(url) {\n      return cross_fetch_1.default(url, {\n        headers: {\n          accept: 'application/json'\n        }\n      }).then(JsonHttpClient.verifyOkResponse);\n    }\n  }, {\n    key: \"putJson\",\n    value: function putJson(url, body) {\n      var additionalHeaders = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      return JsonHttpClient.putJsonString(url, JSON.stringify(body), additionalHeaders);\n    }\n  }, {\n    key: \"putJsonString\",\n    value: function putJsonString(url, body) {\n      var additionalHeaders = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      return cross_fetch_1.default(url, {\n        method: 'PUT',\n        body: body,\n        headers: Object.assign({\n          accept: 'application/json',\n          'content-type': 'application/json'\n        }, additionalHeaders)\n      }).then(JsonHttpClient.handleJsonResponse);\n    }\n  }, {\n    key: \"putBytes\",\n    value: function putBytes(url, body) {\n      var additionalHeaders = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      return cross_fetch_1.default(url, {\n        method: 'PUT',\n        body: body,\n        headers: Object.assign({\n          'content-length': body.length.toString()\n        }, additionalHeaders)\n      }).then(JsonHttpClient.verifyOkResponse);\n    }\n  }]);\n\n  return JsonHttpClient;\n}();\n\nexports.JsonHttpClient = JsonHttpClient;","import React from 'react'\n\nexport const DepthContext = React.createContext({depth: 0});\n\nexport const Indent = ({children, add = 1, style}) => {\n  return (\n    <DepthContext.Consumer>\n      {({depth}) => (\n        <div style={{paddingLeft: (depth + add) * 13, ...style}}>\n          <DepthContext.Provider value={{depth: depth + add}}>\n            {children}\n          </DepthContext.Provider>\n        </div>\n      )}\n    </DepthContext.Consumer>\n  );\n};\n\nexport const IndentIncrement = ({children, add = 1}) => {\n  return (\n    <DepthContext.Consumer>\n      {({depth}) => (\n        <DepthContext.Provider value={{depth: depth + add}}>\n          {children}\n        </DepthContext.Provider>\n      )}\n    </DepthContext.Consumer>\n  );\n};\n","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/ronakshah/Developer/Work/Optic/optic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nvar _asyncToGenerator = require(\"/Users/ronakshah/Developer/Work/Optic/optic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\nvar _classCallCheck = require(\"/Users/ronakshah/Developer/Work/Optic/optic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/ronakshah/Developer/Work/Optic/optic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Client = void 0;\n\nvar bottleneck_1 = __importDefault(require(\"bottleneck\"));\n\nvar client_utilities_1 = require(\"@useoptic/client-utilities\");\n\nvar outgoingPoll = new bottleneck_1.default({\n  maxConcurrent: 1,\n  minTime: 1000\n});\n\nvar Client = /*#__PURE__*/function () {\n  function Client(specId, eventEmitter) {\n    var baseUrl = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '/api';\n\n    _classCallCheck(this, Client);\n\n    this.specId = specId;\n    this.eventEmitter = eventEmitter;\n    this.baseUrl = baseUrl;\n  }\n\n  _createClass(Client, [{\n    key: \"loadConfig\",\n    value: function loadConfig() {\n      return client_utilities_1.JsonHttpClient.getJson(\"\".concat(this.baseUrl, \"/specs/\").concat(this.specId, \"/config\"));\n    }\n  }, {\n    key: \"listEvents\",\n    value: function listEvents() {\n      return client_utilities_1.JsonHttpClient.getJsonAsText(\"\".concat(this.baseUrl, \"/specs/\").concat(this.specId, \"/events\"));\n    }\n  }, {\n    key: \"listCaptures\",\n    value: function listCaptures() {\n      return client_utilities_1.JsonHttpClient.getJson(\"\".concat(this.baseUrl, \"/specs/\").concat(this.specId, \"/captures\"));\n    }\n  }, {\n    key: \"saveEvents\",\n    value: function saveEvents(eventStore, rfcId) {\n      var _this = this;\n\n      var serializedEvents = eventStore.serializeEvents(rfcId);\n      return client_utilities_1.JsonHttpClient.putJsonString(\"\".concat(this.baseUrl, \"/specs/\").concat(this.specId, \"/events\"), serializedEvents).then(function (x) {\n        _this.eventEmitter.emit('events-updated');\n\n        return x;\n      });\n    }\n  }, {\n    key: \"listCapturedSamples\",\n    value: function listCapturedSamples(captureId) {\n      var _this2 = this;\n\n      return outgoingPoll.schedule(function () {\n        return client_utilities_1.JsonHttpClient.getJson(\"\".concat(_this2.baseUrl, \"/specs/\").concat(_this2.specId, \"/captures/\").concat(captureId, \"/samples\")).then(function (body) {\n          return {\n            samples: body.samples,\n            metadata: body.metadata\n          };\n        });\n      });\n    }\n  }, {\n    key: \"getCaptureStatus\",\n    value: function getCaptureStatus(captureId) {\n      return client_utilities_1.JsonHttpClient.getJson(\"\".concat(this.baseUrl, \"/specs/\").concat(this.specId, \"/captures/\").concat(captureId, \"/status\"));\n    }\n  }, {\n    key: \"getTestingCredentials\",\n    value: function getTestingCredentials() {\n      return client_utilities_1.JsonHttpClient.getJsonWithoutHandlingResponse(\"\".concat(this.baseUrl, \"/specs/\").concat(this.specId, \"/testing-credentials\"));\n    }\n  }, {\n    key: \"getEnabledFeatures\",\n    value: function () {\n      var _getEnabledFeatures = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var response;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.getTestingCredentials();\n\n              case 2:\n                response = _context.sent;\n                return _context.abrupt(\"return\", {\n                  TESTING_DASHBOARD: response.status >= 200 && response.status <= 299\n                });\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getEnabledFeatures() {\n        return _getEnabledFeatures.apply(this, arguments);\n      }\n\n      return getEnabledFeatures;\n    }()\n  }]);\n\n  return Client;\n}();\n\nexports.Client = Client;","import * as React from 'react';\n\nexport function GenericContextFactory(defaultValue) {\n    const Context = React.createContext(defaultValue);\n\n    //@TODO: add optional key parameter e.g. function (Wrapper, propKey = null). If it is set, instead of spreading the context it will use that key for the prop name\n    const withContext = function (Wrapper) {\n        return function (props) {\n            return (\n                <Context.Consumer>\n                    {(context) => {\n                        return (\n                            <Wrapper {...props} {...context} />\n                        )\n                    }}\n                </Context.Consumer>\n            )\n        }\n    }\n\n    return {\n        Context,\n        withContext\n    }\n}","import React, { useContext, useEffect, useState } from 'react';\nimport { GenericContextFactory } from './GenericContextFactory';\n\nconst {\n  Context: SpecServiceContext,\n  withContext: withSpecServiceContext,\n} = GenericContextFactory(null);\n\nclass SpecServiceStore extends React.Component {\n  state = { enabledFeatures: null };\n\n  componentDidMount() {\n    const { specService, specServiceEvents } = this.props;\n    if (!specServiceEvents) {\n      console.warn('I need specServiceEvents');\n      debugger;\n    } else {\n      specServiceEvents.on('events-updated', () => {\n        this.forceUpdate();\n      });\n    }\n\n    const determineEnabledFeatures = async () => {\n      const enabledFeatures = await specService.getEnabledFeatures();\n\n      this.setState({ enabledFeatures });\n    };\n\n    determineEnabledFeatures();\n  }\n\n  render() {\n    const {\n      specService,\n      captureServiceFactory,\n      diffServiceFactory,\n    } = this.props;\n    const { enabledFeatures } = this.state;\n    const value = {\n      specService,\n      captureServiceFactory,\n      diffServiceFactory,\n      enabledFeatures,\n    };\n    return (\n      <SpecServiceContext.Provider value={value}>\n        {this.props.children}\n      </SpecServiceContext.Provider>\n    );\n  }\n}\n\nfunction useSpecService() {\n  const { specService } = useContext(SpecServiceContext);\n  return specService;\n}\n\nfunction useServices() {\n  const { specService, diffServiceFactory, captureServiceFactory } = useContext(\n    SpecServiceContext\n  );\n\n  return {\n    specService,\n    diffServiceFactory,\n    captureServiceFactory,\n  };\n}\n\nfunction useEnabledFeatures() {\n  const specContext = useContext(SpecServiceContext);\n\n  if (!specContext)\n    throw Error(\n      'useEnabledFeatures can only be used inside SpecServiceContext'\n    );\n\n  return specContext.enabledFeatures;\n}\n\nexport {\n  withSpecServiceContext,\n  SpecServiceContext,\n  SpecServiceStore,\n  useSpecService,\n  useServices,\n  useEnabledFeatures,\n};\n","import React from 'react';\nimport { GenericContextFactory } from '../../../contexts/GenericContextFactory';\nimport { withRequestTabsContext } from '../../docs/ContentTabs';\n\nconst {\n  Context: DiffContext,\n  withContext: withDiffContext,\n} = GenericContextFactory();\n\nclass _DiffContextStore extends React.Component {\n  state = {\n    isFinishing: false,\n  };\n\n  render() {\n    const {\n      acceptSuggestion,\n      acceptedSuggestions,\n      diffsForThisEndpoint,\n      completed,\n    } = this.props;\n\n    // const setIsFinishing = (bool) => this.setState({isFinishing: bool});\n\n    const context = {\n      diffsForThisEndpoint,\n      completed,\n      isFinishing: this.state.isFinishing,\n\n      clearPreview: () => {\n        this.setState({\n          exampleInteractions: [],\n          isFinishing: false,\n        });\n      },\n      reset: () => {\n        this.props.reset();\n        this.setState({\n          exampleInteractions: [],\n          isFinishing: false,\n        });\n      },\n\n      acceptSuggestion,\n      acceptedSuggestions,\n    };\n\n    return (\n      <DiffContext.Provider value={context}>\n        {this.props.children}\n      </DiffContext.Provider>\n    );\n  }\n}\n\nconst DiffContextStore = withRequestTabsContext(_DiffContextStore);\n\nexport { DiffContext, withDiffContext, DiffContextStore };\n","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { methodColorsDark } from '../../docs/DocConstants';\nimport { LightTooltip } from '../../tooltips/LightTooltip';\n\nexport const PathAndMethod = ({ path, method }) => {\n  const methodRender = (\n    <Typography\n      variant=\"body1\"\n      component=\"span\"\n      style={{\n        fontWeight: 400,\n        color: '#ffffff',\n        padding: 4,\n        fontSize: 11,\n        borderRadius: 2,\n        marginTop: -3,\n        backgroundColor: methodColorsDark[method.toUpperCase()],\n      }}\n    >\n      {method.toUpperCase()}\n    </Typography>\n  );\n  const pathRender = (\n    <Typography\n      variant=\"subtitle1\"\n      component=\"span\"\n      style={{ fontSize: 12, marginLeft: 7 }}\n    >\n      {path}\n    </Typography>\n  );\n\n  return (\n    <span>\n      {' '}\n      {methodRender} {pathRender}{' '}\n    </span>\n  );\n};\n\nexport const PathAndMethodOverflowFriendly = ({ path, method }) => {\n  const methodRender = (\n    <Typography\n      variant=\"body1\"\n      component=\"div\"\n      style={{\n        fontWeight: 400,\n        color: '#ffffff',\n        fontSize: 9,\n        borderRadius: 2,\n        padding: 3,\n        paddingTop: 4,\n        backgroundColor: methodColorsDark[method.toUpperCase()],\n      }}\n    >\n      {method.toUpperCase()}\n    </Typography>\n  );\n  const pathRender = (\n    <Typography\n      variant=\"subtitle1\"\n      component=\"div\"\n      style={{\n        fontSize: 10,\n        marginLeft: 8,\n        maxWidth: 220,\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n        wordBreak: 'break-all',\n        whiteSpace: 'nowrap',\n      }}\n    >\n      {path}\n    </Typography>\n  );\n\n  return (\n    <LightTooltip title={<PathAndMethod method={method} path={path} />}>\n      <div\n        style={{\n          display: 'flex',\n          flexDirection: 'row',\n          paddingLeft: 8,\n          paddingRight: 8,\n        }}\n      >\n        {' '}\n        {methodRender} {pathRender}{' '}\n      </div>\n    </LightTooltip>\n  );\n};\n\nexport const PathAndMethodLarge = ({ path, method }) => {\n  const methodRender = (\n    <Typography\n      variant=\"body1\"\n      component=\"span\"\n      style={{\n        fontWeight: 400,\n        color: '#ffffff',\n        padding: 4,\n        fontSize: 15,\n        borderRadius: 2,\n        marginTop: -3,\n        backgroundColor: methodColorsDark[method.toUpperCase()],\n      }}\n    >\n      {method.toUpperCase()}\n    </Typography>\n  );\n  const pathRender = (\n    <Typography\n      variant=\"subtitle1\"\n      component=\"span\"\n      style={{ fontSize: 17, marginLeft: 7, fontWeight: 200 }}\n    >\n      {path}\n    </Typography>\n  );\n\n  return (\n    <span>\n      {' '}\n      {methodRender} {pathRender}{' '}\n    </span>\n  );\n};\n\nexport const SquareChip = ({ label, color, bgColor, style }) => {\n  return (\n    <Typography\n      variant=\"body1\"\n      component=\"span\"\n      style={{\n        fontWeight: 400,\n        color,\n        padding: 4,\n        fontSize: 8,\n        borderRadius: 2,\n        marginTop: -3,\n        backgroundColor: bgColor,\n        ...style,\n      }}\n    >\n      {label}\n    </Typography>\n  );\n};\n","import React, {useContext} from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Slide from '@material-ui/core/Slide';\nimport {AllCapturesContext} from './CaptureManagerPage';\nimport {useParams} from 'react-router-dom';\n\nconst Transition = React.forwardRef(function Transition(props, ref) {\n  return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\nexport default function MoreRecentCapture(props) {\n  const {captures, dismissed, dismissCapture, switchToCapture} = useContext(AllCapturesContext);\n  const {captureId} = useParams();\n  const latestCaptureId = captures.length > 0 ? captures[0].captureId : null;\n  const hidden = latestCaptureId === null || (captureId === latestCaptureId) || dismissed.includes(latestCaptureId);\n\n  function handleReview() {\n    switchToCapture(latestCaptureId);\n  }\n\n  function handleDismiss() {\n    dismissCapture(latestCaptureId);\n  }\n\n  return (\n    <Dialog\n      open={!hidden}\n      TransitionComponent={Transition}\n      keepMounted\n      onClose={handleDismiss}\n      aria-labelledby=\"alert-dialog-slide-title\"\n      aria-describedby=\"alert-dialog-slide-description\"\n    >\n      <DialogTitle id=\"alert-dialog-slide-title\">New Capture</DialogTitle>\n      <DialogContent>\n        <DialogContentText id=\"alert-dialog-slide-description\">\n          Optic has observed a newer Capture than the one you are currently working on.\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={handleDismiss} color=\"primary\">\n          Dismiss\n        </Button>\n        <Button onClick={handleReview} color=\"primary\">\n          Review\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React from 'react';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport AceEditor from 'react-ace';\nimport 'ace-builds/src-noconflict/mode-json';\nimport 'ace-builds/src-noconflict/theme-github';\n\nconst styles = theme => ({\n  root: {},\n});\n\nfunction TypeModal({value, onChange}) {\n  return (\n    <AceEditor\n      mode=\"json\"\n      theme=\"github\"\n      tabSize={2}\n      showPrintMargin={false}\n      width={'90%'}\n      onChange={onChange}\n      value={value}\n      editorProps={{$blockScrolling: true}}\n    />\n  );\n}\n\nexport default withStyles(styles)(TypeModal);\n","import React, { useContext } from 'react';\n\nimport { GenericContextFactory } from './GenericContextFactory';\nimport {\n  createEndpointDescriptor,\n  getEndpointId,\n} from '../utilities/EndpointUtilities';\nimport { RfcContext, withRfcContext } from './RfcContext';\nimport { commandsForUpdatingContribution } from '../engine/routines';\nimport {\n  asPathTrail,\n  getNameWithFormattedParameters,\n} from '../components/utilities/PathUtilities';\n\nconst {\n  Context: EndpointsContext,\n  withContext: withEndpointsContext,\n} = GenericContextFactory(null);\n\nclass EndpointsContextStoreWithoutContext extends React.Component {\n  render() {\n    //usage defined props\n    const { pathId, method, notFound } = this.props;\n    const lookupExampleForRequest = (requestId) =>\n      this.props.lookupExampleForRequest(pathId, method, requestId);\n    const lookupExampleForResponse = (responseId) =>\n      this.props.lookupExampleForResponse(pathId, method, responseId);\n    //props from context\n    const { cachedQueryResults, queries, handleCommands } = this.props;\n    const { contributions } = cachedQueryResults;\n\n    const endpointId = getEndpointId({ pathId, method });\n    const endpointDescriptor = createEndpointDescriptor(\n      { pathId, method },\n      cachedQueryResults\n    );\n\n    if (endpointDescriptor) {\n      const context = {\n        endpointId,\n        endpointDescriptor,\n        getContribution: (id, key) => contributions.getOrUndefined(id, key),\n        lookupExampleForRequest,\n        lookupExampleForResponse,\n        updateContribution: (id, key, value) => {\n          handleCommands(...commandsForUpdatingContribution(id, key, value));\n        },\n      };\n\n      return (\n        <EndpointsContext.Provider value={context}>\n          {this.props.children}\n        </EndpointsContext.Provider>\n      );\n    } else {\n      return (\n        notFound || (\n          <div>\n            Endpoint Not Found {method} {pathId}\n          </div>\n        )\n      );\n    }\n  }\n}\n\nconst EndpointsContextStore = withRfcContext(\n  EndpointsContextStoreWithoutContext\n);\n\nexport { EndpointsContextStore, EndpointsContext, withEndpointsContext };\n\nexport function PathNameFromId({ pathId }) {\n  const { cachedQueryResults } = useContext(RfcContext);\n\n  const { pathsById } = cachedQueryResults;\n\n  if (!pathId) {\n    return null;\n  }\n\n  let pathParameters = [];\n\n  //try to resolve this path\n  const pathTrail = asPathTrail(pathId, pathsById);\n  const pathTrailComponents = pathTrail.map((pathId) => pathsById[pathId]);\n\n  const pathTrailWithNames = pathTrailComponents.map((pathComponent) => {\n    const pathComponentName = getNameWithFormattedParameters(pathComponent);\n    const pathComponentId = pathComponent.pathId;\n    return {\n      pathComponentName,\n      pathComponentId,\n    };\n  });\n\n  const fullPath = pathTrailWithNames\n    .map(({ pathComponentName }) => pathComponentName)\n    .join('/');\n\n  return <>{fullPath || '/'}</>;\n}\n","const docsBaseLink = 'https://docs.useoptic.com';\n\nexport const OpticDocs = docsBaseLink + '/';\nexport const AddOpticLink = docsBaseLink + '/setup';\nexport const DocumentingYourApi = docsBaseLink + '/documenting-your-api';\n\nexport const Contact = (subject) =>\n  `mailto:aidan@useoptic.com?subject=${subject}`;\nexport const GithubIssues = 'https://github.com/opticdev/optic/issues';\n","import React from 'react';\n\nexport function Show({ when, children, style }) {\n  return (\n    <div style={{ display: !when && 'none', ...style }}>{when && children}</div>\n  );\n}\n\nexport function ShowSpan({ when, children, style }) {\n  return (\n    <span style={{ display: !when && 'none', ...style }}>\n      {when && children}\n    </span>\n  );\n}\n","export function isPathParameter(path) {\n  if (path.descriptor.ParameterizedPathComponentDescriptor) {\n    return true;\n  }\n  return false;\n}\n\nexport function asNormalizedAbsolutePath(pathTrailComponents) {\n  if (pathTrailComponents.length === 1) {\n    return '/';\n  }\n  return pathTrailComponents.map((pathTrailComponent) => getNormalizedName(pathTrailComponent)).join('/');\n}\n\nexport function asAbsolutePath(pathTrailComponents) {\n  if (pathTrailComponents.length === 1) {\n    return '/';\n  }\n  return pathTrailComponents.map((pathTrailComponent) => getNameWithFormattedParameters(pathTrailComponent)).join('/');\n}\n\nexport function getName(path) {\n  if (path.descriptor.ParameterizedPathComponentDescriptor) {\n    return path.descriptor.ParameterizedPathComponentDescriptor.name;\n  }\n  if (path.descriptor.BasicPathComponentDescriptor) {\n    return path.descriptor.BasicPathComponentDescriptor.name;\n  }\n  return null;\n}\n\nexport function getNameWithFormattedParameters(path) {\n  if (path.descriptor.ParameterizedPathComponentDescriptor) {\n    return `{${path.descriptor.ParameterizedPathComponentDescriptor.name}}`;\n  }\n  if (path.descriptor.BasicPathComponentDescriptor) {\n    return path.descriptor.BasicPathComponentDescriptor.name;\n  }\n  return null;\n}\n\nexport function getNormalizedName(path) {\n  if (path.descriptor.ParameterizedPathComponentDescriptor) {\n    return `{}`;\n  }\n  if (path.descriptor.BasicPathComponentDescriptor) {\n    return path.descriptor.BasicPathComponentDescriptor.name;\n  }\n  return null;\n}\n\nexport function getParentPathId(path) {\n  if (!path || !path.descriptor) {\n    return null;\n  }\n  if (path.descriptor.ParameterizedPathComponentDescriptor) {\n    return path.descriptor.ParameterizedPathComponentDescriptor.parentPathId;\n  }\n  if (path.descriptor.BasicPathComponentDescriptor) {\n    return path.descriptor.BasicPathComponentDescriptor.parentPathId;\n  }\n  return null;\n}\n\nexport function asPathTrail(pathId, pathsById) {\n  let lastPathId = pathId;\n  let pathTrail = [];\n  do {\n    pathTrail.push(lastPathId);\n    const lastPath = pathsById[lastPathId];\n    lastPathId = getParentPathId(lastPath);\n  } while (lastPathId);\n  return pathTrail.reverse();\n}\n\nexport function asPathTrailComponents(pathId, pathsById) {\n  return asPathTrail(pathId, pathsById).map(id => pathsById[id]);\n}\n\nexport function addAbsolutePath(pathId, pathsById) {\n  const basePath = pathsById[pathId];\n  const pathTrail = asPathTrail(pathId, pathsById);\n  const pathTrailComponents = pathTrail.map(x => pathsById[x]);\n  return {\n    ...basePath,\n    normalizedAbsolutePath: asNormalizedAbsolutePath(pathTrailComponents),\n    absolutePath: asAbsolutePath(pathTrailComponents)\n  };\n}\n\nexport function normalizePath(pathComponents) {\n  return '/' + pathComponents.map(x => x.isParameter ? '{}' : x.name).join('/');\n}\n\nexport function toAbsolutePath(pathComponents) {\n  return '/' + pathComponents.map(x => x.isParameter ? `{${x.name}}` : x.name).join('/');\n}\n\nfunction lastOrElse(array, defaultValue) {\n  const length = array.length;\n  return length === 0 ? defaultValue : array[length - 1];\n}\n\nconst rootPathComponent = [];\n\nexport function prefixes(pathComponents) {\n  return pathComponents\n    .reduce((acc, pathComponent) => {\n      return [\n        ...acc,\n        [...(lastOrElse(acc, [])), pathComponent]\n      ];\n    }, [rootPathComponent]);\n}\n\nexport function resolvePath(pathComponents, pathsById) {\n  const normalizedPathMap = Object.entries(pathsById)\n    .reduce((acc, [pathId, pathComponent]) => {\n      const normalizedAbsolutePath = asNormalizedAbsolutePath(asPathTrailComponents(pathId, pathsById));\n      acc[normalizedAbsolutePath] = pathComponent;\n      return acc;\n    }, {});\n  const pathPrefixes = prefixes(pathComponents).reverse();\n  // should be guaranteed to have a match of at least [] => '/' (root)\n  const lastMatchComponents = pathPrefixes\n    .find((pathComponentPrefix) => {\n      const normalized = normalizePath(pathComponentPrefix);\n      const match = normalizedPathMap[normalized];\n      return !!match;\n    });\n\n\n  const normalized = normalizePath(lastMatchComponents);\n  const lastMatch = normalizedPathMap[normalized];\n\n  const lengthDifference = pathComponents.length - lastMatchComponents.length;\n  const toAdd = lengthDifference <= 0 ? [] : pathComponents.slice(-1 * lengthDifference);\n  return {\n    lastMatch,\n    toAdd\n  };\n}\n","import React, { useContext, useEffect, useMemo, useState } from 'react';\n\nconst MockDataContext = React.createContext(null);\nMockDataContext.displayName = 'MockDataContext';\n\n// only expose the Provider component, but hide the Consumer in favour of hooks\nexport const { Provider } = MockDataContext;\n\nfunction createDebugSession({ exampleSessionCollection, sessionId }) {\n  let fetchedData = null;\n  async function getData(refresh = false) {\n    if (!fetchedData || refresh) {\n      // only fetch data once\n      fetchedData = fetch(`/${exampleSessionCollection}/${sessionId}.json`, {\n        headers: { accept: 'application/json' },\n      }).then((response) => {\n        if (response.ok) {\n          return response.json();\n        }\n\n        throw new Error();\n      });\n    }\n    return await fetchedData;\n  }\n\n  return {\n    sessionId,\n    getData,\n  };\n}\n\n// Hooks\n// -----\n\nexport function useMockSession({ sessionId, exampleSessionCollection }) {\n  const dashboardContext = useMemo(\n    () => createDebugSession({ sessionId, exampleSessionCollection }),\n    [sessionId]\n  );\n  return dashboardContext;\n}\n\nexport function useMockData(deps) {\n  const debugSession = useContext(MockDataContext);\n  // TODO: consider using useReducer here instead, lots of moving bits of state here\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [available, setAvailable] = useState(true);\n\n  useEffect(() => {\n    if (!debugSession) {\n      setAvailable(false);\n      setData(null);\n      setLoading(false);\n    } else {\n      setAvailable(true);\n      debugSession\n        .getData()\n        .then((result) => {\n          setData(result);\n          setLoading(false);\n          return result;\n        })\n        .catch((err) => {\n          setError(err);\n        });\n    }\n  }, deps);\n\n  return { available, data, loading, error };\n}\n","import React from 'react';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { TextField, Typography } from '@material-ui/core';\nimport ReactMarkdown from 'react-markdown';\nimport { DocDarkGrey, DocSubHeading, SubHeadingStyles } from './DocConstants';\nimport { SymbolColor } from '../diff/v2/shape_viewers/styles';\n\nexport function MarkdownRender({ source, style, noHeadings }) {\n  return (\n    <div style={style}>\n      <ReactMarkdown\n        source={source}\n        renderers={{\n          heading: ({ level, children }) =>\n            !noHeadings ? (\n              <Typography\n                color=\"primary\"\n                variant={`h${level}`}\n                style={{ fontWeight: 300, marginBottom: 3 }}\n              >\n                {children}\n              </Typography>\n            ) : null,\n          paragraph: ({ children }) => (\n            <Typography\n              variant=\"body2\"\n              style={{ fontWeight: 200, marginTop: 11, whiteSpace: 'pre-wrap' }}\n            >\n              {children}\n            </Typography>\n          ),\n          list: ({ children }) => {\n            return <ul style={{ paddingLeft: 20 }}>{children}</ul>;\n          },\n          listItem: ({ children }) => (\n            <li style={{ paddingLeft: 0 }}>\n              <Typography\n                variant=\"body2\"\n                style={{\n                  paddingLeft: 5,\n                  paddingRight: 5,\n                  marginTop: 11,\n                  fontWeight: 200,\n                }}\n              >\n                {children}\n              </Typography>\n            </li>\n          ),\n        }}\n      />\n    </div>\n  );\n}\n\nexport function FieldDescriptionMarkdownRender({ source, style }) {\n  return (\n    <div style={style}>\n      <ReactMarkdown\n        source={source}\n        renderers={{\n          paragraph: ({ children }) => (\n            <Typography\n              variant=\"body2\"\n              style={{\n                fontWeight: 200,\n                color: SymbolColor,\n                whiteSpace: 'pre-wrap',\n              }}\n            >\n              {children}\n            </Typography>\n          ),\n          list: ({ children }) => {\n            return (\n              <ul style={{ paddingLeft: 20, color: SymbolColor }}>\n                {children}\n              </ul>\n            );\n          },\n          listItem: ({ children }) => (\n            <li style={{ paddingLeft: 0 }}>\n              <Typography\n                variant=\"body2\"\n                style={{\n                  paddingLeft: 5,\n                  paddingRight: 5,\n                  color: SymbolColor,\n                  fontWeight: 200,\n                }}\n              >\n                {children}\n              </Typography>\n            </li>\n          ),\n        }}\n      />\n    </div>\n  );\n}\n\nconst styles = (theme) => ({\n  root: {\n    marginTop: 4,\n    cursor: 'text',\n  },\n});\n\nclass _MarkdownContribution extends React.Component {\n  state = {\n    inputValue: this.props.value || '',\n    editing: this.props.autoFocus,\n  };\n\n  handleChange = (e) => this.setState({ inputValue: e.target.value });\n  setEditing = (b) => () => {\n    this.setState({ editing: b });\n    if (!b && this.props.onChange) {\n      if (this.state.inputValue !== (this.props.value || '')) {\n        this.props.onChange(this.state.inputValue);\n      }\n    }\n  };\n\n  render() {\n    const { classes, label } = this.props;\n    const { inputValue, editing } = this.state;\n    if (editing) {\n      return (\n        <TextField\n          label={label}\n          fullWidth={true}\n          multiline={true}\n          style={{ fontSize: 11 }}\n          value={inputValue}\n          color=\"primary\"\n          autoFocus={true}\n          onChange={this.handleChange}\n          onBlur={this.setEditing(false)}\n          margin=\"dense\"\n        />\n      );\n    } else {\n      if (!inputValue) {\n        return (\n          <div className={classes.root} onClick={this.setEditing(true)}>\n            <Typography\n              variant=\"caption\"\n              style={{ color: DocDarkGrey, textTransform: 'uppercase' }}\n            >\n              {' '}\n              + {label}\n            </Typography>\n          </div>\n        );\n      }\n\n      return (\n        <div className={classes.root} onClick={this.setEditing(true)}>\n          <MarkdownRender source={inputValue} noHeadings={true} />\n        </div>\n      );\n    }\n  }\n}\n\nexport const MarkdownContribution = withStyles(styles)(_MarkdownContribution);\n\nclass _HeadingContribution extends React.Component {\n  state = {\n    inputValue: this.props.value || '',\n    editing: this.props.autoFocus,\n  };\n\n  handleChange = (e) => this.setState({ inputValue: e.target.value });\n  setEditing = (b) => () => {\n    this.setState({ editing: b });\n    if (!b && this.props.onChange) {\n      if (this.state.inputValue !== (this.props.value || '')) {\n        this.props.onChange(this.state.inputValue);\n      }\n    }\n  };\n\n  render() {\n    const { classes, label } = this.props;\n    const { inputValue, editing } = this.state;\n\n    if (editing) {\n      return (\n        <TextField\n          label={label}\n          fullWidth={true}\n          value={inputValue}\n          color=\"primary\"\n          autoFocus={true}\n          onChange={this.handleChange}\n          onBlur={this.setEditing(false)}\n          margin=\"normal\"\n        />\n      );\n    } else {\n      if (!inputValue) {\n        return (\n          <div className={classes.root} onClick={this.setEditing(true)}>\n            <Typography\n              variant=\"h5\"\n              style={{\n                ...SubHeadingStyles,\n                color: DocDarkGrey,\n                textTransform: 'uppercase',\n              }}\n            >\n              {' '}\n              + {label}\n            </Typography>\n          </div>\n        );\n      }\n\n      return (\n        <DocSubHeading title={inputValue} onClick={this.setEditing(true)} />\n      );\n    }\n  }\n}\n\nexport const HeadingContribution = withStyles(styles)(_HeadingContribution);\n","import { useCaptureContext } from '../../../contexts/CaptureContext';\nimport { useEffect, useState } from 'react';\nimport { JsonHelper, ScalaJSHelpers } from '@useoptic/domain';\nimport { track } from '../../../Analytics';\n\nexport function useDiffDescription(diff) {\n  const { diffService } = useCaptureContext();\n  const [description, setDescription] = useState(null);\n\n  useEffect(() => {\n    const getDescription = async () => {\n      setDescription((await diffService.loadDescription(diff)) || null);\n    };\n    getDescription();\n  }, [diff.diff.toString()]);\n\n  return description;\n}\n\nexport function useInteractionWithPointer(pointer) {\n  const { captureService } = useCaptureContext();\n  const [interaction, setInteraction] = useState(null);\n\n  useEffect(() => {\n    let mounted = true;\n    const getInteraction = async () => {\n      if (pointer) {\n        setInteraction(null);\n        const interaction =\n          (await captureService.loadInteraction(pointer)).interaction || null;\n        if (mounted) {\n          setInteraction({\n            interaction,\n            interactionScala: JsonHelper.fromInteraction(interaction),\n          });\n        }\n      } else {\n        if (mounted) {\n          setInteraction(null);\n        }\n      }\n    };\n\n    getInteraction();\n\n    return () => (mounted = false);\n  }, [pointer]);\n\n  return interaction;\n}\n\nexport function useSuggestionsForDiff(diff, currentInteraction) {\n  const { diffService } = useCaptureContext();\n  const [suggestions, setSuggestions] = useState([]);\n\n  useEffect(() => {\n    let mounted = true;\n    console.log('look here ', mounted);\n    const getSuggestions = async () => {\n      if (diff) {\n        const result = await diffService.listSuggestions(\n          diff,\n          currentInteraction\n        );\n        if (mounted) {\n          setSuggestions(result);\n          if (result.length === 0) {\n            track('Requirement Failed', {\n              requirement: 'Suggestions should never be empty',\n              diff: diff.toString(),\n            });\n          }\n        }\n      } else {\n        if (mounted) {\n          setSuggestions([]);\n        }\n      }\n    };\n    getSuggestions();\n    return () => (mounted = false);\n  }, [diff && diff.diff.toString()]);\n\n  return suggestions;\n}\n\nwindow.naiveCache = {};\n\nexport function useInitialBodyPreview(\n  diff,\n  currentInteraction,\n  inferPolymorphism = false,\n  endpointId\n) {\n  const { diffService } = useCaptureContext();\n\n  const [preview, setPreview] = useState(null);\n  const [loadingInferPoly, setLoadingInferPoly] = useState(false);\n\n  useEffect(() => {\n    window.naiveCache = {};\n  }, [endpointId]);\n\n  useEffect(() => {\n    let mounted = true;\n    const cacheKey = diff.toString() + inferPolymorphism.toString();\n    console.log('cache key ' + cacheKey);\n    const getInitialPreview = async () => {\n      if (diff && currentInteraction) {\n        if (inferPolymorphism) {\n          setLoadingInferPoly(true);\n        }\n\n        const result = window.naiveCache[cacheKey]\n          ? await Promise.resolve(window.naiveCache[cacheKey])\n          : await diffService.loadInitialPreview(\n              diff,\n              currentInteraction,\n              inferPolymorphism\n            );\n\n        if (mounted) {\n          setLoadingInferPoly(false);\n          setPreview(result);\n          window.naiveCache[cacheKey] = result;\n        }\n      } else {\n        if (mounted) {\n          setLoadingInferPoly(false);\n          setPreview(null);\n        }\n      }\n    };\n    getInitialPreview();\n    return () => (mounted = false);\n  }, [\n    diff.diff.toString(),\n    currentInteraction && currentInteraction.toString(),\n    inferPolymorphism,\n  ]);\n\n  return { preview, loadingInferPoly };\n}\n","import {useBaseUrl} from './contexts/BaseUrlContext';\n\nconst routerPaths = {\n  testingDashboard: (base = '') => `${base}/testing`,\n  testingCapture: (base = '') => `${base}/testing/captures/:captureId`,\n  testingEndpointDetails: (base = '') => `${base}/testing/captures/:captureId/endpoints/:endpointId`,\n  docsRoot: (base = '') => `${base}/documentation`,\n  requestDocsRoot: (base = '') => `${routerPaths.docsRoot(base)}/paths/:pathId/methods/:method`,\n  diffsRoot: (base = '') => `${base}/diffs`,\n  captureRoot: (base = '') => `${routerPaths.diffsRoot(base)}/:captureId`,\n  captureRequestDiffsRoot: (base = '') => `${routerPaths.captureRoot(base)}/paths/:pathId/methods/:method`,\n};\n\nexport function useRouterPaths() {\n  const baseUrl = useBaseUrl();\n\n  return Object\n    .entries(routerPaths)\n    .reduce(\n      (routesByName, entry) => {\n        const [routeName, route] = entry;\n        if (typeof route === 'function') {\n          routesByName[routeName] = route(baseUrl);\n        }\n\n        return routesByName;\n      },\n      {}\n    );\n}\n","import React, { useMemo, useState } from 'react';\nimport Drawer from '@material-ui/core/Drawer';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useRouterPaths } from '../../RouterPaths';\nimport { useEnabledFeatures } from '../../contexts/SpecServiceContext';\nimport { Link } from 'react-router-dom';\nimport IconButton from '@material-ui/core/IconButton';\nimport DescriptionIcon from '@material-ui/icons/Description';\nimport ChangeHistoryIcon from '@material-ui/icons/ChangeHistory';\nimport PolicyIcon from '@material-ui/icons/Policy';\nimport { LightTooltip } from '../tooltips/LightTooltip';\nimport { track } from '../../Analytics';\n\nconst drawerWidth = 270;\n\nconst useStyles = makeStyles({\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0,\n  },\n  miniDrawer: {\n    width: 55,\n    flexShrink: 0,\n  },\n  drawerPaper: {\n    width: drawerWidth,\n    backgroundColor: '#1B2958',\n    display: 'flex',\n    flexDirection: 'row',\n  },\n  miniDrawerPaper: {\n    backgroundColor: '#1B2958',\n    display: 'flex',\n    flexDirection: 'row',\n  },\n  topLevel: {\n    width: 55,\n    // backgroundColor: '#2b3966',\n    overflow: 'hidden',\n    borderRight: '1px solid #3F5597',\n    display: 'flex',\n    alignItems: 'center',\n    flexDirection: 'column',\n  },\n  navButton: {\n    marginTop: 6,\n  },\n  opticLogo: {\n    marginTop: 5,\n  },\n  mainSection: {\n    flex: 1,\n  },\n});\n\nexport default function Navbar(props) {\n  const classes = useStyles();\n  const routerPaths = useRouterPaths();\n\n  const enabledFeatures = useEnabledFeatures();\n\n  const menuItems = useMemo(\n    () => [\n      {\n        name: 'Review Diff',\n        icon: <ChangeHistoryIcon style={{ color: '#e2e2e2' }} />,\n        link: routerPaths.diffsRoot,\n      },\n      {\n        name: 'Documentation',\n        icon: <DescriptionIcon style={{ color: '#e2e2e2' }} />,\n        link: routerPaths.docsRoot,\n      },\n      ...(enabledFeatures && enabledFeatures.TESTING_DASHBOARD\n        ? [\n            {\n              name: 'Live Contract Testing',\n              icon: <PolicyIcon style={{ color: '#e2e2e2' }} />,\n              link: routerPaths.testingDashboard,\n            },\n          ]\n        : []),\n    ],\n    [routerPaths]\n  );\n\n  return (\n    <Drawer\n      id=\"navbar\"\n      elevation={2}\n      className={props.mini ? classes.miniDrawer : classes.drawer}\n      variant={'permanent'}\n      classes={{\n        paper: props.mini ? classes.miniDrawerPaper : classes.drawerPaper,\n      }}\n      anchor=\"left\"\n    >\n      <div\n        className={classes.topLevel}\n        style={props.mini && { borderRight: 'none' }}\n      >\n        <img src=\"/optic-logo.svg\" width={50} className={classes.opticLogo} />\n        {menuItems.map((i) => (\n          <LightTooltip\n            key={i.link}\n            title={i.name}\n            component={Link}\n            to={i.link}\n            placement=\"right\"\n            onClick={() => track(`Navigating to ${i.name}`, i)}\n          >\n            <IconButton className={classes.navButton}>{i.icon}</IconButton>\n          </LightTooltip>\n        ))}\n      </div>\n      {props.mini ? null : (\n        <div className={classes.mainSection}>{props.children}</div>\n      )}\n    </Drawer>\n  );\n}\n","import React, { useEffect, useContext, useState } from 'react';\nimport Navbar from './navigation/Navbar';\nimport { useLocation } from 'react-router-dom'\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst PageContext = React.createContext(null);\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    flexGrow: 1,\n  },\n  content: ({ padded = true }) => ({\n    display: 'flex',\n    flexDirection: 'column', // default to vertical stacking of child elements by default\n\n    flexGrow: 1,\n    paddingLeft: padded ? theme.spacing(4) : 0,\n    paddingRight: padded ? theme.spacing(4) : 0,\n  }),\n}));\n\nexport default function Page(props) {\n  const classes = useStyles();\n  const pageContext = useState([]);\n  usePageTitle(props.title, pageContext);\n\n  const [pageTitles] = pageContext;\n  const titles = pageTitles.filter((title) => !!title);\n  const title = titles[titles.length - 1] || '';\n\n  useEffect(() => {\n    if (!document || !title) return;\n    document.title = `${title} - Optic`;\n  }, [title]);\n\n  const { pathname } = useLocation();\n\n  useEffect(() => {\n    if (props.scrollToTop) {\n      window.scrollTo(0, 0);\n    }\n  }, [pathname]);\n\n  return (\n    <PageContext.Provider value={pageContext}>\n      <div className={classes.root}>{props.children}</div>;\n    </PageContext.Provider>\n  );\n}\n\nfunction PageBody(props) {\n  const classes = useStyles(props);\n\n  return <div className={classes.content}>{props.children}</div>;\n}\n\nexport function usePageTitle(title, injectedContext) {\n  const context = useContext(PageContext) || injectedContext;\n\n  useEffect(() => {\n    if (!context) throw Error('usePageTitle must be used in context of a Page');\n    const [titles, setTitles] = context;\n    setTitles([...titles, title]);\n\n    return () => {\n      const index = titles.indexOf(title);\n      setTitles(titles.slice(index, 1));\n    };\n  }, [title]);\n\n  return title;\n}\n\n// require the use of sub components in context of the Page, to nudge the use of them\n// together (as that's the only way they really make sense)\nPage.Navbar = Navbar;\nPage.Body = PageBody;\n","import React from 'react';\nimport {\n  CompareEquality,\n  DiffResultHelper,\n  getOrUndefined,\n  JsonHelper,\n} from '@useoptic/domain';\nimport SimulatedCommandContext from '../SimulatedCommandContext';\nimport { RfcContext, withRfcContext } from '../../../contexts/RfcContext';\nimport DiffHunkViewer from './DiffHunkViewer';\n\nclass _DiffViewSimulation extends React.Component {\n  shouldComponentUpdate(nextProps, nextState, nextContext) {\n    const update =\n      !CompareEquality.betweenBodyDiff(\n        nextProps.diff || undefined,\n        this.props.diff || undefined\n      ) ||\n      !CompareEquality.betweenSuggestions(\n        nextProps.selectedInterpretation || undefined,\n        this.props.selectedInterpretation || undefined\n      ) ||\n      !CompareEquality.betweenInteractions(\n        nextProps.interactionScala || undefined,\n        this.props.interactionScala || undefined\n      ) ||\n      !nextProps.renderDiff !== this.props.renderDiff;\n\n    return update;\n  }\n\n  render() {\n    const {\n      outerRfcState,\n      renderDiff,\n      diff,\n      description,\n      interactionScala,\n      body,\n      selectedInterpretation,\n      rfcId,\n      eventStore,\n    } = this.props;\n\n    const renderKey = 'render ' + diff.diff.toString() + interactionScala.uuid;\n\n    if (renderDiff) {\n      const simulatedCommands = selectedInterpretation\n        ? JsonHelper.seqToJsArray(selectedInterpretation.commands)\n        : [];\n\n      return (\n        <div key={renderKey}>\n          <SimulatedCommandContext\n            rfcId={rfcId}\n            eventStore={eventStore.getCopy(rfcId)}\n            commands={simulatedCommands}\n            shouldSimulate={true}\n          >\n            <RfcContext.Consumer>\n              {({ rfcService, rfcId }) => {\n                const currentRfcState = rfcService.currentState(rfcId);\n\n                console.time('Making preview ' + renderKey);\n                const preview = DiffResultHelper.previewDiff(\n                  diff,\n                  interactionScala,\n                  currentRfcState\n                );\n                console.timeEnd('Making preview ' + renderKey);\n\n                return (\n                  <DiffHunkViewer\n                    suggestion={selectedInterpretation}\n                    diff={diff}\n                    preview={getOrUndefined(preview)}\n                    diffDescription={description}\n                  />\n                );\n              }}\n            </RfcContext.Consumer>\n          </SimulatedCommandContext>\n        </div>\n      );\n    } else {\n      return (\n        <div key={renderKey}>\n          <DiffHunkViewer\n            exampleOnly\n            preview={getOrUndefined(\n              DiffResultHelper.previewBody(body, outerRfcState)\n            )}\n          />\n        </div>\n      );\n    }\n  }\n}\n\nexport const DiffViewSimulation = withRfcContext(_DiffViewSimulation);\n","import React, { useContext, useEffect, useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Pagination from '@material-ui/lab/Pagination';\nimport {\n  CompareEquality,\n  DiffPreviewer,\n  DiffResultHelper,\n  getIndex,\n  getOrUndefined,\n  JsonHelper,\n  lengthScala,\n  toOption,\n} from '@useoptic/domain';\nimport { DocDarkGrey, DocDivider } from '../../docs/DocConstants';\nimport { Show } from '../../shared/Show';\nimport DiffHunkViewer from './DiffHunkViewer';\nimport { DiffContext } from './DiffContext';\nimport { RfcContext } from '../../../contexts/RfcContext';\nimport { ShapeExpandedStore } from './shape_viewers/ShapeRenderContext';\nimport { PathAndMethod } from './PathAndMethod';\nimport { DiffHelperCard } from './DiffHelperCard';\nimport SimulatedCommandContext from '../SimulatedCommandContext';\nimport { BreadcumbX } from './DiffNewRegions';\nimport { primary } from '../../../theme';\nimport { useDiffDescription, useInteractionWithPointer } from './DiffHooks';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { DiffReviewLoading } from './LoadingNextDiff';\nimport { DiffViewSimulation } from './DiffViewSimulation';\nimport { track } from '../../../Analytics';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    margin: 0,\n    padding: theme.spacing(2),\n  },\n  title: {\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingTop: 30,\n    // justifyContent: 'center'\n  },\n  content: {\n    display: 'flex',\n    flexDirection: 'column',\n    paddingTop: 25,\n  },\n  leftContent: {\n    flex: 1,\n    padding: 12,\n  },\n  rightDrawer: {\n    width: 260,\n    padding: 12,\n    borderLeft: '1px solid',\n    borderLeftColor: '#e0e0e0',\n  },\n  innerRow: {\n    display: 'flex',\n    flexDirection: 'row',\n  },\n  shapeBox: {\n    backgroundColor: primary,\n    borderRadius: 8,\n    overflow: 'hidden',\n  },\n  headerBox: {\n    padding: 6,\n    paddingLeft: 0,\n  },\n}));\n\nexport class DiffReviewExpandedCached extends React.Component {\n  shouldComponentUpdate(nextProps, nextState, nextContext) {\n    return !CompareEquality.betweenBodyDiff(\n      nextProps.selectedDiff || undefined,\n      this.props.selectedDiff || undefined\n    );\n  }\n\n  render() {\n    const { selectedDiff, captureId, setSelectedDiff } = this.props;\n    return (\n      <DiffReviewExpanded\n        diff={selectedDiff}\n        captureId={captureId}\n        {...{ selectedDiff, setSelectedDiff }}\n      />\n    );\n  }\n}\n\nexport const DiffReviewExpanded = (props) => {\n  const classes = useStyles();\n  const { diff, selectedDiff, setSelectedDiff, rfcContext, captureId } = props;\n\n  const description = useDiffDescription(diff);\n\n  const [selectedInterpretation, setSelectedInterpretationInner] = useState(\n    null\n  );\n\n  const setSelectedInterpretation = (s) => {\n    if (description && s) {\n      track('Previewing Suggestion', {\n        captureId,\n        diff: description.title,\n        diffAssertion: description.assertion,\n        suggestion: s.action,\n      });\n    }\n    setSelectedInterpretationInner(s);\n  };\n  useEffect(() => {\n    // when diff changes, remove selection\n    setSelectedInterpretation(null);\n  }, [diff && diff.diff.toString()]);\n\n  const { rfcId, rfcService, cachedQueryResults, eventStore } = useContext(\n    RfcContext\n  );\n\n  const length = diff.interactionsCount;\n\n  const [interactionIndex, setInteractionIndex] = React.useState(1);\n\n  useEffect(() => {\n    //reset interactions cursor whenever diff is updated. (it's 1 instead of 0 before of Pagination widget)\n    setInteractionIndex(1);\n  }, [diff && diff.diff.toString()]);\n\n  const outerRfcState = rfcService.currentState(rfcId);\n  const { shapesResolvers } = cachedQueryResults;\n\n  const currentInteractionPointer = getIndex(diff.interactionPointers)(\n    interactionIndex - 1\n  );\n\n  const currentInteraction = useInteractionWithPointer(\n    currentInteractionPointer\n  );\n\n  if (!currentInteraction || !description) {\n    return <DiffReviewLoading show={true} />;\n  }\n\n  const { interaction, interactionScala } = currentInteraction;\n\n  const { method, path } = interactionScala.request;\n  track(\"Display Diff in Behavior Page\", props)\n  return (\n    <ShapeExpandedStore>\n      <div>\n        <div className={classes.title}>\n          <Typography variant=\"h6\" color=\"primary\">\n            Observation\n          </Typography>\n          <div style={{ flex: 1 }} />\n          <Typography variant=\"overline\" style={{ color: DocDarkGrey }}>\n            Examples\n          </Typography>\n          <Pagination\n            color=\"primary\"\n            count={length}\n            page={interactionIndex}\n            showLastButton={length > 5}\n            size=\"small\"\n            onChange={(e, pageNumber) => setInteractionIndex(pageNumber)}\n          />\n        </div>\n        <DocDivider style={{ marginTop: 10, marginBottom: 15 }} />\n\n        <PathAndMethod path={path} method={method} />\n\n        <div className={classes.content}>\n          <Show when={interactionScala.request.body.nonEmpty}>\n            <InnerRow\n              left={\n                <ShapeBox\n                  header={\n                    <BreadcumbX\n                      itemStyles={{ fontSize: 13, color: 'white' }}\n                      location={[\n                        `Request Body`,\n                        getOrUndefined(\n                          interactionScala.request.body.contentType\n                        ),\n                      ]}\n                    />\n                  }\n                >\n                  <DiffViewSimulation\n                    renderDiff={diff.inRequest}\n                    diff={diff}\n                    interactionScala={interactionScala}\n                    description={description}\n                    body={interactionScala.response.body}\n                    outerRfcState={outerRfcState}\n                    selectedInterpretation={selectedInterpretation}\n                  />\n                </ShapeBox>\n              }\n              right={\n                <DiffHelperCard\n                  inRequest\n                  description={description}\n                  currentInteraction={interactionScala}\n                  {...{\n                    selectedDiff,\n                    setSelectedDiff,\n                    selectedInterpretation,\n                    setSelectedInterpretation,\n                  }}\n                />\n              }\n            />\n\n            <div style={{ marginTop: 20, marginBottom: 20 }}>\n              <DocDivider />\n            </div>\n          </Show>\n\n          <Show when={interactionScala.response.body.nonEmpty}>\n            <InnerRow\n              left={\n                <ShapeBox\n                  header={\n                    <BreadcumbX\n                      itemStyles={{ fontSize: 13, color: 'white' }}\n                      location={[\n                        `${interactionScala.response.statusCode} Response Body`,\n                        getOrUndefined(\n                          interactionScala.response.body.contentType\n                        ),\n                      ]}\n                    />\n                  }\n                >\n                  <DiffViewSimulation\n                    renderDiff={diff.inResponse}\n                    diff={diff}\n                    interactionScala={interactionScala}\n                    description={description}\n                    body={interactionScala.response.body}\n                    outerRfcState={outerRfcState}\n                    selectedInterpretation={selectedInterpretation}\n                  />\n                </ShapeBox>\n              }\n              right={\n                <DiffHelperCard\n                  inResponse\n                  description={description}\n                  currentInteraction={interactionScala}\n                  {...{\n                    selectedDiff,\n                    setSelectedDiff,\n                    selectedInterpretation,\n                    setSelectedInterpretation,\n                  }}\n                />\n              }\n            />\n          </Show>\n        </div>\n      </div>\n    </ShapeExpandedStore>\n  );\n};\n\nconst InnerRow = ({ left, right }) => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.innerRow}>\n      <div style={{ flex: 1, paddingRight: 25 }}>{left}</div>\n      <div style={{ width: 250 }}>{right}</div>\n    </div>\n  );\n};\n\nexport const ShapeBox = ({ header, children }) => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.shapeBox}>\n      <div className={classes.headerBox}>{header}</div>\n      <div>{children}</div>\n    </div>\n  );\n};\n"],"sourceRoot":""}